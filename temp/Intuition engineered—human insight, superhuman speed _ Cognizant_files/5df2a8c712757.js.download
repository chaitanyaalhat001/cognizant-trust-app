var CS_CONF={"useLambdaBuild":false,"collectionEnabled":true,"useSentry":false,"isSMB":false,"projectId":3151,"status":1,"hostnames":["cognizant.com","newuat.cognizant.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"[a-z0-9]+-interchange","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":".*((cognizant\\.com)(\\/)|(\\/de\\/de\\/strategic-cloud-partner)|(\\/fr\\/fr\\/reinvent-decision-making-with-ai)|(\\/us\\/en\\/industries\\/information-services-digital-solutions))(\\?.*)?","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aeu1.contentsquare.net","malkaRecordingDomain":"k-aeu1.contentsquare.net","staticResourceManagerDomain":"srm.ba.contentsquare.net","voc":{"siteId":null,"enabled":0}};
;
(()=>{var rh=Object.defineProperty;var nh=(s,r,t)=>r in s?rh(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var ce=(s,r,t)=>nh(s,typeof r!="symbol"?r+"":r,t);var se={};se.d=(s,r)=>{for(var t in r)se.o(r,t)&&!se.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};se.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();se.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);se.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var sn={};se.r(sn);se.d(sn,{getRequestParameters:()=>nm});function qe(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t||(t=s[r]),t}var ni=typeof window=="undefined";function oh(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof se.g!="undefined"?se.g:typeof process!="undefined"?process:Function("return this")()}var ot=oh();var ha="cs-native-frame",Re={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=qe(window,"setTimeout");window.csQueueMicrotask=qe(window,"queueMicrotask");window.csClearTimeout=qe(window,"clearTimeout");window.csSetInterval=qe(window,"setInterval");window.csClearInterval=qe(window,"clearInterval");window.csFileReader=qe(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function ah(){let s=document.createElement("iframe");s.id=ha,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function ch(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function lh(s,r,t){let e=ch(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function ua(s){var r,t;Object.keys(Re.constructors).forEach(e=>{window[Re.constructors[e]]=s[e]instanceof Function&&s[e].prototype==null?s[e].bind(window):s[e]}),dh(s),("Prototype"in window||uh())&&(window.csMutationObserver=(t=(r=qe(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),gs("csNode",Re.nodeProperties,s.Node.prototype,"get"),gs("csElement",Re.elementProperties,s.Element.prototype,"get"),gs("csElement",Re.elementPropertiesValues,s.Element.prototype,"value",!1),gs("csHTMLImageElement",Re.imageProperties,s.HTMLImageElement.prototype,"set"),gs("csEvent",Re.eventProperties,s.Event.prototype,"get"),gs("csNavigator",Re.navigatorProperties,s.navigator,"value")}function gs(s,r,t,e,i=!0){r.forEach(n=>{let a=typeof n!="string"&&"binding"in n,c=a?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=lh(t,c,e),a&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function da(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function hh(){try{let s=ah();return s?(window.CSPureWindow=s,ua(window.CSPureWindow),!0):!1}catch(s){return da("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!hh())try{ua(ot)}catch(s){da("Critical",`failed to copy references from window: ${s.message}`)}function uh(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function dh(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}var zt=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(a){return csString.prototype.replace.call(a,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(a){return csString.prototype.replace.call(a,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(a,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(a,c,l);let u=new csRegExp(t(c),"g");return csString.prototype.replace.call(a,u,l)}r.stringReplaceAll=i;function n(a,c,l=""){return a.length<=c?a:csString.prototype.slice.call(a,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Lr(s){return zt.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function ph(s){let r=s.getAttribute("id");return r&&zt.escapeInvalidCharacters(r)}function te(s){return Z(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function bs(s){return s===parseInt(s,10)}function z(s){return Z(s)&&(typeof s=="string"||s instanceof csString)}function Qn(s){return typeof s=="boolean"}function Zs(s){return typeof s=="object"}function Z(s){return typeof s!="undefined"}function Pt(s){return Z(s)&&s!==null}function fh(s,r,t){return bs(s)&&s>=r&&s<=t}function gh(s){for(let r in s)return!1;return!0}function Fe(s){return typeof s=="function"}function oi(s){return s instanceof Element}function ze(s){return s instanceof Error}function mh(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function nt(s){return s.nodeType===1}function Vi(s){return s.nodeType===3}function yh(s){return s.nodeType===8}function pa(s){return nt(s)&&s.localName==="link"}function Eh(s){return nt(s)&&s.localName==="source"}function fa(s){return nt(s)&&s.localName==="a"}function rn(s){return pa(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Sh(s){return nt(s)&&s.localName==="img"}function Gi(s){return nt(s)&&s.localName==="style"}function qi(s){return nt(s)&&s.localName==="input"}function nn(s){return nt(s)&&s.localName==="textarea"}function Wi(s){return nt(s)&&s.localName==="script"}function vh(s){return nt(s)&&s.localName==="button"}function Cs(s){return nt(s)&&"ownerSVGElement"in s}function on(s){return nt(s)&&s.localName==="select"}function _h(s){return nt(s)&&s.localName==="details"}function wh(s){return nt(s)&&s.localName==="summary"}function bh(s){return Cs(s)&&s.localName==="image"}function Ah(s){return Cs(s)&&s.localName==="use"}function Th(s){return Cs(s)&&s.localName==="feImage"}function Rh(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function Ch(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Ui(s){return s.nodeType===9}function ti(s){return Rh(s)&&"host"in s&&"mode"in s}function ga(s){return nt(s)&&!!csElementshadowRoot.apply(s)&&ti(csElementshadowRoot.apply(s))}var Ih=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Ph(s){return nt(s)&&Pt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Ih,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var ai="detached";function ma(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return ji(r)&&csArray.prototype.push.call(t,ai),{ancestors:t,selectionRoot:r}}function Oh(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&fa(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return ji(r)&&csArray.prototype.push.call(t,ai),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function ji(s){return fe.isValidElement(s)}var ss=(()=>{var s,r;return(r=(s=ot.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Yt=ss.matches||ss.matchesSelector||ss.mozMatchesSelector||ss.msMatchesSelector||ss.oMatchesSelector||ss.webkitMatchesSelector,Zn=ss.closest,ya=9;function Nh(s,r){return r?csArray.prototype.some.call(r,t=>Yt.call(s,t)):!1}function Mh(s,r,t){if(s===ai||s.nodeType===ya)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Lr(r),a=0,c=r.previousElementSibling;for(;c;)(Lr(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Nh(c,t.reliableSelectors)&&(a+=1),c=c.previousElementSibling;return a}function kh(s,r,t){if(s===ai||s.nodeType===ya)return 0;let e=0,i=r.previousElementSibling;for(;i;)Yt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Dh=[/\d{4}/,/^ember\d+$/],Lh="@",an="data-cs-override-id",xh="data-cs-dynamic-id";function Ea(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,a=Lr(s);if(n&&n.test(s.localName)&&(a=csString.prototype.replace.call(a,n,`$1${Lh}`)),jh(s,t)){let y=cn(s);return{hasUniqueIdentifier:!0,elementSelector:`${a}[${an}="${y}"]`}}let c=qh(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Vh(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UCS[${l}]`};let u=ph(s);if(Bh(s,u,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${a}#${u}`};let m=Uh(s,e);if(m){let y=kh(r,s,m);return{hasUniqueIdentifier:!1,elementSelector:`${a}[${m}](${y})`}}let d=Mh(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${a}:eq(${d})`}}function Vh(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Yt.call(s,e)&&Gh(e,r))return e}}function Uh(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Yt.call(s,t))return t}}function jh(s,r){let t=cn(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&ln(an,t,r)}function Hh(s){return cn(s)!==null}function cn(s){return s.getAttribute(an)}function Bh(s,r,t,e){return r&&!Hh(s)&&!Fh(s,r,e)&&$h(r,t)}function Fh(s,r,t){return s.hasAttribute(xh)||zh(r,t)}function zh(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Dh,e=>e.test(s))||t)}function $h(s,r){return s&&ln("id",s,r)}function ln(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Gh(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function qh(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&ln(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var xr=11;function Hi(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return to(e,t);let i=e,n=s[0],{elementSelector:a,hasUniqueIdentifier:c}=Ea(i,n,r,t);if(!t.fullPath&&c){let u=s[s.length-1];return`${to(u,t)}${a}`}let l=Hi(s,r,t);return`${l?`${l}>`:""}${a}`}function to(s,r){if(s===ai)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=ma(s.host);return`${Hi(t,e,r)}|shadow-root|`}return s.nodeType===xr?"|fragment|":""}var Sa=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Wh=(()=>{class s extends Sa{constructor(){super(...arguments),this.lo=!1,this.ho=!1,this.Za=!1}zm(t,e){return this.lo&&!(e===null&&ji(t))&&t.nodeType!==xr&&!t.host}$m(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.zm(t,e))return;let a=!1;e===null&&ji(t)&&(a=!0,this.done=!0);let c=this.ho&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Za=!0,this.lo=!1,this.ho=!1),!l&&e===null&&t.nodeType===xr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.$m(t))return;let u=e!=null?e:"detached",{elementSelector:m,hasUniqueIdentifier:d}=Ea(t,u,i,this.options);d&&(this.ho=!0,this.lo=!this.options.fullPath);let y=`${a?`|detached|${c}`:""}${this.lo&&!d?"":m}`,S=!d&&this.ho&&!this.options.fullPath?"":this.path&&!this.Za?">":"";this.Za=!1,this.path=`${y}${S}${this.path}`}}return s})();function Wt(s,r=It.SHOW_ALL){let t=r|It.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=eo(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let a=i;return i=null,a}for(;e.length>0;){if(n){let u=n;return n=null,u}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=eo(c);if(r&It.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(dr[c.nodeType]&r)!==0)return c}return null},visitAll(a){dr[s.nodeType]&r&&a(s);let c=this.nextNode();for(;c;){if((dr[c.nodeType]&r)===0){c=this.nextNode();continue}a(c),c=this.nextNode()}},collectAll(a){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,a?a(l):l)),c}}}function eo(s){return s&&ga(s)?s.shadowRoot:null}var ur=(()=>{var s;return(s=ot.Node)!==null&&s!==void 0?s:{}})(),It=(()=>{var s;return(s=ot.NodeFilter)!==null&&s!==void 0?s:{}})(),dr={2:It.SHOW_ATTRIBUTE,4:It.SHOW_CDATA_SECTION,8:It.SHOW_COMMENT,11:It.SHOW_DOCUMENT_FRAGMENT,9:It.SHOW_DOCUMENT,10:It.SHOW_DOCUMENT_TYPE,1:It.SHOW_ELEMENT,[ur.ENTITY_NODE]:It.SHOW_ENTITY,[ur.ENTITY_REFERENCE_NODE]:It.SHOW_ENTITY_REFERENCE,[ur.NOTATION_NODE]:It.SHOW_NOTATION,7:It.SHOW_PROCESSING_INSTRUCTION,3:It.SHOW_TEXT},ct={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Yh(s){ct=s}var V=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let a=e.value;e.value=function(...c){return $e(n,a.bind(this))(...c)}}};function $e(s,r){return function(...t){try{let e=r.apply(this,t);return Z(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>ct.error(ze(i)?i:new Error(i),s)):e}catch(e){try{ct.error(ze(e)?e:new Error(e),s)}catch{}}}}var Is=(()=>{class s{constructor(){this.uo=0}get length(){return this.uo}get isEmpty(){return!this.Os}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.uo++,this.Pr?this.Pr=this.Pr[1]=[t,void 0]:this.Pr=this.Os=[t,void 0]}pop(){if(!this.Os)return null;this.uo--;let t=this.Os[0];return this.Os=this.Os[1],this.Os||(this.Pr=void 0),t}forEach(t){let e=this.Os;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.uo=0,this.Os=this.Pr=void 0}}return s})(),va=50,_a=.1;function Xh(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let r="isPerformanceMeasureSupported",t=`${r}_a`;return performance.mark(t),performance.measure(r,t)!==void 0}var Bi=!1,Mi=new Is;function Kh(s=50,r=.1){Bi=ct.isPerfLoggingActive()&&Xh(),Bi&&(va=s,_a=r)}var Vr=[],pr=[];function wa(s){csArray.prototype.push.call(Vr,s),performance.mark(`${s}-start`)}function ba(s){let r=performance.measure(s,`${s}-start`);if(!r)return;let t=r.duration;t>=_a&&csArray.prototype.push.call(pr,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(Vr),Vr.length===0&&(t>va&&Mi.push(pr),pr=[])}function cs(s,r){return function(...t){if(!Bi)return s.apply(this,t);wa(r);let e=s.apply(this,t);return ba(r),e}}var Ot=function(s){return function(r,t,e){let i=e.value;e.value=function(){if(!Bi)return e.value=i,i.apply(this,arguments);wa(s);let n=i.apply(this,arguments);return ba(s),n}}};var ns=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&ga(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Wt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(a=>a.host)}r.getAllShadowHosts=cs(i,"getAllShadowHosts")}(s||(s={})),s})(),gt=(()=>{let s;return function(r){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function a(){let d=window.csScreen.width;return bs(d)&&d>0?d:window.screen.width}r.screenWidth=a;function c(){let d=window.csScreen.height;return bs(d)&&d>0?d:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function u(){return window.pageYOffset}r.windowOffsetY=u;function m(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${a()}`,sh:`${c()}`}}r.getRequestParameters=m}(s||(s={})),s})();function ei(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function je(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Jh(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let a=r(s[n]);for(let c=0;c<a.length;c++)t(a[c],i++)}return e}function Aa(s,r){let t=[];return Jh(s,r,e=>csArray.prototype.push.call(t,e)),t}function J(s,r){if(Qh(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Qh(s){return s.length>=0}function Ve(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Zh(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Ta(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function tu(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let a=0;a<s.length;a++)i[n++]=s[a];for(let a=0;a<r.length;a++)i[n++]=r[a];if(!t)return i;for(let a=0;a<t.length;a++)i[n++]=t[a];return i}function so(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function Ps(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var fr=(()=>{var s;return(s=ot.Node)!==null&&s!==void 0?s:Object})(),dt=(()=>{let s;return function(r){let t="isConnected"in fr.prototype?v=>v.isConnected:v=>!v.ownerDocument||!(v.ownerDocument.compareDocumentPosition(v)&v.DOCUMENT_POSITION_DISCONNECTED);function e(v,O){for(let x=v;x;x=csNodenextSibling.apply(x))O(v)}r.forEachChild=e;function i(v){return t(v)}r.isConnected=i;function n(v,O){let x=[];for(let H of l(v,O))csArray.prototype.push.call(x,H);return x}r.getAncestors=n;let a=(v,O)=>{var x;return(x=csNodeparentNode.apply(v))!==null&&x!==void 0?x:O&&ti(v)?v.host:null};function c(v,O,x=!1){let H=v;for(;H;){if(O(H))return H;let tt=a(H,x);if(tt&&tt!==H)H=tt;else break}return null}r.findAncestor=c;function*l(v,O=!1){let x=v;for(;x;){yield x;let H=a(x,O);if(H&&H!==x)x=H;else break}}r.walkUp=l;function u(v,O){if(v===O||O.contains(v))return!0;let x=r.getParentElement(v);return x&&x!==v?u(x,O):!1}r.isDescendantOf=u;function m(v){var O;return v.parentElement?v.parentElement:r.getRootNode(v)?(O=r.getRootNode(v))===null||O===void 0?void 0:O.host:null}r.getParentElement=m;function d(v,O=document){let x=ei(window.csquerySelectorAll[O.nodeType].call(O,v)),H=ns.getAllShadowHosts(O);for(let tt of H){let ht=ns.getShadowRoot(tt);if(!ht)continue;let bt=ei(window.csquerySelectorAll[ht.nodeType].call(ht,v));csArray.prototype.push.call(x,...bt)}return x}r.findAllElements=d,r.getRootNode=(()=>{if("getRootNode"in fr.prototype)return(x,H)=>x.getRootNode(H);function v(x){let H=O(x);return ti(H)?v(H.host):H}function O(x){return csNodeparentNode.apply(x)!=null?O(csNodeparentNode.apply(x)):x}return(x,H)=>typeof H=="object"&&!!H.composed?v(x):O(x)})();function y(v){return v==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(v)}function E(v){let O=v.getBoundingClientRect();return O.right+gt.windowOffsetX()<0||O.bottom+gt.windowOffsetY()<0}function S(v){var O,x;if(((O=v.checkVisibility)===null||O===void 0?void 0:O.call(v,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!v.offsetParent){if(!v.getBoundingClientRect)return ct.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${v instanceof fr} Ctor: ${(x=v==null?void 0:v.constructor)===null||x===void 0?void 0:x.name}`),!1;let ht=v.getBoundingClientRect();if(ht.width==0&&ht.height==0)return!0}let H=window.getComputedStyle(v);return H?H.display==="none"||H.visibility==="hidden"||H.visibility==="collapse"||H.opacity==="0"||H.filter==="opacity(0)"||H.width==="0px"&&H.height==="0px"||y(H.color):!0}r.isHiddenByCSS=S;function T(v){if(S(v))return!0;let x=m(v);return x!=null&&T(x)}r.areAncestorsHiddenByCSS=T;function I(v){let O=null,x=v;do if(S(x))O=x;else break;while(x=m(x));return O}r.getTopAncestorHiddenByCSS=I;function b(v){let O=w(v);return O!==null&&!v.contains(O)&&!O.contains(v)}function w(v){let O=v.getBoundingClientRect(),x=O.left+.5*O.width,H=O.top+.5*O.height;return P(document,x,H)}r.getTopElement=w;function L(v){if(!v.getBoundingClientRect)return null;let O=v.getBoundingClientRect(),x=O.x+O.width/2,H=O.y+O.height/2;return r.getTopElementFromPoint(document,x,H)}r.getElementOnTop=L;function P(v,O,x){let H=v.elementFromPoint(O,x);if(!H)return null;let tt=ns.getShadowRoot(H);return tt&&tt!=r.getRootNode(document.body)&&tt!==v?P(tt,O,x):H}r.getTopElementFromPoint=P;function R(v){return!E(v)&&!S(v)&&!b(v)}r.isVisibleInDocument=R;function U(v){return S(v)?!1:G(v)}r.isVisibleInViewportInForeground=U;function G(v){let O=w(v);return O===null?!1:v===O?!0:wt(v)?v.textContent!==""&&O.contains(v):v.contains(O)}r.isInViewPort=G;function lt(v,O,x){let H=v.getAttributeNS(O,x);return H===""?v.hasAttributeNS(O,x)?H:null:H}r.getAttributeNS=lt;function Nt(v){return!!(v.hasAttribute("tabIndex")||v.getAttribute("contentEditable")==="true"||fa(v)&&v.hasAttribute("href")||(on(v)||nn(v)||qi(v)||vh(v))&&!v.hasAttribute("disabled")||_h(v)||wh(v))}r.isElementFocusable=Nt;function wt(v){return v.localName==="span"||v.localName==="a"||v.localName==="b"||v.localName==="i"||v.localName==="button"||v.localName==="input"||v.localName==="label"||v.localName==="cite"||v.localName==="small"||v.localName==="strong"||v.localName==="code"||v.localName==="abbr"||v.localName==="em"||v.localName==="dfn"||v.localName==="time"||v.localName==="output"||v.localName==="object"||v.localName==="sub"}r.isInlineElement=wt}(s||(s={})),s})(),eu=(()=>{class s{constructor(t){this.Gm=t}run(t){let e=[...this.Gm],i=dt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let a=csArray.prototype.shift.call(i),c=i[0]||null;if(this.qm(e,a,c,n),this.Wm(e),e.length===0)break;i.length===0&&a.host&&(i=dt.getAncestors(a.host,!1),n=i[i.length-1])}}qm(t,e,i,n){for(let a of t)a.serializeElement(e,i,n)}Wm(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),su=(()=>{class s extends Sa{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.Ym(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}Ym(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Xm(t.id),t.classList&&(e+=this.Km(csArray.from(t.classList))),t.attributes&&(e+=this.Jm(t)),e}Xm(t){return t?`#${t};`:""}Km(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Qm(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Cs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||qi(t)&&e==="value"}Zm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}ty(t){let e={};for(let i of csArray.from(t.attributes))this.Qm(t,i.name)||(e[i.name]=i.value);return e}Jm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.ty(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([a])=>a.length<this.options.attrMaxLength),([a,c])=>this.Zm(a,c)?`[${a}]`:`[${a}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),fe=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,u={fullPath:!1,dynamicIdRegex:null}){let m=a(c);if(m===document)return{path:"",hierarchy:""};if(!t(m))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let d=new Wh(u),y=new su(l);return new eu([d,y]).run(m),{path:d.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let u=a(c);if(u===document)return"";if(!t(u))return r.INVALID_ELEMENT;let{ancestors:m,selectionRoot:d}=ma(u);return Hi(m,d,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let u=a(c);if(u===document)return{path:"",firstAnchorParent:null};if(!t(u))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:m,ancestors:d,selectionRoot:y}=Oh(u);return{path:Hi(d,y,l),firstAnchorParent:m}}r.getElementPathAndFirstAnchorParent=n;function a(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||fe;var iu=Number.MAX_SAFE_INTEGER||9007199254740991;function io(){}function Ge(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ru(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var hn=34164e6,os={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=iu){return Math.floor(Math.random()*s)}},gr=csSymbol("cachedJson");function nu(s){if(s[gr])return s[gr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+As(s[0]);for(let t=1;t<s.length;t++)r+=","+As(s[t]);return r+="]"}return s[gr]=csJSON.stringify(s)}var As=typeof window.Symbol!="undefined"?nu:csJSON.stringify;var it=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),Ra=["t.contentsquare.net","clicktale"],ou=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Ra,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,j.critical(t)}};window.addEventListener("error",ou);var j=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Ra,t)}static setStrategy(t){s.ji=t}static computeIsActive(t){s.je=os.boolean(t),s.je?s.tc=os.boolean(10):s.tc=!1}static isLoggingActive(){return s.je}static getStrategy(){return s.ji}static debug(t,e=""){s.je&&this.ji.send(t,e,it.debug)}static warn(t,e=!0,i=""){var n;s.je&&e&&this.ji.send(t,i,it.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){s.je&&this.ji.send(t,e,it.implementation)}static error(t,e=""){var i;s.je&&this.ji.send(t,e,it.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.ji.send(t,e,it.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Z(window.Promise)&&n instanceof window.Promise?n.then(a=>a,a=>s.error(ze(a)?a:new Error(a),t)):n}catch(n){try{s.error(ze(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.tc}}return s.je=!1,s.tc=!1,s})();var au=/^\d+\.\d+(?:\.\d+)?$/,cu=s=>{if(!au.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},lu=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,hu=(s,r)=>lu(s,r)>=0,uu=1,du="f553e78fb58e051e51fe8074c4c6e73e",Ur=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),pu=(()=>{class s{constructor(t){var e,i,n,a,c,l,u,m,d,y,E,S,T;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||hn,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((a=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&a!==void 0)||a),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(u=t.apiErrorsEnabled)!==null&&u!==void 0?u:0,...t.apiErrors},this.customErrors={enabled:(m=t.customErrorsEnabled)!==null&&m!==void 0?m:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.sc(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.sc(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.sc(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(d=t.recordingUrlRules)!==null&&d!==void 0?d:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((y=t.uxaDomain)===null||y===void 0?void 0:y.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(E=t.anonymizeDigits)!==null&&E!==void 0?E:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(T=t.collectTargetText)!==null&&T!==void 0?T:Ur.Disabled}getTrackerUri(){return`${this.Ns()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.Ns()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${du}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.Ns()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Ns()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Ns()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Ns()}://${this.staticResourceManagerDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Ns()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.Ns()}://${this.paProxyDomainUri}`}Ns(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===uu}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,a]=i;this.ey(n,a)}})}ey(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}sc(t){return t?this.sy(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}sy(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let[,i,n]=e;return new csRegExp(`^${i}$`,n)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.$u()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.$u())return!0;let t=cu(this.getHeapVersion()||"");if(t&&t.major===4&&hu(t,{major:4,minor:23,patch:5}))return!0}return!1}$u(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,a,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(a=window.heap)===null||a===void 0?void 0:a.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Ur.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}}return s})(),fu=(()=>{class s{constructor(t,e){this.po=t,this.Gu=e}init(){this.qu=this.po!==this.po.top,this.Wu=this.Gu.isWebView&&this.po===this.po.top,this.Gu.iframesTracking&&this.qu||this.Wu?this.Yu=!1:this.Yu=!0}isInIframeContext(){return this.qu}isTopWindowTracker(){return this.Yu}isInWebViewContext(){return this.Wu}}return s})(),si=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Ca=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ts=(()=>{class s extends Ca{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.ic(t);let e=si.toQuery(t);this.iy(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}iy(t){let e=new window.Image(1,1);e.onload=io,e.onerror=io,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}ic(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),gu=(()=>{class s{constructor(t,e){this.Ms=t,this.ry=e}init(){this.us=new Ts(this.Ms.getLoggerUri()),this.us.setRequestParametersProviders(this,this.ry)}send(t){this.fo=t,this.us.send()}getRequestParameters(){return{a:this.fo.app,l:this.fo.level,m:this.fo.message,s:this.fo.stacktrace}}}return s})();function at(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var jr=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=null,at([V("Metric.aggregate")],s.prototype,"aggregate",null),s})(),Ct=(()=>{class s extends jr{constructor(t,e=100){super(t),this.ny=e,this.Ne=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){jr.globalService&&(this.Ne&&window.csClearTimeout(this.Ne),this.Ne=window.csSetTimeout(()=>{this.aggregate(),this.Ne=null},this.ny))}}return s})();var rt={counters:{commandsFromIntegrations:new Ct("commands-from-integrations"),commandsFromCSTC:new Ct("commands-from-cstc"),commandsFromIframe:new Ct("commands-from-iframe"),commandApplied:new Ct("command-applied"),commandError:new Ct("command-error"),commandMisuse:new Ct("command-misuse"),CSTCSnippetUsed:new Ct("cstc-snippet-used"),redactedPII:new Ct("redacted-pii"),pageAnonymisation:new Ct("page-anonymisation"),patchedNativeFunctions:new Ct("patched-native-functions"),pureWindowState:new Ct("pure-window-state"),sensitiveElements:new Ct("sensitive-elements"),cspErrors:new Ct("csp-errors"),networkRequests:new Ct("network-requests"),webVitalsErrors:new Ct("web-vitals-errors")},setService(s){jr.setGlobalService(s)}},mu=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,yu=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Eu="CS_ANONYMIZED_EMAIL",mr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Su=new csRegExp(`(ey${mr}\\.ey${mr}\\.${mr})`,"g"),vu="CS_ANONYMIZED_JWT",_u=/[0-9]{4}/,wu=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,bu="CS_ANONYMIZED_PII",Au="\u2022",Tu=/\d/g,Ru=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Cu=/(?:\d{1,3}\.){3}\d{1,3}/,Iu=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Ce=(()=>{let s;return function(r){function t(m){return csString.prototype.replace.call(m,mu,Eu)}r.replaceEmail=t;function e(m){return csString.prototype.replace.call(m,Su,vu)}r.replaceJWT=e;function i(m,d){return csString.prototype.replace.call(m,wu,d)}r.replaceCreditCardNumber=i;function n(m){return csString.prototype.replace.call(m,Tu,Au)}r.replaceDigits=n;function a(m){return Cu.test(m)||Iu.test(m)}r.mayHaveIPAddress=a;function c(m){return Ru.test(m)}r.mayHaveNumberSequence=c;function l(m){return _u.test(m)}r.mayHaveCreditCardNumber=l;function u(m){return yu.test(m)}r.mayHaveEmail=u}(s||(s={})),s})(),ci=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.oy(this.rc(t));return e===!0?i=this.ay(i):e===!1&&(i=this.cy(i)),i}anonymizePII(t){return this.rc(t)}anonymizeJwt(t){return Ce.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.rc(t[i])}),t}rc(t){if(Ce.mayHaveEmail(t)){let e=Ce.replaceEmail(t);return e!==t&&rt.counters.redactedPII.count("email"),e}return t}ay(t){return Ce.replaceDigits(t)}cy(t){return Ce.mayHaveNumberSequence(t)?Ce.replaceDigits(t):t}oy(t){return Ce.mayHaveCreditCardNumber(t)?Ce.replaceCreditCardNumber(t,(e,i,n,a,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let u=a.length?csArray.prototype.join.call(csString.prototype.split.call(n,a),""):n;if(!this.ly(u))return e;rt.counters.redactedPII.count("cc")}else rt.counters.redactedPII.count("cc-partial");return`${i}${bu}${c}`}):t}ly(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let a=parseInt(t[n]);n%2===0&&(a*=2),i+=Math.floor(a/10)+a%10}return 10-i%10===e}}return s})(),Ia="15.115.0";function un(){return{v:Ia}}function dn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function ro(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function Pa(s){let r=self.atob(s);return dn(r)}function Hr(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function no(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(a){ct.warn(`${a}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Pa(e[1]):dn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Oa=typeof performance!="undefined"&&!!performance.now,oo=Oa?()=>performance.now():csDate.now,Pu=(()=>{var s,r;return Oa?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),k={now(){return Math.round(oo()+Pu)},elapsed(){return oo()}};function ao(){return Math.floor(k.now()/1e3)}function Na(){return typeof window.Promise=="function"}function Ou(){var s;return typeof crypto!="undefined"&&Fe((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function co(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function ie(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function li(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Ma=(()=>{class s{constructor(t,e){this.f=t,this.N=e}getRequestParameters(){return{d:`${k.now()}`,p:this.N.anonymizePII(window.location.href),...this.f.getRequestParameters(),...un()}}}return s})(),Nu="uxa",lo=5,Mu="No stacktrace",ka="snippet-",Da="implementation-snippet-",ho=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),yr={[it.debug]:0,[it.warn]:1,[it.implementation]:1,[it.error]:2,[it.critical]:3},ku=(()=>{class s{constructor(t,e,i){this.ds=e,this.N=new ci,this.Xu=yr[it.warn],this.Xu=yr[t.minLogLevel||it.warn],this.us=i||new gu(t,new Ma(t,this.N)),this.Ku={[it.debug]:[],[it.warn]:[],[it.implementation]:[],[it.error]:[],[it.critical]:[]},this.go={implementation:{},dynamic:{}},this.us.init()}send(t,e="",i=it.warn){if(!this.hy(i,e))return;csArray.prototype.push.call(this.Ku[i],e||"");let n={message:this.uy(t,e),stacktrace:this.dy(t),app:Nu,level:i};this.us.send(n)}uy(t,e){let i=ze(t)?this.N.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}dy(t){return ze(t)?`${t.stack||Mu} ${this.Or()}`:this.Or()}Or(){let t=this.ds.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ds.getSessionService(),n=i&&i.getSession(),a={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(a)}hy(t,e){if(yr[t]<this.Xu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Da,0))===0)return this.Ju(e,ho.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,ka,0))===0)return this.Ju(e,ho.DYNAMIC);let i=this.Ku[t];return!(i.length>=lo||e&&csArray.prototype.some.call(i,n=>n===e))}Ju(t,e){return t in this.go[e]?this.go[e][t]>=lo?!1:(this.go[e][t]+=1,!0):(this.go[e][t]=1,!0)}}return s})(),vt=!ni&&document.createElement("a"),Du=/(:443|:80)$/;function He(s){return vt?(vt.href=s,vt.href):""}function Lu(s,r){return new csURL(s,r).href}function La(s){let r=fn(s);return r===null?"":decodeURIComponent(r.hostname)}function pn(s,r){return csArray.prototype.some.call(r,t=>li(s,`.${t}`)||s===t||t==="")}function xu(s){return s[0]==="/"?s:`/${s}`}function uo(s){return csString.prototype.replace.call(s,Du,"")}function fn(s){return!vt||!ie(s,"http://")&&!ie(s,"https://")?null:(vt.href=s,{hash:vt.hash,host:uo(vt.host),hostname:vt.hostname,href:vt.href,origin:vt.origin?vt.origin:uo(`${vt.protocol}//${vt.host}`),pathname:xu(vt.pathname),port:vt.port,protocol:vt.protocol,search:vt.search})}var po="CS_IFRAME_MESSAGE",Vu=(()=>{let s;return function(r){r.AfterPageView="afterPageView",r.GetSessionKey="getSessionKey"}(s||(s={})),s})(),Qt=(()=>{let s;return function(r){r.Parent="parent",r.Child="child"}(s||(s={})),s})(),K=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),ft=(()=>{let s;return function(r){function t(l,u,m,d){let y={type:l,from:u,pid:m,signature:po};return d!==void 0&&d>=0&&(y.id=d),y}r.buildBaseMessage=t;function e(l,u,m,d){let y=La(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===po&&l.data.from===u&&l.data.pid===m&&pn(y,d)}r.isMessageValid=e;function i(l,u,m,d){d?l.postMessage(m,u,d):l.postMessage(m,u)}r.sendPostMessage=i;function n(){return new MessageChannel}r.getNewChannelMessage=n;function a(l,u){l.postMessage(u)}r.sendChannelMessage=a;function c(l){l.close()}r.closeChannelPort=c}(s||(s={})),s})(),Uu=(()=>{class s{constructor(t){this.f=t}send(t,e="",i=it.warn){let n={message:t,errorCode:e,level:i},a=ft.buildBaseMessage(K.ChildLogMessage,Qt.Child,this.f.projectId);a.content=n,ft.sendPostMessage(window.parent,"*",a)}}return s})(),ju=(()=>{class s{setContext(t,e){this.I=t,this.A=e}getVisitorService(){return this.I}getSessionService(){return this.A}}return s})();function Hu(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function F(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Bu(){let s=new MutationObserver(r=>{r.forEach(t=>{J(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(rt.counters.pureWindowState.count("iframe-deletion"),ct.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function fo(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Fu(){(!fo(MutationObserver)||!fo(MutationObserver.prototype.observe))&&rt.counters.patchedNativeFunctions.count("MutationObserver")}function zu(){try{window.CSPureWindow&&Bu(),Fu()}catch{}}var ut=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let m=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return m?decodeURIComponent(m[2]):null}r.get=t;function e(l,u,m,d,y,E){let S=encodeURIComponent(`${u}`),T=m===r.CURRENT_DOMAIN?void 0:m,I=i(d),b=I?`;expires=${I.toUTCString()}`:"",w=";path=/",L=Pt(T)?`;domain=${T}`:"",P=`${l}=${S}${b}${w}${L}`;return Z(y)&&y!==Le.NotSet&&(P=`${P};SameSite=${y}`),Z(E)&&E===ue.Yes&&(P=`${P};Secure`),document.cookie=P,!0}r.set=e;function i(l){return te(l)?new csDate(k.now()+l):l}r.toExpireDate=i;function n(l,u){t(l)&&e(l,"",u,new csDate(0)),t(l)&&e(l,"",u,new csDate(0),Le.None,ue.Yes)}r.remove=n;function a(){return document.cookie.length>0}r.isCookiePresent=a;function c(l,u){let m="_cs_root-domain",d=t(m);if(d!==null&&d!=="1")return d;let y=csString.prototype.split.call(window.location.hostname,"."),E=csArray.prototype.pop.call(y);for(;y.length&&(d===null||d==="1");)E=csArray.prototype.join.call([csArray.prototype.pop.call(y),E],"."),e(m,E,E,void 0,l,u),d=t(m);return n(m,E),E}r.getRootDomain=c}(s||(s={})),s})(),$u=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Le=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ue=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Yi=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.ci=i,this.nc=!1,this.Qu=Le.NotSet,this.oc=ue.No}getSameSiteFlag(){return this.Qu}getSecureFlag(){return this.oc}getDomain(){return this.ac}getRootDomain(){return this.Zu}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.py(),e=this.fy();this.nc=this.gy(t,e),this.nc?(this.Qu=t,this.oc=e):this.f.secureCookiesEnabled&&this.R.getUrlProtocol()==="https:"&&(this.oc=ue.Yes),this.Zu=this.my(),this.ac=this.yy(this.Zu)}gy(t,e){return $u.browserIsSafariV12()?!1:(ut.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),ut.get(s.COOKIE_TEST_FOR_SAME_SITE)?(ut.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}py(){return this.R.getUrlProtocol()==="http:"?Le.Lax:this.ci.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?Le.None:Le.Lax}fy(){return this.R.getUrlProtocol()==="http:"?ue.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.ci.isSameSiteNoneSecureNeeded()?ue.Yes:ue.No}isSameSiteSupported(){return this.nc}set(t,e,i){let n=ut.toExpireDate(i);ut.set(t,e,this.ac,n,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ac;ut.remove(t,i)}my(){let t=this.ci.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Le.None:void 0,i=t?ue.Yes:void 0;return ut.getRootDomain(e,i)}yy(t){return this.f.allowSubdomains?t:ut.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),ms="_cs_t",go="1",Gu=(()=>{class s{constructor(t,e){this.vt=t,this.f=e,this.mo=!1,this.yo=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.vt.isTopWindowTracker()&&"cookie"in document){if(!this.vt.isInIframeContext()&&ut.isCookiePresent()){this.mo=!0,this.yo=!1;return}if(ut.set(ms,go,ut.CURRENT_DOMAIN),ut.get(ms)!==null){this.mo=!0,this.yo=!1,ut.remove(ms,ut.CURRENT_DOMAIN);return}ut.set(ms,go,ut.CURRENT_DOMAIN,void 0,Le.None,ue.Yes),ut.get(ms)!==null&&(this.mo=!0,this.yo=!0,ut.remove(ms,ut.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.mo}isSameSiteNoneSecureNeeded(){return this.yo}}return s})();function qu(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Wu=(()=>{class s{constructor(t,e){this.f=t,this.ci=e}canTrack(){return this.f.isProjectActive()&&this.Ey()&&this.td()&&this.Sy()}canTrackInChild(){return this.f.isProjectActive()&&this.vy()&&(this.td()||this._y())}Sy(){return this.f.cookielessTrackingEnabled?qu():this.ci.areCookiesEnabled()}td(){return pn(window.location.hostname,this.f.hostnames)}Ey(){return!this.sd()&&this.wy()}vy(){return!this.sd()&&this.by()}_y(){return window.location.protocol==="about:"&&window.location.hostname===""}sd(){return"visibilityState"in document&&document.visibilityState==="prerender"}wy(){return this.rd()&&this.Ay()}by(){return this.rd()}Ay(){try{return!!window.localStorage}catch{return!1}}rd(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Yu=(()=>{class s{constructor(t,e){this.cc=!1,this.nd=new Map,this.od=new Map,this.ad=new Map,this.cd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach(t=>{this.queryParams[t]=e[t]})}removeQueryParams(e){e?e.forEach(e=>{delete this.queryParams[e]}):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,e=>null==a[e])?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,e=>this.doSend(c,a,e)):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach(e=>{r.setRequestHeader(e,this.headers[e])}),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach(e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))}),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach(e=>{this.save(e)}),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map(e=>{const t={};e.headers.forEach((e,s)=>{t[s]=e}),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then(e=>({metadata:t,events:e})):e.arrayBuffer().then(e=>({metadata:t,events:e}))}),r=await Promise.all(s);await Promise.all(t.map(e=>this.cache.delete(e))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,e=>{this.setRamStorageStrategy(e)})}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach(e=>{this.storageStrategy.save(e)})}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad(t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}),d.onError(t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout(()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)},r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)})}()})();`;try{this.ps=this.Ty(e||i),this.cc=!0,s.isTransferableStreamSupported()&&(this.ld=new ReadableStream({start:n=>{this.lc=n},cancel:()=>{this.lc=null}}),this.ps.postMessage(this.ld,[this.ld]))}catch(n){n.name==="SecurityError"&&rt.counters.cspErrors.count("network-worker"),this.cc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.cd,this.lc?this.lc.enqueue(t):this.ps.postMessage(t)}Ty(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,a=new i([t],{type:"application/javascript"}),c=e.createObjectURL(a);j.whiteListFilename(c);let l=new n(c);return l.onmessage=u=>{let{type:m,endpoint:d,WORKER_SIGNATURE:y}=u.data;if(y===this.cd){if(m==="onLoad"){let{response:E}=u.data,S=this.nd.get(d);S&&S(E)}else if(m==="onError"){let{response:E}=u.data,S=this.od.get(d);S&&S(E)}else if(m==="onTimeout"){let E=this.ad.get(d);E&&E()}}},l}registerOnLoadCallback(t,e){this.nd.set(t,e)}registerOnErrorCallback(t,e){this.od.set(t,e)}registerOnTimeoutCallback(t,e){this.ad.set(t,e)}isSupported(){return this.cc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Xu=(()=>{class s{constructor(t){var e;this.Kt={},this.Jt=t.endpoint,this._e=t.networkWorker,this.Ry=t.compressionOutputType,this.Cy=t.useRetry,this._e.postMessage({type:"CreatePostRequest",endpoint:this.Jt,compressionOutputType:this.Ry,useRetry:this.Cy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this._e.postMessage({type:"SetQueryParams",endpoint:this.Jt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}getQueryParams(){return this.Kt}removeQueryParams(t){this._e.postMessage({type:"RemoveQueryParams",endpoint:this.Jt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]})}send(t,e){this._e.postMessage({type:"Send",endpoint:this.Jt,payload:t,queryParams:e})}abort(){this._e.postMessage({type:"Abort",endpoint:this.Jt})}onLoad(t){this._e.registerOnLoadCallback(this.Jt,t)}onError(t){this._e.registerOnErrorCallback(this.Jt,t)}setRequestHeader(t,e){this._e.postMessage({type:"SetHeader",endpoint:this.Jt,headerName:t,headerValue:e})}onTimeout(t,e){this._e.registerOnTimeoutCallback(this.Jt,t),this._e.postMessage({type:"SetTimeout",endpoint:this.Jt,timeout:e})}}return s})(),Xi=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),xa=(()=>{class s{constructor(t){this.onError=t}}return s})(),Ku=(()=>{class s{constructor(t){var e;this.Kt={},this.hc={},this.ud=i=>{for(let n of i){let{metadata:a,events:c}=n;this.send(c,a)}},this.Jt=t.endpoint,this.Nr=t.compressionOpts,this.Qt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Qt&&this.Qt.recover(this.ud)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Kt[e]}):this.Kt={}}send(t,e){let i=e||{...this.Kt},n=!("ct"in i),a=typeof t!="string"&&!this.Iy(t);"ct"in i||(!this.Nr||!n?i.ct=Xi.UNCOMPRESSED:i.ct=this.Nr.compressionType);let c=a?JSON.stringify(t):t,l=Object.keys(i).map(m=>`${encodeURIComponent(m)}=${encodeURIComponent(i[m])}`).join("&"),u=`${this.Jt}?${l}`;if(Zh(this.mandatoryParameters,m=>i[m]==null)){ct.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${u}`);return}this.Nr&&n&&typeof c=="string"?this.Nr.compressor(c,this.Nr.compressionOutputType,m=>this.dd(u,i,m)):this.dd(u,i,c)}onLoad(t){this.Hi=t}onError(t){this.Mr=t}onTimeout(t,e){this.li=t,this.kr=e}abort(){this.pd&&this.pd()}setRequestHeader(t,e){this.hc[t]=e}getQueryParams(){return this.Kt}Iy(t){return t&&t.byteLength!==void 0}dd(t,e,i){let n=new XMLHttpRequest,a=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),n.onload=()=>{if(this.Qt&&this.Qt.recover(this.ud),this.Hi){let c={params:e,responseText:n.responseText,status:n.status};this.Hi(c)}},n.onerror=()=>{this.Qt&&this.Qt.save({key:a,metadata:e,events:i}),this.Mr&&this.Mr({params:e})},this.kr&&this.li&&(n.timeout=this.kr,n.ontimeout=()=>{this.li()}),this.pd=()=>n.abort(),Object.keys(this.hc).forEach(c=>{n.setRequestHeader(c,this.hc[c])}),n.send(i)}}return s})(),Va=(()=>{class s{constructor(t){this.pc=t,this._e=new Yu(this.pc)}create(t,e,i,n,a=[]){if(this._e.isSupported()&&e)return new Xu({networkWorker:this._e,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:a});{let c=i?{compressor:this.pc.compress,compressionOutputType:i,compressionType:this.pc.algorithm}:void 0;return new Ku({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),Ju=(()=>{class s{constructor(t,e,i,n,a){this.I=t,this.A=e,this.Xe=i,this.At=n,this.f=a}get(){return{exclusion:this.Xe.getAppliedTrackingDraw(),visitor:this.I.getVisitor(),session:this.A.getSession(),cvars:this.At.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Xe.exclude(this.f),this.I.removeVisitor(),this.A.removeSession(),this.At.removeCustomVariablesSession()}include(t){this.Xe.removeExclusion(),this.I.setVisitor(t.visitor),t.session?this.A.setSession(t.session):this.A.removeSession(),t.cvars?this.At.setCustomVariableSession(t.cvars):this.At.removeCustomVariablesSession()}}return s})(),Fi=".",gn="__DOT__",Qu=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Ua="x";function Zu(s){let[r,t,e,i,n,a,c,l,u]=rd(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(a),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:u===void 0||u===Ua?null:u}}function td(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Ua],csString),sd),Fi)}function ed(s){return Qu.test(s)}function sd(s){return csString.prototype.replace.call(s,/\./g,gn)}function id(s){return csString.prototype.replace.call(s,new csRegExp(gn,"g"),Fi)}function rd(s){return csString.prototype.indexOf.call(s,gn)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Fi),id):csString.prototype.split.call(s,Fi)}var D=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Vt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),Be=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Ht=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Br=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var nd=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),ja=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Ha=".";function od(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Ha)}function ad(s){if(!mn(s))return null;let r=Fr(s);return r!==null?Ba(r):null}function Ba(s){var r,t;let[e,i,n,a]=csString.prototype.split.call(s,Ha);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:Br.UNNECESSARY,etrStatus:(t=a)!==null&&t!==void 0?t:nd.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function mn(s){return ja.test(s)}function Fr(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,ja))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var le="_cs_ex",mo=2592e6,cd=/^[0-9]+$/,ld=(()=>{class s{constructor(t,e,i){this.f=t,this.V=e,this.Zt=i}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.Zt.getItem(le)):Number(this.V.get(le))}set(t){var e;this.f.cookielessTrackingEnabled?this.Zt.setItem(le,t):(this.V.set(le,t,mo),(e=this.hi)===null||e===void 0||e.call(this,le,t,mo))}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(le):(this.V.delete(le),(t=this.pi)===null||t===void 0||t.call(this,le))}static isValidExclusionString(t){return cd.test(t)}}return s})(),Ie="_cs_cvars",hd=(()=>{class s{constructor(t,e,i){this.f=t,this.V=e,this.Zt=i}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}get(){return this.f.cookielessTrackingEnabled?this.Zt.getItem(Ie):this.V.get(Ie)}set(t){var e;this.f.cookielessTrackingEnabled?this.Zt.setItem(Ie,t):(this.V.set(Ie,t),(e=this.hi)===null||e===void 0||e.call(this,Ie,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(Ie):(this.V.delete(Ie),(t=this.pi)===null||t===void 0||t.call(this,Ie))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var ud="spki",yo="RSA-OAEP",dd="SHA-256",Eo="AES-CTR",pd="SHA-1",So=190,qs=(()=>{let s;return function(r){var t;let e=!1,i=null,n,a=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=ot.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function u(){return i}r.getCryptoKey=u;function m(){var P,R;return((R=(P=ot.self.crypto)===null||P===void 0?void 0:P.subtle)===null||R===void 0?void 0:R.encrypt)!=null&&ot.self.CryptoKey!=null}r.isSupported=m;async function d(P){n=r.crypto.importKey(ud,Pa(P),{name:yo,hash:dd},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||ct.warn(`Fail to import public key '${P}'`)}r.importKey=d;async function y(P){if(!m()||e)return null;await n;let R=dn(P);R.byteLength>So&&(R=R.slice(0,So));try{let U=await r.crypto.encrypt({name:yo},i,R);return ro(U)}catch{return null}}r.asymmetricEncrypt=y;async function E(P,R){if(!m()||e)return null;let U={counter:R.initializationVector,name:Eo,length:64},G=a.encode(P);try{let lt=await r.crypto.encrypt(U,R.cryptoKey,G);return ro(lt)}catch{return null}}r.symmetricEncrypt=E;async function S(P){let R=await T(P);if(!R)throw new Error("Export secret failed");let U=await y(R);if(!U)throw new Error("Encrypt secret failed");return U}r.encryptSecret=S;async function T(P){var R;if(!m())return null;try{return(R=(await r.crypto.exportKey("jwk",P)).k)!==null&&R!==void 0?R:null}catch{return null}}async function I(){if(!m()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:Eo,length:128},!0,["encrypt","decrypt"]),initializationVector:ot.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=I;function b(P){c=P}r.setDigestSalt=b;async function w(P){P=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(P)),c&&(P=`${P}:${c}`);let R=a.encode(P);try{let U=await r.crypto.digest(pd,R);return Hr(U)}catch{return null}}r.digest=w;function L(){return ot.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=L}(s||(s={})),s})();function fd(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=md(r);return t===""||(r=yd(r,t),r.length===0)?"":Fa(r[0])}function gd(s){return csString.prototype.indexOf.call(s,"@")!==-1}function md(s){return s.length>0?Fa(s[0]):""}function yd(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function Fa(s){let r="",t;gd(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Ed=s=>s;function Sd(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let a=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof a!="object"?a:(typeof Proxy=="function"?this[i]=new Proxy(a,{get(c,l){let u=Reflect.get(c,l);return typeof u=="function"?u.bind(c):u},set:(c,l,u)=>{let m=c[l],d=Reflect.set(c,l,u);return e.forEach(y=>y(this,u,m,"subproperty")),d}}):this[i]=a,this[i])},set(){var n;let a=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,a);delete this[i];try{e.forEach(u=>u(this,a[0],c,"property"))}catch(u){ct.error(u)}return l}})}function vd(s,r,t){let e=_d(s,r);if(!e)return null;let i=(n,a,c,l)=>t(n,a,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function _d(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Sd(s,r,i,e),e):(ct.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(ct.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function wd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ct.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let a=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Ps(i),m=>m(c))}catch(m){ct.error(m)}let u=n.apply(this,c);try{for(let m=0;m<l.length;m++)l[m]({result:u,context:this,args:c})}catch(m){ct.error(m)}return u};Ad(a,n),s[r]=a}return i}function is({target:s,methodName:r,hook:t,hookPrepareArgs:e=Ed,options:i}){let n=wd(s,r);if(!n)return null;let a=c=>{let l=e(c),u=i!=null&&i.withCallerName?{callerName:fd()}:{};return m=>t({...m,...u,args:l})};return{activate:()=>{n.add(a)},deactivate:()=>{n.delete(a)}}}function bd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let a=arguments,c=this[r],l=(n=i.set)===null||n===void 0?void 0:n.apply(this,a);try{e.forEach(u=>u(this,a[0],c,"property"))}catch(u){ct.error(u)}return l}}),e):(ct.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function zi(s,r,t){let e=bd(s,r);if(!e)return null;let i=(n,a,c)=>t(n,a,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Ad(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Os=(()=>{var s;class r{static My(e){this.ks.forEach(i=>{e(i,"initial")})}static Dr(e){if(this.M||(this.M=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&J(n.addedNodes,this.ky),J(n.removedNodes,this.Dy)})),csArray.prototype.push.call(this.be,e),!this.G){this.G=!0,this.M.observe(document,this.Lr);for(let i of ns.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.ks.add(n),this.M.observe(n,this.Lr)}this.Ec||(this.Ec=is({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.yd(i.result)})),this.Ec.activate()}this.My(e)}static xr(e){var i,n;this.be=csArray.prototype.filter.call(this.be,a=>a!==e),this.be.length===0&&(this.be=[],this.G=!1,(i=this.M)===null||i===void 0||i.disconnect(),(n=this.Ec)===null||n===void 0||n.deactivate(),this.ks.clear())}constructor(e){this.w=e,this.w=$e("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return Ps(s.ks)}takeRecords(){var e,i;return(i=(e=s.M)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ns.isSupported()&&s.Dr(this.w)}disconnect(){ns.isSupported()&&s.xr(this.w)}}return s=r,r.be=[],r.ks=new Set,r.G=!1,r.Lr={childList:!0,subtree:!0},r.yd=t=>{s.ks.has(t)||(s.M.observe(t,s.Lr),s.ks.add(t),J(s.be,e=>e(t,"added")))},r.ky=t=>{Wt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.yd)},r.Dy=t=>{t.isConnected||Wt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.ks.has(e)&&(s.ks.delete(e),J(s.be,i=>i(e,"removed")))})},at([V()],r.prototype,"observe",null),at([V()],r.prototype,"disconnect",null),r})(),za=!0;function Tt(s,r=za){s.boundElement.addEventListener(s.type,s.listener,r)}function Rt(s,r=za){s.boundElement.removeEventListener(s.type,s.listener,r)}function kt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var vo=!1;function _t(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&vo||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&vo||e.call(this,i,n)}}}}function Ki(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],a=null,c=0,l,u=()=>{c=k.now(),a=null,l=s.apply(i,n),n=[],i=null},m=function(...d){if(i=this!==null&&this!==void 0?this:ot,n=[...d],e==="trailing")return a||(a=ot.csSetTimeout(u,t)),l;let y=k.now(),E=t-(y-c);return E<=0||E>t?(c=y,l=s.apply(i,n),a?(ot.csClearTimeout(a),a=null):n=[]):a||(a=ot.csSetTimeout(u,E)),l};return m.cancel=()=>{a&&(ot.csClearTimeout(a),c=0,a=null,n=[])},m.flushPending=()=>{a&&(ot.csClearTimeout(a),u())},m}var yn=s=>(r,t,e)=>{e.value=Ki(e.value,s)};function Td(s){return s.nodeType===1}function mt(s){let r=csEventtarget.apply(s);return r&&Td(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Rd(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Cd(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(mt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function Id(s){if(!z(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Pd=!!window.chrome,_o="data-cs-scroll-container";function Od(s){try{if(Pt(csEventtarget.apply(s)))return!0}catch{}return!1}var vs=(()=>{let s;return function(r){function t(i){return!!(Pt(i)&&Od(i)&&oi(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(_o)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${_o}]`)}r.getScrollContainer=e}(s||(s={})),s})();function Nd(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var ki=Nd(),W=(()=>{let s;return function(r){function t(l,u,m){var d;l instanceof Node?ki.set(l,u,m):((d=l.props)!==null&&d!==void 0||(l.props={}),l.props[u]=m)}r.setProperty=t;function e(l,u){var m;return l instanceof Node?ki.get(l,u):(m=l.props)===null||m===void 0?void 0:m[u]}r.getProperty=e;function i(l){return l instanceof Node?ki.getStore(l):l.props}r.getProperties=i;function n(l,u){let m=null;return a(l,(d,y,E)=>u(d)&&(m=d)&&!!E()),m}r.findDescendant=n;function a(l,u){c(l,void 0,u)}r.traverse=a;function c(l,u,m){let d=!1;if(m(l,u,()=>d=!0),d)return;let E=l.shadowRoot;E&&c(E,l,m);let S=l.children;if(S!=null&&S.length){for(let T of S)if(T&&(c(T,l,m),d))break}}}(s||(s={})),s})(),$a=1,Ws=csSymbol("nodeIdentifier");function Md(s=!1){s&&($a=1),Ws=csSymbol("nodeIdentifier")}function kd(s){return W.getProperty(s,Ws)}function et(s){let r=W.getProperty(s,Ws);return r!=null?r:(W.setProperty(s,Ws,$a++),W.getProperty(s,Ws))}var Er;function Ys(s){if(Er||(Er=document.createElement("div")),!(!!s&&z(s)))return ct.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Yt.call(Er,s),!0}catch{return ct.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function zr(s,r){if(Zn)return Zn.call(s,r);let t=s;do{if(Yt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var N=(()=>{let s;return function(r){let t;(function(b){b[b.NotMasked=0]="NotMasked",b[b.Parent=1]="Parent",b[b.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(b){return Zs(b)&&"Attributes"in b&&"PIISelectors"in b?b.Attributes instanceof Array&&b.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(b){if(!Zs(b)||b===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in b||(b.Attributes=[]),"PIISelectors"in b||(b.PIISelectors=[]),b}r.sanitizeSelectorUserInput=i;function n(b){var w;return(w=W.getProperty(b,r.maskedProp))!==null&&w!==void 0?w:{state:t.NotMasked}}r.getMaskedElementDetails=n;function a(b){var w;return(w=W.getProperty(b,r.maskedAttributeProp))!==null&&w!==void 0?w:{attributes:[]}}r.getMaskedAttributeDetails=a;function c(b){let w=W.getProperty(b,r.maskedProp);return(w==null?void 0:w.state)===t.Parent}r.isMaskedElement=c;function l(b){let w=W.getProperty(b,r.maskedProp);return(w==null?void 0:w.state)===t.Child}r.isMaskedElementChild=l;function u(b,w){let L=W.getProperty(b,r.maskedAttributeProp);return((L==null?void 0:L.attributes)==null?void 0:csArray.prototype.indexOf.call(L==null?void 0:L.attributes,w))>-1}r.isMaskedAttribute=u;function m(b,w){W.setProperty(b,r.maskedProp,w)}r.setMaskedElementProperty=m;function d(b){W.setProperty(b,r.maskedProp,void 0)}r.unsetMaskedElementProperty=d;function y(b,w){W.setProperty(b,r.maskedAttributeProp,w)}r.setMaskedAttributeProperty=y;function E(b,w){let L=csArray.prototype.filter.call(b.PIISelectors,U=>Ys(U));w.elementSelector.length>0&&csArray.prototype.push.call(L,...csString.prototype.split.call(w.elementSelector,","));let P=I([...L]),R={elementSelector:csArray.prototype.join.call(P,","),attrSelector:w.attrSelector,attrSelectors:w.attrSelectors};return csArray.prototype.forEach.call(b.Attributes,U=>{U!=null&&U.attrName&&(U!=null&&U.selector)&&Ys(U.selector)&&!S(R.attrSelectors,U)&&csArray.prototype.push.call(R.attrSelectors,U)}),R.attrSelector=T(R.attrSelectors),R}r.getComputedSelectorSettings=E;function S(b,w){return csArray.prototype.some.call(b,L=>L.selector===w.selector&&L.attrName===w.attrName)}function T(b){let w="";return csArray.prototype.forEach.call(b,L=>{let P=csString.prototype.split.call(L.selector,",");csArray.prototype.forEach.call(P,R=>{Ys(R)&&(w&&(w+=","),w+=R)})}),w}function I(b){if(b.length<=1)return b;let w=[];for(let L of b){let P=csString.prototype.split.call(L,",");for(let R of P)csArray.prototype.indexOf.call(w,R)===-1&&csArray.prototype.push.call(w,R)}return w}}(s||(s={})),s})(),M=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var Fs=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),_s=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),q=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),Dd=33,Ld=(()=>{class s{constructor(){this.eventType="user",this.Sc=[],this.Ly=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.xy=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Eo=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.vc=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Id(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.vc,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ce=new Os((e,i)=>{switch(i){case"initial":case"added":this.fi(e);break;case"removed":this.gi(e);break}})}init(){this.Vy(),this.Uy(),this._c()}onEvent(t){csArray.prototype.push.call(this.Sc,t)}te(t,e=!1){csArray.prototype.forEach.call(this.Sc,i=>i(t,e))}start(){this.wc(),this.fi(document),this.ce.observe()}stop(){this.gi(document),this.ce.disconnect(),this.Sc=[]}Uy(){this.jy()&&csArray.prototype.push.call(this.Eo,...this.Ly)}Vy(){this.Hy()&&csArray.prototype.push.call(this.Eo,...this.xy)}fi(t){Ui(t)?csArray.prototype.forEach.call(this.Eo,e=>Tt(e)):csArray.prototype.forEach.call(this.vc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Tt(i)})}gi(t){Ui(t)?csArray.prototype.forEach.call(this.Eo,e=>Rt(e)):csArray.prototype.forEach.call(this.vc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Rt(i)})}jy(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Hy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}wc(){this.By()}By(){let t=vs.getScrollContainer()||document,e=et(t),i=this.Ed(t);if(i.top!==0||i.left!==0){let n={type:M.SCROLL,args:[e,i.left,i.top],date:k.now()};this.te(n,!0)}}Ed(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(N.isMaskedElement(t)||N.isMaskedElementChild(t))return;let e=et(t),i=this.Ed(t),n={type:M.SCROLL,args:[e,i.left,i.top],date:k.now()};this.te(n)}mouseOverListener(t){if(N.isMaskedElementChild(t.target))return;let e=et(t.target),i={type:M.MOUSE_OVER,args:[e],date:k.now()};this.te(i)}clickListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLICK,args:[i],date:k.now()};this.te(n)}keyUpListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n=this.U[t.key];if(n===void 0)return;let a={type:M.KEY_UP,args:[i,n],date:k.now()};this.te(a)}keyDownListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n=this.U[t.key];if(n===void 0)return;let a={type:M.KEY_DOWN,args:[i,n],date:k.now()};this.te(a)}copyListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,_s.COPY],date:k.now()};this.te(n)}cutListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,_s.CUT],date:k.now()};this.te(n)}pasteListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,_s.PASTE],date:k.now()};this.te(n)}pointerUpListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.POINTER_UP,args:[t.pointerId,t.pointerType,kt(t.clientX,1),kt(t.clientY,1),i,t.button],date:k.now()};this.te(n)}pointerMoveListener(t){let e={type:M.POINTER_MOVE,args:[t.pointerId,t.pointerType,kt(t.clientX,1),kt(t.clientY,1)],date:k.now()};this.te(e)}pointerDownListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.POINTER_DOWN,args:[t.pointerId,t.pointerType,kt(t.clientX,1),kt(t.clientY,1),i,t.button,{pageX:kt(t.pageX,1),pageY:kt(t.pageY,1)}],date:k.now()};this.te(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_START,args:[n.identifier,kt(n.clientX,1),kt(n.clientY,1)],date:k.now()};this.te(a)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_MOVE,args:[n.identifier,kt(n.clientX,1),kt(n.clientY,1)],date:k.now()};this.te(a)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:t.type==="touchend"?M.TOUCH_END:M.TOUCH_CANCEL,args:[n.identifier,kt(n.clientX,1),kt(n.clientY,1)],date:k.now()};this.te(a)}}_c(){this.U={},this.U[" "]=q.SPACE,this.U.Spacebar=q.SPACE,this.U.Backspace=q.BACKSPACE,this.U.Enter=q.ENTER,this.U.Delete=q.DELETE,this.U.ArrowUp=q.ARROWUP,this.U.ArrowDown=q.ARROWDOWN,this.U.ArrowLeft=q.ARROWLEFT,this.U.ArrowRight=q.ARROWRIGHT,this.U.Up=q.ARROWUP,this.U.Down=q.ARROWDOWN,this.U.Left=q.ARROWLEFT,this.U.Right=q.ARROWRIGHT,this.U.CapsLock=q.CAPSLOCK,this.U.Shift=q.SHIFT,this.U.Tab=q.TAB,this.U.Escape=q.ESCAPE,this.U.Esc=q.ESCAPE,this.U.End=q.END,this.U.Alt=q.ALT,this.U.Control=q.CTRL,this.U.Meta=q.META}}return F([Ot("RecordingPageEvents.start")],s.prototype,"start",null),F([V("scroll")],s.prototype,"scrollListener",null),F([V("mouseOver"),_t(),Cd()],s.prototype,"mouseOverListener",null),F([V("click"),_t()],s.prototype,"clickListener",null),F([V("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([V("Event handler type: keydown")],s.prototype,"keyDownListener",null),F([V("Event handler type: copy")],s.prototype,"copyListener",null),F([V("Event handler type: cut")],s.prototype,"cutListener",null),F([V("Event handler type: paste")],s.prototype,"pasteListener",null),F([V("Event handler type: pointerup"),_t()],s.prototype,"pointerUpListener",null),F([V("Event handler type: pointermove"),_t(),yn({wait:Dd})],s.prototype,"pointerMoveListener",null),F([V("Event handler type: pointerdown"),_t()],s.prototype,"pointerDownListener",null),F([V("Event handler type: touchstart"),_t()],s.prototype,"touchStartListener",null),F([V("Event handler type: touchmove"),_t()],s.prototype,"touchMoveListener",null),F([V("Event handler type: touchend-cancel"),_t()],s.prototype,"touchEndCancelListener",null),s})(),xd=2,En=(()=>{class s{constructor(t){this.Fy=t,this.So=0}addString(t){this.So+=t.length*xd}addArrayBuffer(t){this.So+=t.byteLength}isThresholdReached(){return this.So>this.Fy}reset(){this.So=0}}return s})(),Vd=2*1e3*1024,Ud=200,jd=(()=>{class s{constructor(t=[],e=Vd){this.Lt=t,this.bc=new En(e)}addEvent(t){this.bc.addString(As(t)),csArray.prototype.push.call(this.Lt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Lt.length&&!(this.Lt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Lt,e,0,t)}eventsCount(){return this.Lt.length}clearEvents(){this.bc.reset(),this.Lt=[]}isFull(){return this.eventsCount()>=Ud}isThresholdReached(){return this.bc.isThresholdReached()}getEvents(){return this.Lt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Lt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Lt=i,e}stringifyEvents(){return As(this.Lt)}gC(t){t.type===M.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return F([Ot("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Hd=(()=>{class s{constructor(){this.vo=1}getCurrentIndex(){return this.vo}increment(){this.vo+=1}reset(){this.vo=1}getRequestParameters(){return{ri:`${this.vo}`}}}return s})(),Ga=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.zy}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.$y();if(i===null)return null;let{bubbles:n=!1,cancelable:a=!1,detail:c}=e;return i.initCustomEvent(t,n,a,c),i}static $y(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.zy="cs.tracking.",s})(),Lt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Di="null",xe=null,qa=[],Bd=()=>{var s;return ni||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!ni&&Bd()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],xe=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{$r({type:"UXA_EVENT",event:s.detail})}),xe.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Di)return;Di=s.data.sessionId,csArray.prototype.forEach.call(qa,r=>r()),xe==null||xe.postMessage({type:"CONNECTED",sessionId:Di})}}));function Fd(s){ni||(Di!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(qa,s)))}function $r(s){xe==null||xe.postMessage(s)}var Ji=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),ts=(()=>{class s extends Ji{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var wo=(()=>{class s extends Ji{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Sr=(()=>{class s extends Ji{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=k.elapsed();t(),this.count++,this.total+=k.elapsed()-e}asyncMeasure(){let t=k.elapsed();return()=>{this.count++,this.total+=k.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),ee={general:{category:"General",nbEvents:new ts("Nb of Events"),pendingTasks:new ts("Pending Tasks"),pendingEvents:new ts("Pending Tasks"),nbOfMutationObservers:new wo("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new Sr("Initial DOM"),pendingMutations:new ts("Nb of Mutations scheduled"),serializedMutations:new Sr("Serialized Mutations"),count:new ts("Mutation Count"),elementMutationObserved:new wo("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Sr("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new ts("Nb of Hidden Elements "),nbElements:new ts("Nb of  Elements")}},bo=null;Fd(()=>{let s=i=>Object.keys(i),r=csArray.prototype.map.call(s(ee),i=>ee[i]),t=csArray.prototype.map.call(r,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),n=>i[n]),n=>n instanceof Ji));$r({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(r,(i,n)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[n],a=>({name:a.name,format:a.format}))}))}),!bo&&(bo=csSetInterval(()=>{let i=Aa(je(t,n=>je(n,a=>a.getData())),n=>n);$r({type:"UXA_PERFORMANCE_COUNTER",event:i})},1e3))});function ge(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Bt(s){return ie(s,"data:")}function zd(s){return ie(s,"#")}function $d(s){return!!s&&(li(s,".css")||ie(s,"https://fonts.googleapis.com/css"))}function Sn(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Gd(r);return e?(li(t,",")||(e=qd(e)),[Ao(t),...Sn(e)]):[Ao(t)]}function Gd(s){return csString.prototype.split.call(s,/\s(.+)/)}function Ao(s){return csString.prototype.split.call(s,/,$/)[0]}function qd(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Wd=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Yd(s,r){return csString.prototype.replace.call(s,Wd,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],a=Kd((i||n).trim()),c=i?"@import ":"",l=r(a)||a;return`${c}url(${Xd(l)})`})}function Xd(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Xs(s){let r=new Set;return Yd(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Ps(r)}function Kd(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let a=parseInt(i,16);return 55296<=a&&a<=57343||a===0||a>1114111?"\uFFFD":csString.fromCodePoint(a)})}var To=new Map,vr=!ni&&document.implementation.createHTMLDocument("");function Wa(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Jd(s){if(!Gi(s))return null;let r=Ya(s);if(r===null||r.length===0)return null;let t="";if(mh(s.textContent))J(r,e=>t+=e.cssText);else{let e=Qd(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,a=0;n<r.length;n+=1,a+=1)i[a]=r[n];J(i,n=>t+=n.cssText)}return t}function Qd(s){if(!vr)return 0;let r=To.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,vr.head.appendChild(t);let e=Ya(t);return r=e?e.length:0,To.set(s.textContent,r),vr.head.removeChild(t),r}function Ya(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var $s=s=>s instanceof HTMLFormElement?"form":s.localName;var ls=(()=>{class s{constructor(t){this.csId=et(t),this.props=ki.getStore(t)}}return s})(),Xa=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),ws=(()=>{class s extends ls{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=1,this.localName=$s(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let a=Jd(t);if(a){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(a),l=new Xa(c);csArray.prototype.push.call(this.children,l)}Cs(t)&&W.setProperty(this,"SVG",!0),(Gi(t)||rn(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return Ve(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),vn=(()=>{class s{constructor(t){this.type="asyncEvent",this.Ac=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Ac)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ds=t,this.Ac=!0,this.w&&this.w(this.Ds)}complete(t){this.Ac&&t(this.Ds),this.w=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function Zd(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var Gr=csQueueMicrotask||csSetTimeout,bi=new Is,zs=new Is,Ro=1;function Ut(s,r="high"){let t=Ro;bi.isEmpty&&zs.isEmpty&&Ka(()=>{if(Ro!==t)return;let n=cs(()=>{for(;!zs.isEmpty;)zs.pop()();for(;!bi.isEmpty;)bi.pop()();zs.isEmpty||n()},"groupMicrotask.run");n()});let e=s.name||s.toString(),i=$e(`groupMicrotask:${r}:${e}`,s);r==="high"?zs.push(i):bi.push(i)}function Ka(s,r=10){Gr(r===0?s:()=>Ka(s,r-1))}async function Ja(s=1){for(let r=0;r<s;r++)await new Promise(t=>Ut(t))}var Qi=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return Ps(this.set)}get count(){return this.set.size}}return s})(),tp=(()=>{class s extends Qi{constructor(t="high"){super(),this.Gy=t}add(t){this.set.add(t),this.set.size===1&&Ut(()=>{this.set.clear()},this.Gy)}}return s})();function Zi(s,r=!1){let t=new Qi;return{push(e){t.count===0&&(r?Ut:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var de=csSymbol(),_n=(()=>{class s{constructor(t){var e,i,n,a,c,l,u,m,d,y,E,S,T;this.w=t,this.Tc=null,this.Rc=null,this.Cc=null,this.Ic=null,this.Pc=null,this.qy=Zi(I=>this.processUpdateRulesInATick(I)),this.Oc=null,this.Nc=null,this.Mc=null,this.w=I=>Ut(()=>t(I)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Tc=is({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:I,args:b})=>{this.processInsertRule(I,b)}})),typeof((a=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||a===void 0?void 0:a.deleteRule)=="function"&&(this.Rc=is({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:I,args:b})=>{this.processDeleteRule(I,b)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Cc=is({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:I})=>this.processUpdateRule(I)})),typeof((m=(u=window.CSSGroupingRule)===null||u===void 0?void 0:u.prototype)===null||m===void 0?void 0:m.deleteRule)=="function"&&(this.Ic=is({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:I})=>this.processUpdateRule(I)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Pc=zi(window.StyleSheet.prototype,"disabled",(I,b,w)=>{b!==w&&this.Wy(I,b)})),typeof((E=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||E===void 0?void 0:E.setProperty)=="function"&&(this.Oc=is({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:I})=>{let b=I.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),typeof((T=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||T===void 0?void 0:T.removeProperty)=="function"&&(this.Nc=is({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:I})=>{let b=I.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Mc=vd(window.CSSStyleRule.prototype,"style",I=>{this.processUpdateRule(I)}))}observe(){var t,e,i,n,a,c,l,u;(t=this.Tc)===null||t===void 0||t.activate(),(e=this.Rc)===null||e===void 0||e.activate(),(i=this.Cc)===null||i===void 0||i.activate(),(n=this.Ic)===null||n===void 0||n.activate(),(a=this.Pc)===null||a===void 0||a.activate(),(c=this.Oc)===null||c===void 0||c.activate(),(l=this.Nc)===null||l===void 0||l.activate(),(u=this.Mc)===null||u===void 0||u.activate()}disconnect(){var t,e,i,n,a,c,l,u;(t=this.Tc)===null||t===void 0||t.deactivate(),(e=this.Rc)===null||e===void 0||e.deactivate(),(i=this.Cc)===null||i===void 0||i.deactivate(),(n=this.Ic)===null||n===void 0||n.deactivate(),(a=this.Pc)===null||a===void 0||a.deactivate(),(c=this.Oc)===null||c===void 0||c.deactivate(),(l=this.Nc)===null||l===void 0||l.deactivate(),(u=this.Mc)===null||u===void 0||u.deactivate()}processInsertRule(t,[e,i]){if(t[de]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.w(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.qy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(ei(i.cssRules),e);if(n===-1)return;let a={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.w(a)}}processDeleteRule(t,[e]){if(t[de]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.w(i)}Wy(t,e){if(t[de]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.w(i)}}return at([V()],s.prototype,"observe",null),at([V()],s.prototype,"disconnect",null),at([V()],s.prototype,"processInsertRule",null),at([V()],s.prototype,"processUpdateRule",null),at([V()],s.prototype,"processUpdateRulesInATick",null),at([V()],s.prototype,"processDeleteRule",null),s})(),ep=(()=>{class s{constructor(t){this.Yy=1,this._o=new Set,this.kc=null,this.Dc=null,this.Lc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Xy=e=>{let i=e.sheet;if(this._o.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[de],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[de],index:e.index};this.w(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[de],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[de],disabled:e.disabled};this.w(n)}}},this.w=e=>Ut(async()=>{await Ja(2),t(e)}),this.ce=new Os(this.Lc),"adoptedStyleSheets"in Document.prototype&&(this.kc=zi(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Dc=zi(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Sd=new _n(this.Xy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ce.observe(),(t=this.kc)===null||t===void 0||t.activate(),(e=this.Dc)===null||e===void 0||e.activate(),this.Sd.observe()}disconnect(){var t,e;this._o.clear(),this.ce.disconnect(),(t=this.kc)===null||t===void 0||t.deactivate(),(e=this.Dc)===null||e===void 0||e.deactivate(),this.Sd.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Ky(e);let i=je(e,a=>a[de]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.w(n)}Ky(t){J(t,e=>{if(this._o.has(e))return;let i=this.Yy++;e[de]=i,this._o.add(e);let n=this.Jy(e),a={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.w(a)})}Jy(t){let e=[];try{e=je(t.cssRules,i=>i.cssText)}catch{}return e}}return at([V()],s.prototype,"observe",null),at([V()],s.prototype,"disconnect",null),at([V()],s.prototype,"setStyleSheets",null),s})(),sp=cs(op,"optimizeMutations"),ip=csSymbol.for("ignoreNextSerialization");function rp(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,a=new Map,c=new Set,l=new Set,u=new Map,m=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){m.delete(d),s.add(d)},isDetachedMove(d){return!!dt.findAncestor(d,y=>m.has(y),!0)},isAddedNode(d){let y=dt.findAncestor(d,E=>r.has(E)||l.has(E)||s.has(E),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!dt.findAncestor(d,y=>r.has(y)||l.has(y),!0)},markAsAddedNode(d){m.delete(d),l.delete(d),r.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!dt.findAncestor(d,y=>t.has(y),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,y){let E=y==="previous"?n:i;return d&&E.has(d)?E.get(d)||null:d},getSiblings(d){let y=d.addedNodes.length,E=this.getPlaceholder(d.previousSibling,"previous"),S=this.getPlaceholder(d.nextSibling,"next");if(y){let T=E,I=S,b=d.previousSibling!==E,w=d.nextSibling!==S;for(let L=0;L<y;L++){let P=d.addedNodes[L],R=d.addedNodes[y-L-1];this.isLatestNodeMutation(P,d)?(n.delete(P),d.previousSibling&&b&&(i.set(d.previousSibling,P),b=!1),T=P):n.set(P,T),this.isLatestNodeMutation(R,d)?(i.delete(R),d.nextSibling&&w&&(n.set(d.nextSibling,R),w=!1),I=R):i.set(R,I)}}else d.previousSibling&&d.previousSibling!==E&&i.set(d.previousSibling,S),d.nextSibling&&d.nextSibling!==S&&n.set(d.nextSibling,E);return{previousSibling:E,nextSibling:S}},setAttributeMutation(d,y){let E=a.get(d)||new Set;E.add(y),a.set(d,E)},isAttributeMutated(d,y){var E;return!!(!((E=a.get(d))===null||E===void 0)&&E.has(y))},setLatestNodeMutation(d,y){u.set(d,y)},isLatestNodeMutation(d,y){return u.get(d)===y},markAsFutureAddedNode(d){u.has(d)||m.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function np(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function op(s){let r=rp(),t=[];for(let e of s)e.type==="childList"&&np(e,r);for(let e of s)switch(e.type){case"attributes":cp(e,r,t);break;case"characterData":ap(e,r,t);break;case"childList":up(e,r,t);break}return t}function ap(s,r,t=[]){let e=s.target;return dt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!hp(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function cp(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return dt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var lp=30;function hp(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=k.now(),n=s[e];return n&&i<n?!0:(s[e]=i+lp,!1)}function up(s,r,t=[]){let e=dt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),a=r.getSiblings(s),c=a.nextSibling,l=a.previousSibling,u=null,m=()=>{if(u){let{childListType:E,movedNodes:S,...T}=u;csArray.prototype.push.call(t,E==="added"?T:{...T,movedNodes:S}),u=null}},d=E=>E===(u==null?void 0:u.childListType)?u:(m(),{childListType:E,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let E=0;E<s.addedNodes.length;E++){let S=s.addedNodes[E];r.isLatestNodeMutation(S,s)?(r.isMovedNode(S)?(u=d("moved"),csArray.prototype.push.call(u.movedNodes,S)):(r.markAsAddedNode(S),n||(u=d("added"),csArray.prototype.push.call(u.addedNodes,S))),l=S):dt.isConnected(S)?r.isMovedNode(S)||r.markAsPendingInsert(S):r.markAsUselessNode(S)}m()}let y=Ta(s.removedNodes,E=>{if(dt.isConnected(E)){if(!i&&!r.isPendingInsert(E)){if(r.isDetachedMove(E))return!0;r.markAsMovedNode(E),r.isMovedNodeIntoAddedNode(E)&&(E[ip]=!0)}return!1}return r.isUselessNode(E)?!1:(r.markAsRemovedNode(E),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var Co={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},We=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static xc(e){if(s.shadowRootFilters.length>0&&ti(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Co)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Ut(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,Co)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ns.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.xc(document),this.shadowRootObserver=new Os(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,J(this.shadowRootObserver.shadowRoots,n=>{this.xc(n)}))}static disconnect(e,i){var n,a;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(a=this.mutationObserver)===null||a===void 0||a.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.w=e,this.vd=i;let n=Zi(a=>e(a,this),!0);this.w=$e("DocumentMutationObserver:callback",a=>{J(a,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?tu(i,n):i!=null?i:n}observe(){s.observe(this.w,this.vd)}disconnect(){s.disconnect(this.w,this.vd)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{ee.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{J(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.xc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,at([V()],r.prototype,"observe",null),at([V()],r.prototype,"disconnect",null),r})(),dp=(()=>{class s{constructor(t){this.w=t,this.Qy=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.w({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.w({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.w=e=>Ut(()=>t(e)),this._d=new _n(e=>Ut(async()=>{await Ja(),this.Qy(e)})),"adoptedStyleSheets"in Document.prototype&&(this.wd=new ep(t))}observe(){var t;this.M=new We(e=>this.Zy(e),(e,i)=>{i==="added"&&this.tE(e)}),this.M.observe(),this._d.observe(),(t=this.wd)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.M)===null||t===void 0||t.disconnect(),this._d.disconnect(),(e=this.wd)===null||e===void 0||e.disconnect()}Zy(t){let e=sp(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){ct.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:ct.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:dt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.w(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.w(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let a={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.w(a)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let a={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:ei(t.addedNodes)};this.w(a)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let a={type:"nodesRemoved",target:t.target,nodes:je(t.removedNodes,c=>c)};this.w(a)}}tE(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.w(e)}}return at([V()],s.prototype,"processAttributeChanged",null),at([V()],s.prototype,"processCharacterDataChanged",null),at([V()],s.prototype,"processChildListChanged",null),s})(),pp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),fp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),gp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),mp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),yp=(()=>{class s extends ls{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Ep=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let a=e[n];i[n]=new s(a.name,a.value,a.namespaceURI),a.name==="href"&&rn(t)&&(i[n].value=Wa(t))}return i}}return s})(),Io={workTime:40,async:!0,initialDOM:!0};var Ks=csSymbol("InitialDom"),Po=csSymbol.for("ignoreNextSerialization");function Qa(s){return s[Po]?(delete s[Po],!0):!1}function Sp(s=Io){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Io.workTime);let n=$e("serialize:callback",y=>e(y)),a=new Is,c=(y,E)=>{y.hasChildNodes()&&a.push({node:y,serializedNode:E});let S=y instanceof Element&&csElementshadowRoot.apply(y);if(S){let T=E.shadowRoot=Js(S);s.async&&s.initialDOM&&W.setProperty(S,Ks,!0),c(S,T)}},l,u=!0,m=8,d=$e("work",()=>{var y;if(u)l=Js(t),s.async&&s.initialDOM&&W.setProperty(t,Ks,!0),c(t,l),u=!1;else if(a.isEmpty)return;let E=wp(100);for(;!a.isEmpty;){if(s.async&&E.elapsed()>=s.workTime){--m<=0&&csSetTimeout(d);return}let{node:S,serializedNode:T}=a.pop(),I=(y=T.children)!==null&&y!==void 0?y:[];if(Wi(S))continue;let b=0;for(let w=csNodefirstChild.apply(S);w;w=csNodenextSibling.apply(w)){if(Qa(w))continue;let L=Js(w);s.async&&s.initialDOM&&W.setProperty(w,Ks,!0),I[b++]=L,c(w,L)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let y=0;y<m;y++)csSetTimeout(d,1)}}function vp(s){let r=Js(s),t=r;if(Wi(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Qa(n)||(t.children[e++]=qr(n));let i=s.shadowRoot;return i&&(t.shadowRoot=qr(i)),r}var qr=cs(vp,"serializeSync");function Js(s){let r,t;switch(s.nodeType){case 1:t=r=new ws(s),r.attributes=bp(s);break;case 3:t=new Xa(s);break;case 4:t=new pp(s);break;case 8:t=new fp(s);break;case 10:t=new gp(s);break;case 9:t=new mp(s);break;case 11:t=new yp(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function _p(){Ks=csSymbol("InitialDom")}function wp(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=performance.now();return{started:t,elapsed(){return++r%s===0&&(t=performance.now()),t-this.started}}}function bp(s){return Wi(s)?[]:Ep.create(s)}var oe=(()=>{class s{constructor(){this.le=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:k.now(),t.timestamp==null&&(t.timestamp=k.now()),csArray.prototype.forEach.call(this.le,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.le=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.le,t),()=>{let e=csArray.prototype.indexOf.call(this.le,t);csArray.prototype.splice.call(this.le,e,1)}}}return s})(),Ap=Sp(),Tp=(()=>{class s extends oe{constructor(){super(...arguments),this.wo=!1}onStart(){this.wo=!0,this.w=Zd(this.eE,this),this.W=new dp(this.w),this.W.observe();let t=ee.mutations.initialDOM.asyncMeasure(),e=()=>{this.wo=!1,_p(),t()};this.produceEvent(new vn(i=>Ap(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.wo=!1,(t=this.w)===null||t===void 0||t.cancel(),(e=this.W)===null||e===void 0||e.disconnect()}Ht(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=et(e.target),i.targetProps=W.getProperties(e.target)),[e,i]}eE(t){if(!this.sE(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Ht(t.type,t);i.attribute=e.attribute,i.isSvg=Cs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=$s(e.target),i.linkRel=pa(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?$s(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Ht(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?$s(e.target.parentElement):null,i.parentProps=e.target.parentElement?W.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Ht(t.type,t);i.targetLocalName=nt(e.target)?$s(e.target):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.previousSibling=e.previousSibling?et(e.previousSibling):null,ee.mutations.serializedMutations.measure(()=>{i.nodes=je(e.nodes,qr)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Ht(t.type,t);i.previousSibling=e.previousSibling?et(e.previousSibling):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.nodesIds=je(e.nodes,et),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Ht(t.type,t);i.nodesIds=je(e.nodes,et),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Ht(t.type,t);i.shadowRoot=Js(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Ht(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Ht(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Ht(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Ht(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Ht(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Ht(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}bo(t){return this.wo&&!W.getProperty(t,Ks)}sE(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.bo(t.target)||N.isMaskedElement(t.target)||N.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.bo(e)||N.isMaskedElement(e)||N.isMaskedElementChild(e))}case"attributeChanged":return this.bo(t.target)||N.isMaskedElementChild(t.target)||N.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.bo(t.target)||N.isMaskedElementChild(t.target);default:return!1}}}return s})(),hi=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),Ns=(()=>{class s{constructor(){this.le=[]}start(){}stop(){this.le.length=0,this.le=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.le;csSetTimeout(()=>{let n=$e("Processor:processEvent",a=>this.processEvent(a))(t);n!=null&&csArray.prototype.forEach.call(e,a=>a(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.le,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.le,t),()=>{this.le=csArray.prototype.filter.call(this.le,e=>e!==t)}}emitEvent(t){Ut(()=>csArray.prototype.forEach.call(this.le,e=>e(t)))}}return s.pendingEvents=0,s})(),Oo=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.iE(t);if(!n)return null;let a=await s.bd(n),c=Bt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:a,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let a=await s.rE(t,n),c=He(t),l=a.get(c);if(!l)return null;let u={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return a.delete(c),a.size&&(u.nestedResources=[],a.forEach(m=>{m&&csArray.prototype.push.call(u.nestedResources,{hash:m.hash,data:m.data})})),u}static async bd(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Vr,e);return Hr(i)}static async iE(t){let e;if(!Bt(t))e=await(await window.fetch(t)).blob();else{let i=no(t);if(!i)return null;e=i}return e}static async rE(t,e){let i=new Map,n=He(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Bt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let E=await fetch(l.resourceAbsolutePath);l.data=await E.text()}l.nestedResources||(l.nestedResources=Xs(l.data));let d=!1,y=!1;for(let E of l.nestedResources){let S=Bt(E)?E:l.resourceAbsolutePath?Lu(E,l.resourceAbsolutePath):He(E),T=i.get(S);if(T!==void 0){if(T!==null){let b=s.nE(T,E);l.data=zt.stringReplaceAll(l.data,E,b)}continue}Ve(c,b=>b.resourceAbsolutePath===S)!==void 0||(d=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:E,resourceAbsolutePath:S}))}if(!d){let E=await s.oE(l.data);i.set(l.resourceAbsolutePath,{hash:E.hash,data:E.data})}}else{let d;if(!Bt(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let E=no(l.resourceAbsolutePath);if(!E){i.set(l.resourceAbsolutePath,null);continue}d=E}let y=await s.bd(d);i.set(l.resourceAbsolutePath,{hash:y,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static nE(t,e){let i=`cs://resources/${t.hash}`;return Bt(e)||(i+=`?${s.Vc}=${e}`),i}static async oE(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Vr,i);return{data:e,hash:Hr(n)}}}return s.Vr="SHA-256",s.Vc="original-resource-name",s})(),Wr=(()=>{class s extends Ns{constructor(){super(),this.Ao="cssrm://",this.he=0,this.fs=!1}isListening(t){return!s.isSupported()||!hi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.aE(t);break;case"attributeChanged":this.cE(t);break;case"characterDataChanged":this.lE(t);break}return t}disableOnlineAssets(){this.fs=!1}enableOnlineAssets(){this.fs=!0}isOnlineAssetsActivated(){return this.fs}aE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)W.traverse(i,(n,a)=>{if(n.nodeType===3&&a){this.hE(n,a.localName);return}if(!ws.isElement(n))return;let c=Ve(n.attributes,l=>l.name==="style");if(c&&(c.value=this.To(c.value)),this.uE(n)||this.dE(n,a)){let l=Ve(n.attributes,m=>m.name==="src");l&&l.value&&(l.value=this.Ad(l.value));let u=Ve(n.attributes,m=>m.name==="srcset");if(u){u.value=this.Td(u.value);return}}if(this.pE(n)&&this.fs){let l=Ve(n.attributes,u=>u.name==="href");if(!l||!l.value)return;this.he++,this.Bi(He(l.value),this.he,!0),this.fE(n,l,this.he)}})}fE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.Ao+i}hE(t,e){if(!t||e!=="style")return;let i=this.To(t.data);i!==null&&(t.data=i)}lE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.To(t.newValue);e!==null&&(t.newValue=e)}cE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.To(t.newValue);return}if(!e&&!i)return;let a=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!a&&!c||(e&&(t.newValue=this.Ad(t.newValue)),i&&(t.newValue=this.Td(t.newValue)))}Ad(t){return Bt(t)||this.fs?(this.he++,this.Bi(t,this.he,!1,k.now()),this.Ao+this.he):t}Td(t){if(!this.fs)return t;let e=t,i=Sn(t),n=k.now();for(let a of i)this.he++,this.Bi(He(a),this.he,!1,n),e=csString.prototype.replace.call(e,a,this.Ao+this.he);return e}To(t){let e=Xs(t),i=t,n=k.now();for(let a of e){let c=Bt(a);if(!(c||this.fs)||this.gE(a))continue;this.he++,i=csString.prototype.replace.call(i,a,this.Ao+this.he);let l=$d(a);c?this.Bi(a,this.he,!1,n):this.fs&&(l?this.Bi(a,this.he,!0,n):this.Bi(He(a),this.he,!1,n))}return i}Bi(t,e,i,n=k.now()){let a=i?Oo.toCSSStaticResourceEvent:Oo.toStaticResourceEvent,c=new vn(async l=>{try{let u=await a(t,e,n,this.fs);l(u||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(u){l({type:"warning",message:u})}});this.emitEvent(c)}uE(t){return t.localName==="img"}dE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}pE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Na()&&Ou()&&!!csArray.from}gE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return ge([Ot("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Ft=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Za=(()=>{class s{constructor(){this.L=!1,this.Ls=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ee(Ft.Hidden):this.ee(Ft.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ee(Ft.PagehideHidden):this.ee(Ft.PagehideVisible);case"blur":return this.ee(Ft.Blur);case"navigate":return this.mE(t)?this.ee(Ft.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.L||(this.L=!0,this.Uc(),this.yE(),this.EE(),co()&&this.SE())}stop(){this.L&&(this.L=!1,this.jc(),this.vE(),this._E(),co()&&this.wE())}onEvent(t){this.ee=t}SE(){window.navigation.addEventListener("navigate",this.Ls)}wE(){window.navigation.removeEventListener("navigate",this.Ls)}Uc(){document.addEventListener("visibilitychange",this.Ls)}jc(){document.removeEventListener("visibilitychange",this.Ls)}yE(){window.addEventListener("pagehide",this.Ls)}vE(){window.removeEventListener("pagehide",this.Ls)}EE(){window.addEventListener("blur",this.Ls)}_E(){window.removeEventListener("blur",this.Ls)}mE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),At=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),Rp=(()=>{class s{constructor(t,e,i=[]){this.Fi=t,this.Hc=e,this.bE=i,this.Ro=null,this.Tt=At.Active,this.Z=[]}reset(){this.Ro=null,this.Z=[],this.Tt=At.Active}disconnect(){this.Tt=At.Stopped}AE(){this.Hc(At.Paused),this.Tt=At.Paused,csSetTimeout(()=>{this.Tt===At.Paused&&this.Bc()},s.STOP_TIMEOUT)}TE(){this.Hc(At.Active),this.Tt=At.Active,J(this.Z,this.Fi),this.Z=[]}Bc(){this.Z=[],this.Hc(At.Stopped),this.Tt=At.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Ro=t.date,this.Tt!==At.Active)){this.TE(),this.Fi(t);return}if(this.RE(t)){this.Fi(t);return}switch(this.Tt){case At.Active:if(this.CE(t,e)){this.AE(),csArray.prototype.push.call(this.Z,t);return}this.Fi(t);break;case At.Paused:csArray.prototype.push.call(this.Z,t);break;case At.Stopped:break}}CE(t,e){return!e.isUserEvent&&this.Ro!==null&&t.date-this.Ro>s.INACTIVITY_TIMEOUT}RE(t){return csArray.prototype.indexOf.call(this.bE,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Cp=2e3,Ip=(()=>{class s extends Lt{constructor(t,e,i,n,a,c,l,u,m,d,y,E,S,T,I=[],b,w,L,P,R){super(),this.f=t,this.z=e,this.IE=i,this.He=n,this.Q=a,this.A=c,this.ue=l,this.mt=u,this.Me=m,this.it=d,this.B=y,this.Ot=E,this._t=S,this.ke=T,this.De=I,this.Rd=b,this.Bt=w,this.Ur=L,this.Ke=P,this.gs=R,this.xs=0,this.Vs=new Ga,this.zi={allowFromQuotaService:!0,allowFromSerialization:!0},this.Cd=Ki(()=>{this.z.eventsCount()>0&&this.Id()},Cp),this.ms=U=>this.processBrowserEvent(U),this.jr=U=>this.Nt(U),this.Pd=0,this.Co=0,this.Be=new Za,this.Fc=!1,this.Od=50*1024,this.mi=!1,this.Hr=!1,this.yi=[],this.Io=new Rp(U=>this.X(U),U=>{switch(U){case At.Active:this.PE();break;case At.Stopped:this.OE();break}},[M.RESOURCE_HASHES,M.TEXT_VISIBILITY,M.API_ERROR,M.JAVASCRIPT_ERROR]),this.Nd=U=>{this.Ot.removeBatchInProgress(`${U.params.sn}.${U.params.pn}.${U.params.ri}`)}}init(){this.zc(),this.B.onLoad(this.Nd),this.B.onError(this.Nd)}PE(){csArray.prototype.forEach.call(this.Rd,t=>t.start())}OE(){csArray.prototype.forEach.call(this.Rd,t=>t.stopForInactivity())}zc(){var t,e,i;this.ke.onEvent(this.ms,this.jr),(t=this.it)===null||t===void 0||t.onInputNodeToEncrypt(this.jr),(e=this.it)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.Md(n)}),(i=this.it)===null||i===void 0||i.onUserIdentifierToEncrypt(this.ms),this.Be.onEvent(n=>{if(csSetTimeout(()=>this.Ei("page-state",n)),n!==Ft.Visible){if(n===Ft.Blur)return this.kd();if(!this.Fc)return this.Fc=!0,csSetTimeout(()=>{this.Fc=!1}),n===Ft.Hidden?this.kd():this.NE()}})}isRecording(){return this.A.hasValidSession()&&this.isStarted}kd(){if(!this.canSendEvents())return;this.ke.flush(),this.Ot.saveBatchesInProgress(),J(this.De,a=>{var c,l;return J((l=(c=a.getPendingEvents)===null||c===void 0?void 0:c.call(a))!==null&&l!==void 0?l:[],u=>this.z.addEvent(u))});let t=this.z.getEvents();if(t.length===0)return;this.Ei("pending-events",this.ke.pendingEvents);let e=this.B.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.He.getCurrentIndex();e.ri=i.toString(),this._t.removeQueryParams(),this._t.setQueryParams(e),this.Co=t[t.length-1].date;let n=this.z.stringifyEvents();if(n.length>this.Od){let a=this.Dd();if(a.length>0){let c=As(a);this._t.send(c)||this.Ot.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.He.increment()}if(this.z.eventsCount()>0){e.ri=this.He.getCurrentIndex().toString();let c=this.z.stringifyEvents();this.Ot.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.He.increment()}}else this._t.send(n)||this.Ot.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:n}),this.He.increment();this._t.removeQueryParams(),this.z.clearEvents()}NE(){if(!this.canSendEvents())return;this.ke.flush();let t=this.B.getQueryParams();this.Ot.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this._t.removeQueryParams(),J(this.De,n=>{var a,c;return J((c=(a=n.getPendingEvents)===null||a===void 0?void 0:a.call(n))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this._t.setQueryParams(t),this._t.send(),this._t.removeQueryParams();return}this.Ei("pending-events",this.ke.pendingEvents),this.Co=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this._t.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.Od){let n=this.Dd();if(n.length>0){let a=As(n);this._t.send(a)||this.Ot.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:a})}else delete t.let,delete t.rst,delete t.ri,this._t.removeQueryParams(),this._t.setQueryParams(t),this._t.send(),this._t.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let a=this.He.getCurrentIndex();t.ri=a.toString();let c=this.z.stringifyEvents();this.Ot.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.He.increment()}}else this._t.send(i)||(this.Ot.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.He.increment());this._t.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.zi.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.zi.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.zi.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.zi.allowFromSerialization=!0}canSendEvents(){return this.zi.allowFromQuotaService&&this.zi.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ue&&this.Ke){(e=this.ue)===null||e===void 0||e.anonymize(t);let i=this.Ke.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:k.now(),type:"JSError"});i&&this.ms(i)}}onIframeCustomError(t){if(this.gs){let e=this.gs.translate({...t,timestamp:k.now(),type:"CustomError"});e&&this.ms(e)}}onIframeDetailedApiError(t){this.Ld(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.Q.isCurrentPageviewValid()&&this.Io.pushEvent(t,{isUserEvent:!1})}Nt(t){this.Q.refreshSession(),this.Q.isSessionValid()&&this.Io.pushEvent(t,{isUserEvent:!0})}X(t){ee.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.Cd(),this.xd(t)}xd(t){this.f.emitDebugEvents&&this.Vs.emit("recordingEvent",{...t,typeName:M[t.type]})}onStart(){var t;this.Ei("tag-version","15.115.0"),this.Ei("page-state",document.visibilityState),this.Io.reset(),this.Be.start(),this.initStates(),this.ke.start(),this.mt&&this.Me&&this.mt.subscribe(s.xt,e=>this.Ld(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Vs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.yi,e=>this.Vd(e)),this.yi=[],this.mi&&((t=this.Bt)===null||t===void 0||t.enableOnlineAssets(),this.mi=!1)}onStop(){var t;this.Be.stop(),this.mt&&this.mt.unsubscribe(s.xt),this.ke.stop(),this.Io.disconnect(),(t=this.Bt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.ke.flush(),this.Cd.cancel(),this.pushEvents(),this.B.removeQueryParams()}initStates(){this.Pd=k.now(),this.He.reset(),this.xs=0,this.B.setQueryParams(this.IE.getRequestParameters())}pushEvents(){J(this.De,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.Id():this.z.clearEvents())}Id(){if(!this.canSendEvents())return;let t=this.z.getEvents();this.Co=t[t.length-1].date;let e=this.He.getCurrentIndex();this.B.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.B.getQueryParams();this.Ot.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.B.getQueryParams(),t),this.B.send(t),this.He.increment(),this.z.clearEvents(),this.Ud&&this.Ud()}addInitialDom(t){this.z.addEventByTimestamp(t),this.xd(t)}Ld(t){if(this.Ur&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Ur.truncate(t),this.it){this.it.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Md(t)}Md(t){if(this.xs<s.ME){let e={type:M.API_ERROR,date:k.now(),args:[this.Me.anonymize(t)]};this.ms(e),this.xs=this.xs+1,rt.counters.networkRequests.count("collected")}}kE(t){t===Be.ETR_SESSION?this.B.setQueryParams({[s.DE]:s.jd}):t===Be.ETR_PAGE&&this.B.setQueryParams({[s.LE]:s.jd})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Ke)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:k.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.ms(i)}onCustomErrorEvent(t){var e;let i=(e=this.gs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:k.now(),message:t.message,attributes:t.attributes});i&&this.ms(i)}onPageEvent(t){this.Hd(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:k.now(),keyId:this.f.encryptionPublicKeyId};(e=this.it)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Vd({eventName:t,eventType:e}):csArray.prototype.push.call(this.yi,{eventName:t,eventType:e})}Vd(t){this.kE(t.eventType),this.Hd(t.eventName),this.pushEvents()}Hd(t){let e={type:M.PAGE_EVENT,date:k.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.xE)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:k.now(),type:M.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:k.now(),type:M.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.Ei("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Ei("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Hr=!0}getStaticResourceManagerStatus(){return this.Bt?{isStarted:this.f.useStaticResourceManager&&Wr.isSupported(),onlineAssets:{activated:this.Bt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Hr}}:null}resetOnlineAssetsOnPageview(){this.mi=!1,this.Hr=!1}updateOnlineAssetsOnPageview(){this.Bt&&this.Hr&&(this.mi=!0,this.Hr=!1)}onRecordingRequestSent(t){this.Ud=t}getRecordingStartTimestamp(){return this.Pd.toString()}getRecordingLastEventTimestamp(){return this.Co.toString()}onOptOut(){J(this.De,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Ei(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:k.now(),type:M.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}Dd(){return this.z.extractEvents(M.API_ERROR,M.JAVASCRIPT_ERROR,M.CUSTOM_ERROR,M.TEXT_VISIBILITY,M.POINTER_DOWN)}}return s.xt="RecordingService",s.xE=255,s.ME=20,s.LE="etrp",s.DE="etrs",s.jd="1",F([Ot("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Pp=(()=>{class s extends Lt{constructor(t,e,i){super(),this.Qt=t,this._t=e,this.B=i,this.$c=!1,this.Br={},this.VE=n=>{if(n.length!==0)for(let a of n){let{metadata:c,events:l}=a;this.UE(c.rt)&&this.B.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Br={}}onStop(){}recover(){this.Qt.recover(this.VE)}addBatchInProgress(t,e,i){this.Br[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Br[t]}blockSendingLastMessage(){this.$c=!1}allowSendingLastMessage(){this.$c=!0}sendLastMessageBeacon(){if(this.$c){let{ri:t,rst:e,let:i,...n}=this.B.getQueryParams();n.hlm="true",this._t.setQueryParams(n),this._t.send()}}UE(t){return!!t&&csString.prototype.indexOf.call(t,D.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Br),t=>{let{metadata:e,events:i}=this.Br[t];this.Qt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Qt.save(t)}}return F([V("RecordingRecovery")],s.prototype,"recover",null),s})(),ii=(()=>{class s{constructor(...t){this.Bd=t}addProvider(t){csArray.prototype.push.call(this.Bd,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Bd,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Op=(()=>{class s{constructor(t,e){this.Pt=t,this.N=e,this.Us=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.D=t}start(){this.fi(),this.triggerInitialEvents()}stop(){this.gi()}fi(){csArray.prototype.forEach.call(this.Us,t=>Tt(t))}gi(){csArray.prototype.forEach.call(this.Us,t=>Rt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:M.HASH_CHANGE,args:[this.N.anonymizePII(this.Pt.href)],date:k.now()};this.D(t)}visibilityChangeListener(){let t={type:M.VISIBILITY_CHANGE,args:[document.visibilityState],date:k.now()};this.D(t)}}return F([V("hashChange")],s.prototype,"hashChangeListener",null),F([V("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Np=(()=>{class s{constructor(){}onScannedAsset(t){this.Po=t}scanCssString(t){this.Gc(Xs(t))}scanElement(t,e){N.getMaskedElementDetails(t).state!==N.MaskedElementState.NotMasked||e&&N.isMaskedAttribute(t,e)||(Gi(t)?this.jE(t):rn(t)?this.HE(t,e):(this.BE(t,e),this.FE(t,e),this.zE(t,e)))}HE(t,e){var i;if((!e||e==="href")&&t.href){let a={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:Wa(t)};this.Po({type:"stylesheet",asset:a})}}jE(t){var e;let i=new Set;if(t.textContent)for(let a of Xs(t.textContent))i.add(a);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(a){a.name==="SecurityError"||a.name==="InvalidAccessError"||j.error(a.message)}if(n)for(let a=0;a<n.length;a++){let c=n.item(a).cssText;for(let l of Xs(c))i.add(l)}this.Gc(Ps(i))}qc(t){return!this.$E(t)&&!Bt(t)&&!zd(t)}BE(t,e){if(Sh(t)||Eh(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.qc(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Po({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.GE(t.srcset)}}FE(t,e){if(t.nodeType!==1){ct.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}GE(t){this.Gc(Sn(t))}zE(t,e){if((bh(t)||Ah(t)||Th(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.qc(i)){let n={assetId:He(i),assetRawPath:i,assetBasePath:window.location.href};this.Po({type:"asset",asset:n})}}}Gc(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.qc(e)),e=>({rawUrl:e,absoluteUrl:He(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Po({type:"asset",asset:i})})}$E(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Mp=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.js=[],this.Z=[],this.qE=t}next(t){this.Z.length===this.qE&&csArray.prototype.shift.call(this.Z),csArray.prototype.push.call(this.Z,t),this.Z.length===1&&csSetTimeout(()=>this.clear());for(let e of this.js)e(t)}subscribe(t){if(Ve(this.js,i=>t===i))return()=>{this.js=csArray.prototype.filter.call(this.js,i=>i!==t)};csArray.prototype.push.call(this.js,t);for(let i of this.Z)t(i);return()=>{this.js=csArray.prototype.filter.call(this.js,i=>i!==t)}}clear(){this.Z=[]}hasObservers(){return this.js.length>0}}return s})(),tc=(()=>{var s;class r{constructor(e){this.w=e}observe(){this.WE=s.Fr.subscribe(e=>this.w(e)),s.Oo||(s.Oo=!0,s.zr.observe(),Wt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.ys.add(i),s.Fr.next(i)}))}disconnect(){s.Oo&&(this.WE(),s.Fr.hasObservers()||(s.Oo=!1,s.zr.disconnect(),s.Fr.clear(),s.ys.clear()))}}return s=r,r.ys=new Qi,r.Fr=new Mp,r.YE=cs(t=>{Ut(()=>{for(let e of t)e.type==="childList"&&J(e.addedNodes,i=>{Wt(i,NodeFilter.SHOW_ELEMENT).visitAll(a=>{s.ys.has(a)||(s.ys.add(a),s.Fr.next(a))})})})},"ElementObserver.findAllElements"),r.Oo=!1,r.zr=new We(s.YE),at([V()],r.prototype,"observe",null),at([V()],r.prototype,"disconnect",null),r})(),kp=1,Dp=0,ec=(()=>{class s{constructor(t,e=kp,i=Dp){this.XE=t,this.KE=e,this.JE=i,this.Fe=new Is,this.je=!1,this.Wc=0,this.Fd=()=>{for(this.Wc=0;this.Fe.length;){if(this.Wc>=this.KE){csSetTimeout(this.Fd,this.JE);return}let n=k.elapsed(),a=this.Fe.pop();if(!a)break;this.runTask(a);let c=k.elapsed()-n;this.Wc+=c}this.je=!1}}schedule(t,e=!1){if(!this.XE||e){t();return}ee.general.pendingTasks.increase(),this.Fe.push(t),this.QE()}QE(){this.je||(this.je=!0,csSetTimeout(()=>{this.Fd()}))}runTask(t){ee.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Fe.forEach(t=>{this.runTask(t)}),this.Fe.clear()}clearQueue(){ee.general.pendingTasks.clear(),ee.mutations.pendingMutations.clear(),this.Fe.clear()}isEmpty(){return this.Fe.length===0}}return F([V("TaskScheduler"),Ot("runTask")],s.prototype,"runTask",null),F([Ot("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Lp=(()=>{class s{constructor(){this.G=!1,this.zd=new _n(t=>t.type==="cssRuleInserted"&&this.ZE(t)),this.tS=Zi(t=>{this.G&&t.length>0&&this.O.schedule(()=>J(t,e=>this.$r.scanElement(e)))}),this.eS=({type:t,asset:e})=>{var i,n,a;t==="stylesheet"&&((i=this.sS)===null||i===void 0||i.call(this,e)),(n=this.iS)===null||n===void 0||n.call(this,e);let c={date:k.now(),type:M.STATIC_RESOURCE_URL,args:[e.assetId]};(a=this.D)===null||a===void 0||a.call(this,c)},this.O=new ec(!0,30,0),this.Gr=new tc(t=>this.rS(t)),this.M=new We(t=>this.Mo(t)),this.$r=new Np,this.$r.onScannedAsset(this.eS)}onEvent(t){this.D=t}onAsset(t){this.iS=t}onStyleSheetFound(t){this.sS=t}start(){this.G||(this.G=!0,this.zd.observe(),this.Gr.observe(),this.M.observe())}stop(){this.G&&(this.zd.disconnect(),this.Gr.disconnect(),this.M.disconnect(),this.G=!1)}ZE(t){!t.rule||!this.G||this.$r.scanCssString(t.rule)}rS(t){this.G&&N.getMaskedElementDetails(t).state===N.MaskedElementState.NotMasked&&this.tS.push(t)}Mo(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.$r.scanElement(e.target,e.attributeName);break;case"characterData":this.nS(e.target);break;case"childList":}})}nS(t){Vi(t)&&csNodeparentNode.apply(t)&&Gi(csNodeparentNode.apply(t))&&this.$r.scanCssString(t.data)}}return s})(),sc=(()=>{class s{constructor(t){this.$d=[],this.Gd=[],this.Kt={},this.Jt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]}):this.Kt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.$d,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Gd,t)}send(t){let e=si.toQuery({...this.Kt,ct:Xi.UNCOMPRESSED}),i=this.oS(e,t);return i?csArray.prototype.forEach.call(this.$d,n=>n()):csArray.prototype.forEach.call(this.Gd,n=>n(this.Kt)),i}oS(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Jt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Jt}?${t}`,e||"")}}return s})(),xp=(()=>{class s{constructor(t){this.ko={},this.Ae=new En(t)}save({key:t,metadata:e,events:i}){this.Ae.isThresholdReached()||(this.Ae.addString(t),typeof i=="string"?this.Ae.addString(i):this.Ae.addArrayBuffer(i),!this.Ae.isThresholdReached()&&(this.ko[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.aS(),i=>{let n=this.ko[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.cS(i))}),e.length!==0&&(t(e),this.Ae.reset())}aS(){return Object.keys(this.ko)}cS(t){delete this.ko[t]}}return s})(),Pe=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Vp=(()=>{class s{constructor(t,e,i){this.$i=t,this.lS=i,this.Si=Pe.NOT_STARTED,this.Do=[],this.Yc=0,this.hS=self.origin,this.Te=typeof window=="object"?"":"worker-",this.Ae=new En(e),this.Xc()}async Xc(){await this.qd(),this.Si===Pe.READY?this.uS():this.lS(this.Do)}uS(){csArray.prototype.forEach.call(this.Do,t=>{this.save(t)}),this.Do=[]}async save(t){try{if(this.Si===Pe.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Do,t);return}if(this.Si!==Pe.READY||this.Ae.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ae.addString(e),typeof n=="string"?this.Ae.addString(n):this.Ae.addArrayBuffer(n),this.Ae.isThresholdReached())return;await this.se.put(`${this.hS}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.se&&(await this.qd(),this.Si!==Pe.READY)||this.dS(t)}async qd(){try{this.Si=Pe.OPEN_IN_PROGRESS,this.se=await self.caches.open(`${this.Te}${this.$i}`),this.Si=Pe.READY}catch{this.Si=Pe.OPEN_FAILED}}async dS(t){try{if(this.Yc++,this.Yc>1)return;let e=await this.se.keys();if(e.length===0)return;let i=await this.se.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((m,d)=>{l[d]=m}),delete l["content-type"];let u=l.datatype;return delete l.datatype,u==="json"||u==="base64"?c.text().then(m=>({metadata:l,events:m})):c.arrayBuffer().then(m=>({metadata:l,events:m}))}),a=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.se.delete(c))),t(a),this.Ae.reset()}catch{}finally{this.Yc--}}}return s})(),Up=(()=>{class s{constructor(t){try{this.pS(t)}catch{this.Kc()}}pS(t){self.caches?this.fS(t):this.Kc()}save(t){this.Lo.save(t)}recover(t){this.Lo.recover(t)}fS(t){this.Lo=new Vp(t,s.Wd,e=>{this.Kc(e)})}Kc(t){this.Lo=new xp(s.Wd),t&&csArray.prototype.forEach.call(t,e=>{this.Lo.save(e)})}}return s.Wd=1024*1024*16,s})(),_r=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var jp=(()=>{class s extends Ns{isListening(t){return hi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof ws){let c=N.getMaskedAttributeDetails(n);n.attributes=this.Vo(n,c)}if(N.getMaskedElementDetails(n).state===N.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}W.traverse(n,c=>{if(c instanceof ws){let l=N.getMaskedAttributeDetails(c);c.attributes=this.Vo(c,l);let u=N.getMaskedElementDetails(c);u.state===N.MaskedElementState.Parent&&(this.Qc(c,u),e++)}})}return e>0&&rt.counters.sensitiveElements.count("masked-elements",e),t}Vo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Qc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),ws.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return ge([Ot("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),pe=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return W.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Hp=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Bp="\uFF41",Fp=/[^\s]/g,zp="a";function wr(s){let r=csString.prototype.replace.call(s,Hp,Bp);return csString.prototype.replace.call(r,Fp,zp)}var $p=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],ic=s=>{let r=new Set($p);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Gp=["svg","slot"],qp=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Gp,s)>-1,rc={href:new Set(["a"]),src:new Set(["iframe"])},Wp=s=>rc.hasOwnProperty(s),Yp=(s,r,t)=>{var e;return((e=rc[r])===null||e===void 0?void 0:e.has(s))&&!Bt(t)},Xp=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value",Kp=(()=>{class s{constructor(t,e,i,n=null){this.Je=t,this.wS=e,this.N=i,this.Uo=n,this.bS=ic(this.wS)}sanitize(t,e){return W.traverse(t,(i,n)=>{if(i.anonymized=this.Je,i.nodeType===3){let{anonymizedValue:a,withAnonymization:c}=this.getAnonymizedValue(i.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?W.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=c,i.data=a;return}if(ws.isElement(i))return this.AS(i);if(i.nodeType===4){i.data=this.Je?wr(i.data):this.N.checkAndAnonymizePII(i.data,this.Uo);return}}),t}setAnonymization(t){this.Je=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[pe.ANONYMIZED_TEXT_STATUS_PROP])===pe.WHITELISTED_STATUS;return this.Je&&!n?{anonymizedValue:wr(t),withAnonymization:!0}:{anonymizedValue:this.N.checkAndAnonymizePII(t,this.Uo),withAnonymization:!1}}AS(t){if(W.getProperty(t,"SVG"))return;let e=Ve(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Je,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){return this.TS(t,e,n)?i:Wp(e)?Yp(t,e,i)?this.N.anonymizePII(i):i:this.Je&&Xp(t,e,n)?wr(i):this.Je?"":this.N.checkAndAnonymizePII(i,null)}TS(t,e,i){return qp(t,e,i)||this.bS.has(e)}}return s})();var Jp=()=>(s,r,t)=>{t.value=Zp(t.value)},Qp=csQueueMicrotask||csSetTimeout;function Zp(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let a=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,a[r])return;a[r]=!0,Qp(()=>{a[r]=!1,s.apply(a,t)})};return i.oncePerTickSymbol=r,i}Jp.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var tf=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return W.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),De=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return W.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){W.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){W.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var No=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),ef=(()=>{class s extends Ns{constructor(t,e,i,n=null){super(),this.N=i,this.Uo=n,this.Fo=new Kp(t,e,i,n)}setAnonymization(t){this.Fo.setAnonymization(t)}isListening(t){return No.isTextVisibilityEvent(t)||hi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(No.isTextVisibilityEvent(t))return t.text=this.N.checkAndAnonymizePII(t.text,this.Uo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.rl(t);break;case"attributeChanged":this.NS(t);break;case"characterDataChanged":this.MS(t);break}return t}rl(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Fo.sanitize(n,i)}NS(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Fo.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}MS(t){t.newValue=this.Fo.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return ge([Ot("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var sf=(()=>{class s extends Ns{constructor(t){super(),this.tt=t}isListening(t){return hi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI)),t}}return ge([Ot("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),br="textarea",rf=(()=>{class s extends Ns{isListening(t){return hi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.DS(t);break;case"nodesAdded":this.LS(t);break;case"characterDataChanged":this.xS(t);break}return t}DS(t){W.traverse(t.initialDOM,(e,i)=>{(this.tp(e,i)||this.ep(e))&&(e.data=this.nl(e.data))})}LS(t){for(let e of t.nodes)W.traverse(e,(i,n)=>{(this.VS(i,n,t)||this.ep(i))&&(i.data=this.nl(i.data))})}xS(t){var e;(t.parentLocalName===br||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.nl(t.newValue))}nl(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}VS(t,e,i){return this.US(t,i)||this.tp(t,e)}US(t,e){return t.nodeType===3&&e.targetLocalName===br}tp(t,e){return t.nodeType===3&&Z(e)&&e.localName===br}ep(t){return t.nodeType===3&&De.isEditableNode(t)}}return ge([Ot("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),nf=(()=>{class s{constructor(t){this.w=t,this.Ft={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.w=t}observe(){Tt(this.Ft),this.wc()}wc(){this.resizeListener()}disconnect(){Rt(this.Ft)}resizeListener(){let t={width:gt.windowWidth(),height:gt.windowHeight()};this.w(t)}}return at([V("resize")],s.prototype,"resizeListener",null),s})(),Me=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Ai=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Ti=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),of=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=ot.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in ot;function e(){return Me.LANDSCAPE}function i(){var c;switch((c=ot.screen.orientation)===null||c===void 0?void 0:c.type){case Ai.PORTRAIT_PRIMARY:case Ai.PORTRAIT_SECONDARY:return Me.PORTRAIT;case Ai.LANDSCAPE_PRIMARY:case Ai.LANDSCAPE_SECONDARY:return Me.LANDSCAPE;default:return Me.PORTRAIT}}function n(){switch(window.orientation){case Ti.PORTRAIT:case Ti.PORTRAIT_REVERSE:return Me.PORTRAIT;case Ti.LANDSCAPE:case Ti.LANDSCAPE_REVERSE:return Me.LANDSCAPE;default:return Me.PORTRAIT}}function a(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=a}(s||(s={})),s})(),af=(()=>{class s extends oe{constructor(){super(...arguments),this.ol=null,this.al=null,this.Fs=new nf(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=of.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.jS(t);if(e!==this.ol||i!==this.al){this.ol=e,this.al=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}jS(t){let e,i,n=gt.screenWidth(),a=gt.screenHeight();return t===Me.PORTRAIT?(e=n,i=a):(e=Math.max(n,a),i=Math.min(n,a)),{screenWidth:e,screenHeight:i}}onStart(){this.Fs.observe()}onStop(){this.ol=null,this.al=null,this.Fs.disconnect()}}return s})();function cf(s){let r=csEventtarget.apply(s);return r&&nt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Rs=(()=>{class s{get selectors(){return this.$e===""?null:this.$e}constructor(t,e={closest:!1}){this.w=t,this.wt=e,this.$e="",this.Kr=new Qi,this.Mo=cs(i=>{if(this.$e==="")return;let n=[];for(let a of Aa(i,c=>c.addedNodes)){if(!(Ch(a)||this.wt.closest&&Vi(a)))continue;let c=this.wt.closest?this.HS(a,this.$e):this.findMatchingElements(a,this.$e);so(c,n)}n.length&&this.w(n,"added")},"SelectorObserver.processMutations"),this.BS=(i,n)=>{if(this.$e===""||n!=="added")return;let a=this.findMatchingElements(i,this.$e);a.length&&this.w(a,"added")},this.W=new We(this.Mo,this.BS)}observe(t){this.$e===""?this.W.observe():this.$e+=",",this.$e+=t;let e=this.findMatchingElements(document,t);for(let i of this.W.shadowRoots){let n=this.findMatchingElements(i,t);so(n,e)}e.length&&(J(e,i=>{this.Kr.add(i)}),this.w(e,"initial"))}processPendingMutations(){this.Mo(this.W.takeRecords())}disconnect(){this.W.disconnect(),this.Kr.clear(),this.$e=""}HS(t,e){let i=[];if(Vi(t)){if(t.parentElement){let n=zr(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Kr.has(n)===!1)}else{if(oi(t)){let n=zr(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,a=>this.Kr.has(a)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=ei(window.csquerySelectorAll[t.nodeType].call(t,e));return nt(t)&&Yt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Kr.has(n)===!1)}}return at([V()],s.prototype,"observe",null),at([V()],s.prototype,"disconnect",null),at([Ot("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),lf=(()=>{class s extends oe{constructor(){super(),this.sp=t=>{let e=cf(t);e&&this.cl(e,t.type)},this.ce=new Os((t,e)=>{switch(e){case"initial":case"added":this.ip(t);break;case"removed":this.rp(t);break}}),this.F=new Rs((t,e)=>{(e==="initial"||e==="added")&&this.FS(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&dt.isConnected(t)&&!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.ip(document),this.ce.observe(),this.F.observe("video")}onStop(){this.rp(document),this.ce.disconnect(),this.F.disconnect()}cl(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=et(t),a={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(a.newTimePositionInSec=t.currentTime),Gr(()=>this.produceEvent(a))}}FS(t){for(let e of t)this.cl(e,"seeked"),s.isPlaying(e)&&this.cl(e,"play")}ip(t){for(let e of["play","pause","seeked"])Tt({type:e,listener:this.sp,boundElement:t})}rp(t){for(let e of["play","pause","seeked"])Rt({type:e,listener:this.sp,boundElement:t})}}return s})();function hf(s){return s.nodeName==="SELECT"}function wn(s){return s.nodeName==="INPUT"}function uf(s){return s.nodeName==="TEXTAREA"||wn(s)&&!nc(s)&&!oc(s)}function nc(s){return wn(s)&&s.type==="number"}function oc(s){return wn(s)&&(s.type==="checkbox"||s.type==="radio")}var df=(()=>{class s extends oe{constructor(t){super(),this.it=t,this.ll=new tp("low"),this.Gi=e=>this.inputHandler(e),this.vi=[],this.zS(),this.$S(),this.F=new Rs(e=>{for(let i of e)this.ul(i)&&Ut(()=>{this.dl(i,et(i))},"low")}),this.ce=new Os((e,i)=>{switch(i){case"initial":case"added":Tt({type:"change",listener:this.Gi,boundElement:e});break;case"removed":Rt({type:"change",boundElement:e,listener:this.Gi});break}})}onStart(){Tt({type:"keyup",boundElement:document,listener:this.Gi}),Tt({type:"change",boundElement:document,listener:this.Gi}),J(this.vi,t=>t.activate()),this.F.observe(csArray.prototype.join.call(s.GS,",")),this.ce.observe()}onStop(){Rt({type:"keyup",boundElement:document,listener:this.Gi}),Rt({type:"change",boundElement:document,listener:this.Gi}),J(this.vi,t=>t.deactivate()),this.F.disconnect(),this.ce.disconnect(),this.ll.clear()}dl(t,e){var i,n,a;if(this.ll.has(t))return;if(this.ll.add(t),hf(t)){let u={type:"InputEvent",inputType:"select",target:et(t),selectedIndex:t.selectedIndex,timestamp:k.now()};this.produceEvent(u);return}if(oc(t)){let u={type:"InputEvent",inputType:"checkable",target:et(t),checked:t.checked,timestamp:k.now()};this.produceEvent(u);return}let c=uf(t),l=nc(t);if(c||l){let u=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.it)===null||n===void 0)&&n.shouldEncrypt(t)){(a=this.it)===null||a===void 0||a.registerInputNodeToEncrypt({targetId:e,targetValue:u,date:k.now()});return}let m=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:et(t),value:csString.prototype.replace.call(u,/\S/g,m),timestamp:k.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=mt(t),i=et(e);!i||!this.ul(e)||dt.isConnected(e)&&Ut(()=>{this.dl(e,i)},"low")}zS(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}$S(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=zi(t.prototype,e,(a,c,l)=>{if(l!==c&&dt.isConnected(a)){let u=i?a.parentElement:a;this.qS(u)}});n&&csArray.prototype.push.call(this.vi,n)}ul(t){return!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)&&(qi(t)||on(t)||nn(t))}qS(t){if(this.isStarted&&dt.isConnected(t)){let e=et(t);e&&this.ul(t)&&Ut(()=>{this.dl(t,e)},"low")}}}return s.GS=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],ge([_t()],s.prototype,"inputHandler",null),ge([V()],s.prototype,"trackChanges",null),s})();var pf=(()=>{class s extends oe{constructor(){super(),this.Es=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.WS=$e("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)N.isMaskedElement(i)||N.isMaskedElementChild(i)||Ph(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Zi(this.WS);this.Gr=new tc(e=>t.push(e)),this.Bs=new Set}onStart(){this.Es&&this.Gr.observe()}onStop(){this.Bs.clear(),this.Gr.disconnect()}async register(t){this.Bs.has(t)||(this.Bs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return ge([V()],s.prototype,"register",null),s})(),Mo=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static np(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.YS(t))}static YS(t){let i=t.getEntriesByType("navigation")[0];i&&(this._i=i,s.qi(i))}static Dr(t){this.XS(t),this._i&&t(this._i),this.Le||this.KS()}static XS(t){this.Mt.add(t)}static JS(t){this.Mt.delete(t)}static KS(){if(this.Jr||(this.Jr=this.np()),!this.Jr){this._i||(this._i={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.qi(this._i);return}this.Jr.observe({type:"navigation",buffered:!0}),this.Le=!0}static qi(t){this.Mt.forEach(e=>e(t))}static xr(t){this.JS(t),this.Mt.size===0&&this.Wr()}static Wr(){var t;this.Le&&((t=this.Jr)===null||t===void 0||t.disconnect(),this.Le=!1,this._i=null,this.Jr=this.np())}constructor(t){this.w=t}observe(){s.Dr(this.w)}disconnect(){s.xr(this.w)}}return s.Le=!1,s.Mt=new Set,s._i=null,s})(),ff=(()=>{class s extends oe{constructor(){super(...arguments),this.zo=null,this.op=new Mo(t=>{if(this.zo)return;let e=this.QS(t);e&&(this.zo=e,this.produceEvent(e))})}onStart(){if(this.zo){this.produceEvent(this.zo);return}this.op.observe()}onStop(){this.op.disconnect()}QS(t){let e=Mo.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:k.now()}}}return s})(),yt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Ri=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),gf=(()=>{class s{compute(t,e){let i=this.zs(e.x)-this.zs(t.x),n=this.zs(e.y)-this.zs(t.y),a=e.time-t.time;return{duration:a,distance:this.ap(i,n),direction:this.ZS(i,n),velocity:this.sv(i,n,a)}}computePinchMetrics(t,e){let i=this.zs(e.x)-this.zs(t.x),n=this.zs(e.y)-this.zs(t.y);return{duration:e.time-t.time,distance:this.ap(i,n)}}getScale(t,e){return Math.abs(e/t-1)}zs(t){return t/window.devicePixelRatio}ap(t,e){return Math.round(Math.sqrt(t*t+e*e))}sv(t,e,i){let n=i/1e3,a=t/n,c=e/n;return Math.round(Math.abs(a)+Math.abs(c))}ZS(t,e){return Math.abs(t)>Math.abs(e)?t>0?Ri.RIGHT:Ri.LEFT:e>0?Ri.DOWN:Ri.UP}}return s})(),ac=typeof performance!="undefined"&&!!performance.now,ko=ac?()=>performance.now():csDate.now,mf=(()=>{var s;return ac?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Ci={now(){return Math.round(ko()+mf)},elapsed(){return ko()}};function Do(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var yf=1e3,Ef=100,Sf=.1,Yr=(()=>{class s{constructor(){this.zt={},this.pl=()=>{},this.$o=new gf,this.Re()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.pl=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.iv(t))return;this.rv(t)&&this.Re();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Ci.now()};if(t.touches.length===1)this.zt.startPinchTime=e.time,this.zt.firstTouch=e;else if(t.touches.length===2&&(this.zt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Ci.now()},this.zt.firstTouch&&this.zt.secondTouch)){let i=this.$o.computePinchMetrics(this.zt.firstTouch,this.zt.secondTouch);this.Wi=i.distance}csArray.prototype.push.call(this.Qr,e),this.Go=mt(t)}processActionMove(){this.gl=!0}processActionUp(t){if(this.nv(t)){if(csArray.prototype.push.call(this.Qr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Ci.now()}),this.ov(t)&&this.zt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.zt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Ci.now()};this.zt.firstTouch&&(this.zt.firstTouch=e,this.zt.secondTouch=i),this.av(t)}this.Wi||this.cv()&&this.lv(t)}}Re(){this.Qr=[],this.Go=null,this.gl=!1,this.Wi=null,this.Zr=!0}lv(t){let e=this.$o.compute(this.Qr[0],this.Qr[1]);this.Zr=t.isTrusted;let i=this.gl?this.hv(e):this.uv(e);if(this.pv(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Do(n.pageX,1),i.pageY=Do(n.pageY,1)}this.pl(i,t)}av(t){if(!(this.zt.firstTouch&&this.zt.secondTouch))return;let e=this.$o.computePinchMetrics(this.zt.firstTouch,this.zt.secondTouch);this.Zr=t.isTrusted;let i=this.fv(e);i&&this.pl(i,t)}fv(t){return!this.Wi||this.$o.getScale(this.Wi,t.distance)<Sf?void 0:{type:this.Wi>t.distance?yt.PINCH_IN:yt.PINCH_OUT,target:this.Go,distance:t.distance,isTrusted:this.Zr}}hv(t){return{type:t.velocity<Ef?yt.DRAG:yt.FLICK,target:this.Go,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Zr}}uv(t){return{type:t.duration<yf?yt.TAP:yt.LONG_PRESS,target:this.Go,isTrusted:this.Zr}}pv(t,e){return t===yt.TAP&&e&&e.length===1}rv(t){return t.touches.length===1}cv(){return this.Qr.length===2}iv(t){return t.touches.length>0}nv(t){return t.changedTouches.length>0}ov(t){return this.gl&&!!this.Wi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),vf="touchstart",_f="touchmove",wf="touchend",bf=(()=>{class s{constructor(t){this.w=t}observe(){s.cp&&s.ml(this.w)}disconnect(){s.cp&&s.yl(this.w)}static gv(t,e){csArray.prototype.forEach.call(Ps(s.Mt),i=>i(t,e))}static ml(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.tn.onGesture(s.gv),csArray.prototype.forEach.call(s.Us,e=>Tt(e))))}static yl(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Us,e=>Rt(e))}static El(t){if(s.tn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.tn.processActionDown(t);break;case"touchmove":s.tn.processActionMove();break;case"touchend":s.tn.processActionUp(t);break}}}return s.Us=[{boundElement:ot.document,type:vf,listener:r=>s.El(r)},{boundElement:ot.document,type:_f,listener:r=>s.El(r)},{boundElement:ot.document,type:wf,listener:r=>s.El(r)}],s.cp=Yr.isGestureDetectionSupported(),s.Mt=new Set,s.tn=new Yr,s})(),Af=(()=>{class s extends oe{constructor(){super(),this.rn=new bf(this.Sl.bind(this))}onStart(){this.rn.observe()}onStop(){this.rn.disconnect()}Sl(t){let e=this.mv(t);e&&this.produceEvent(e)}mv(t){if(!this.yv(t))return null;let e=kd(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}yv(t){return t.target!==null&&!(nt(t.target)&&N.isMaskedElementChild(t.target))}}return s})(),cc=(()=>{class s{constructor(t){this.w=t,this.$s=!1,this.Ft={boundElement:ot,type:"error",listener:e=>this.Ev(e)}}observe(){Tt(this.Ft,this.$s)}disconnect(){Rt(this.Ft,this.$s)}Ev(t){this.w(t)}}return s})(),Tf=(()=>{class s extends oe{constructor(){super(...arguments),this.lp=new cc(t=>this.qo(t))}qo({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Bt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.lp.observe()}onStop(){this.lp.disconnect()}}return s})(),Rf=(()=>{class s extends Ns{constructor(t){super(),this.Sv=t,this.vl=1024,this._l=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=zt.truncate(t.message,this.vl,zt.ELLIPSIS),t.filename=zt.truncate(t.filename,this._l,zt.ELLIPSIS),this.Sv(t)}}return s})();var Es=[],Xr=!1,lc=cs(If,"executeTasks");function Cf(s){if(csArray.prototype.push.call(Es,s),!Xr){for(let r=0;r<3;r++)csSetTimeout(lc);Xr=!0}}function If(){let s=csDate.now();for(let r=0;r<Es.length;r++)if(Es[r](),csDate.now()-s>=35){Es=csArray.prototype.slice.call(Es,r+1),csSetTimeout(lc);return}Es=[],Xr=!1}var Oe=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),hc=(()=>{class s{constructor(){this.Ct=new Is,this.Tt=Oe.Stopped,this.w=null,this.up=t=>{this.Tt===Oe.Stopped||!t||(this.w(t),this.dp())}}get queueLength(){return this.Ct.length}start(t){if(this.w)throw new Error("callback already set");this.Tt=Oe.Started,this.w=t}push(t){this.Ct.push(t),this.Tl()}stop(){this.w=null,this.Tt=Oe.Stopped,this.Ct.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(u=>{c.pushEvent(u)}),csArray.prototype.push.call(n,l),J(i,u=>u.subscribe(m=>l.push(m))),i=[c]}let a=new Pf(n);return J(i,c=>c.subscribe(l=>a.push(l))),a}pp(){return this.Tt===Oe.Stopped}Qe(){return this.Tt===Oe.Processing}dp(){if(!this.pp()){if(this.Ct.isEmpty){this.Tt=Oe.Completed;return}this.Tt=Oe.Processing,Cf(()=>{let t=this.Ct.pop();t instanceof vn?t.complete(this.up):this.up(t)})}}Tl(){this.pp()||this.Qe()||this.dp()}}return s})(),Pf=(()=>{class s extends hc{constructor(t){super(),this.fp=t}get queueLength(){return csArray.prototype.reduce.call(this.fp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),J(this.fp,t=>t.stop())}}return s})(),Of=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.G=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.Ct)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.G)throw new Error("Recording is already started.");let t=this.Mt;this.Ct=hc.pipe(this.producers,this.processors),this.Ct.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),J(this.producers,e=>e.start()),J(this.processors,e=>e.start()),this.G=!0}stop(){this.Ct.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.G=!1,this.Mt=[]}subscribe(t){if(this.G)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),Nf=(()=>{class s extends oe{constructor(t){super(),this.De=t}subscribe(t){return super.subscribe(t)}onStart(){J(this.De,t=>{t.onEvent(e=>{var i;return this.Fi(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),J(this.De,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){J(this.De,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Fi(t,e){this.produceEvent({timestamp:k.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function Mf(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:M.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:M.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:M.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:M.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:a,newValue:c}=s;r({type:M.MUTATION_ATTRIBUTE,date:e,args:[i,n,a,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:M.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:a}=s,c=Z(a)?[i,n,a]:[i,n];r({type:M.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:M.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:a}=s;r({type:M.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,a]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:M.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:M.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:a}=s;r({type:M.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:a}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:M.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:a}=s,c=Z(a)?[i,n,a]:[i,n];r({type:M.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:M.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:a}=s,c=[i,n,a];r({type:M.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,a=[i,n];r({type:M.ADOPTED_STYLESHEET_DISABLED,date:e,args:a});break}default:j.error("translateDOMEvent: DOMEvent not supported");break}}function kf(s){let r=Df(s.data);return{type:M.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function Df(s){let r={type:Lf(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Lf(s){switch(s){case yt.DRAG:case yt.FLICK:return Fs.SWIPE;case yt.LONG_PRESS:return Fs.LONG_PRESS;case yt.TAP:return Fs.TAP;case yt.PINCH_IN:return Fs.PINCH_IN;case yt.PINCH_OUT:return Fs.PINCH_OUT}}function xf(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var Vf=20;function Uf(s){return xf(r=>{let t={visibleInViewPort:r},e={type:M.TEXT_VISIBILITY,date:k.now(),args:[t]};s(e)},{batchSize:Vf,autoFlushDelay:1e3})}function jf(s){return{type:M.PERFORMANCE_TIMINGS,args:[{performanceTiming:_r.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:_r.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:_r.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function Hf(s){switch(s.inputType){case"text":return{type:M.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:M.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:M.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Bf=500,Ar=0;function Ff(){return{processEvent(s,r){if(s.originalEvent.type===M.PERFORMANCE_RESOURCE_TIMING)return Ar>=Bf?null:(Ar+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Ar=0}}}function zf(s){switch(s.videoEventType){case"play":return{type:M.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:M.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:M.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var $f=(()=>{class s{get pendingEvents(){return this.Wo.pendingEvents}constructor(t,e,i,n,a){this.Wo=t,this.S=e,this.Ce=i,this.Ke=n,this.gs=a,this.ie=()=>{},this.Yo=()=>{},this.gp=Uf(c=>this.ie(c))}start(){var t,e;this.mp=Ff(),this.Wo.subscribe(i=>{var n,a,c,l,u,m;let d=i,{timestamp:y}=d;switch(d.type){case"Legacy":{let E=d.eventType==="user"?(n=this.Yo)!==null&&n!==void 0?n:()=>{}:this.ie;this.mp.processEvent(d,E)}break;case"CustomElementRegistration":{this.ie({type:M.CUSTOM_ELEMENT_REGISTRATION,date:y,args:[d.tagName]});break}case"DomEvent":{Mf(d,this.ie,this.S);break}case"InputEvent":{let E=Hf(d);(a=this.Yo)===null||a===void 0||a.call(this,E);break}case"encryptedCharacterDataChanged":{let{target:E,rawData:S,encryptedData:T,encryptionMetadata:I}=d;this.ie({type:M.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[E,S,T,I]});break}case"StaticResource":{let{url:E}=d;this.ie({type:M.STATIC_RESOURCE_URL,date:y,args:[E]});break}case"ResizeMaskedElement":{let{target:E,width:S,height:T}=d;this.ie({type:M.MUTATION_ATTRIBUTE,date:y,args:[E,"","style",`width:${S}px !important;height:${T}px !important;`]});break}case"Gesture":{let E=kf(i);(c=this.Yo)===null||c===void 0||c.call(this,E);break}case"TextVisibility":{this.gp.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.Ce)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:E,height:S}=d,T={type:M.SCREEN_RESIZE,date:y,args:[E,S]};this.ie(T);break}case"viewportResize":{let{width:E,height:S}=d,T={type:M.RESIZE,date:y,args:[E,S]};this.ie(T);break}case"PerformanceTiming":{this.ie(jf(d));break}case"CustomError":{let E=(u=this.gs)===null||u===void 0?void 0:u.translate(d);E&&this.ie(E);break}case"JSError":{let E=(m=this.Ke)===null||m===void 0?void 0:m.translate(d);E&&this.ie(E);break}case"VideoEvent":{let E=zf(d);E&&this.ie(E);break}case"warning":{j.warn(d.message);break}default:j.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.S.emitInitialDomStart(),(t=this.Ke)===null||t===void 0||t.start(),(e=this.gs)===null||e===void 0||e.start(),this.Wo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Wo.stop(),(t=this.Ce)===null||t===void 0||t.flushEvents(),(e=this.Ke)===null||e===void 0||e.stop(),(i=this.gs)===null||i===void 0||i.stop()}flush(){this.gp.flush()}onEvent(t,e){var i;this.ie=t,this.Yo=e,(i=this.Ce)===null||i===void 0||i.onEvent(n=>this.ie(n))}reset(){this.mp.reset()}}return s})(),Gf=(()=>{class s{constructor(t=100){this.bv=t,this.Xo={},this.nn=null,this.Vc="original-resource-name"}onEvent(t){this.Av=t}processEvent(t){this.Tv(t.resourceId,t.resource.hash,t.originalResourceName),this.Rv(t)}flushEvents(){this.nn&&csClearTimeout(this.nn),this.yp()}onSendStaticResource(t){this.Rv=t}yp(){if(!Object.keys(this.Xo).length)return;let t={type:M.RESOURCE_HASHES,date:k.now(),args:[this.Xo]};this.nn=null,this.Xo={},this.Av(t)}Tv(t,e,i){let n=e;i&&(n+=`?${this.Vc}=${i}`),this.Xo[t]=n,!this.nn&&(this.nn=window.csSetTimeout(()=>this.yp(),this.bv))}}return s})(),qf=(()=>{class s{constructor(t,e){this.S=t,this.A=e,this.an=Ht.ETR_DISABLED,this.Ko=Ht.ETR_PENDING,this.Rl=!0}getEtrStatus(t){t===void 0&&(t=this.A.getSession());let e=t==null?void 0:t.etrStatus;return this.Ep()&&e===Ht.ETR_SAVED_SESSION?e:this.an}onEventTriggerRecording(t,e){switch(e){case Be.ETR_PAGE:this.Sp(Ht.ETR_SAVED_PAGE);break;case Be.ETR_LEGACY:case Be.ETR_SESSION:this.Sp(Ht.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===D.RECORDING_TEMPORARILY?this.Rl=!0:this.Rl=!1,t===D.ANALYTICS_ONLY&&e===Vt.ETR_ON?this.vp(this.Ko):this.vp(Ht.ETR_DISABLED)}vp(t){this.an=t,this.Ko=Ht.ETR_PENDING,this._p(t),this.S.emitRecordingContextChange()}Sp(t){this.Rl?Number(t)>Number(this.Ko)&&(this.Ko=t):this.Ep()&&Number(t)>Number(this.an)&&(this.an=t,this._p(t),this.S.emitRecordingContextChange())}_p(t){let e=this.A.getSession();e!==null&&e.etrStatus===Ht.ETR_NOT_SAVED_SESSION&&t===Ht.ETR_SAVED_SESSION&&(e.etrStatus=t,this.A.setSession(e))}Ep(){return this.an!==Ht.ETR_DISABLED}}return s})();function Kr(s,r){let t,e,i,n,a=null,c=u=>{let m=k.elapsed();if(!u&&a!==null){let y=r-(m-a);if(y>0){e=window.csSetTimeout(c,y);return}}let d=m-i;e=null,a=null,i=null,n=s(d,...t)},l=(...u)=>{if(t=[...u],i){a=k.elapsed();return}return i=k.elapsed(),e=window.csSetTimeout(c,r),n};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{a=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var Wf=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Yf=8*1024*1024,Xf=(()=>{class s extends Lt{constructor(t,e,i){super(),this.Ce=t,this.wp=e,this.nt=i,this.Cl={},this.bp=new Set,this.Qe=!1}initState(){Na()&&(this.xe=this.nt.getRequestParameters(),this.Cv=`${this.wp}/exist?${si.toQuery(this.xe)}`,this.Iv=`${this.wp}/putTag?${si.toQuery(this.xe)}`,this.Ap=Kr(async()=>{if(this.Qe){this.Ap();return}this.Qe=!0;try{await this.Pv()}finally{this.Qe=!1}},300),this.Ce.onSendStaticResource(t=>{this.Tp(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Tp(t)}Tp(t){this.Rp(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Rp(e.hash,e.data)})}Rp(t,e){this.bp.has(t)||(this.bp.add(t),this.Cl[t]=e,this.Ap())}async Pv(){let t=this.Cl;this.Cl={};let e=await this.Ov(t);if(!e.length)return;let i=this.Nv(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.Iv,{method:"POST",body:n})))}async Mv(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.xe.pid,filter:Wf.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.Cv,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Ov(t){let e=[],i=await this.Mv(t);return csArray.prototype.forEach.call(i,n=>{let a=t[n];a?csArray.prototype.push.call(e,{hash:n,data:a}):j.warn("SRM: received unknown hash: "+n)}),e}Nv(t){let e=0,i=[new FormData];for(let n of t){let{data:a,hash:c}=n,l=i.length-1;if(e=e+a.size,e<Yf)i[l].append("",a,c);else{let u=new FormData;u.append("",a,c),e=a.size,csArray.prototype.push.call(i,u)}}return i}}return s})(),Kf=(()=>{class s{constructor(t){this.Jo=t,this.mn=20,this.wi=0,this.L=!1}translate(t){if(this.wi>=this.mn)return this.Jo.stop(),null;this.wi+=1;let{filename:e,message:i,lineno:n,colno:a,timestamp:c}=t;return{type:M.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:a}]}}start(){this.L||(this.wi=0,this.L=!0)}stop(){this.L=!1}}return s})();var Jf="csPersisted",Lo="v2/recording",Qf=["isRecording"],Zf=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],tg=["replay:resourceManager:getStatus","cssrm:getStatus"],eg=(()=>{class s{constructor(t,e,i,n,a,c,l,u,m,d,y,E,S,T,I,b,w,L,P,R,U,G){this.Gs=t,this.A=e,this.f=i,this.xe=n,this.E=a,this.N=c,this.Q=l,this.$t=u,this.ue=m,this.mt=d,this.Me=y,this.Et=E,this.S=S,this.qs=T,this.Cp=I,this.re=b,this.kt=w,this.tt=L,this.Ur=P,this.lt=R,this.mC=U,this.it=G}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new jp),this.yn=new ef(this.lt.shouldUseAnonymization(),this.f.whitelistedAttributes,this.N,this.f.anonymizeDigits),this.Ai();let a=new Up(Jf);this.kv(a);let c=new Hd;this.z=new jd;let l=new Lp;csArray.prototype.push.call(i,l),this.f.useStaticResourceManager&&Wr.isSupported()&&(this.Bt=new Wr,this.Ce=new Gf,this.Ip=new Xf(this.Ce,this.f.getStaticResourceManagerUri(),this.xe),this.Cp.addListener(this.Ip),csArray.prototype.push.call(n,this.Bt));let u=new ii(c,this.xe,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.A.getCollectStates(),",")})}),m=new sc(`${this.f.getRecordingUri()}/${Lo}`);csArray.prototype.push.call(n,this.yn),csArray.prototype.push.call(n,new sf(this.tt)),csArray.prototype.push.call(n,new rf),this.Ti=new Ld,this.Ti.init(),csArray.prototype.push.call(i,this.Ti),this.Ot=new Pp(a,m,this.B),csArray.prototype.push.call(i,new Op(window.location,this.N));let d=new Tp,y=new af,E=new lf,S=new df(this.it),T=new pf,I=[y,this.$t,d,new Nf(csArray.prototype.filter.call(i,P=>P)),T,new ff,new Af,S,E];this.f.jsErrorsEnabled&&(this.Jo=new Tf,this.Lv=new Rf(P=>this.ue.anonymize(P)),this.Ke=new Kf(this.Jo),csArray.prototype.push.call(I,this.Jo),csArray.prototype.push.call(n,this.Lv));let b=new Of(I,n),w=new $f(b,this.S,this.Ce,this.Ke,this.gs),L=[d,y,E,S,T];this.recordingService=new Ip(this.f,this.z,u,c,this.Q,this.A,this.ue,this.mt,this.Me,this.it,this.B,this.Ot,m,w,i,L,this.Bt,this.Ur,this.Ke,this.gs),this.qs.addListener(this.recordingService),this.Cp.addListener(this.recordingService),this.recordingService.init(),this.E.register(Qf,()=>this.A.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()),this.E.register(Zf,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(tg,()=>this.recordingService.getStaticResourceManagerStatus()),this.En=new qf(this.S,this.A),this.qs.addListener(this.En),this.Gs.enableRecordingContext(this.recordingService,this.A,this.En),this.Il()}onAfterNaturalPageView(){var t;this.re.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ip)===null||t===void 0||t.initState()}onStartTracking(){this.Ot.recover(),this.Ai(),this.A.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()&&(this.A.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Pl())}onArtificialPageViewEnd(){this.A.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()&&!this.A.isTemporarilyRecorded()&&this.Ot.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Ai(),this.A.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()?(this.A.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.xv()):(this.recordingService.resetOnlineAssetsOnPageview(),this.Yi())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.Yi()}onOptout(){this.Yi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Ai(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Ai(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===D.QUOTA_REACHED||t===D.ANALYTICS_ONLY&&e===Vt.ETR_OFF?(this.recordingService.clearEvents(),this.Yi()):(this.B.setQueryParams({rt:csArray.prototype.join.call(this.A.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.En.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ot.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ot.allowSendingLastMessage(),this.Ti.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.A.isReplayRecorded()&&!this.re.isUrlExcludedForSessionReplay()&&(this.A.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Pl(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Yi())}Il(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let a=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;J(a,c=>{Ys(c)&&We.setShadowRootFilter(l=>{try{return Yt.call(l.host,c)}catch{return!1}})})}}Pl(){this.recordingService.start(),this.Ot.start(),this.S.emitRecordingContextChange()}Yi(){Md(),this.recordingService.stop(),this.Ot.stop(),this.S.emitRecordingContextChange()}xv(){this.Yi(),this.Pl()}kv(t){let e="byteArray";this.B=this.kt.create(`${this.f.getRecordingUri()}/${Lo}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Ai(){var t;let e=this.lt.shouldUseAnonymization();this.yn.setAnonymization(e),(t=this.Dv)===null||t===void 0||t.setAnonymization(e)}}return F([Ot("Recording.onStartTracking")],s.prototype,"onStartTracking",null),F([Ot("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),Ii=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Ue=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),sg=(()=>{class s{constructor(t,e,i,n){this.I=t,this.A=e,this.f=i,this.Ze=n,this.Pp=!1}isNaturalPageViewSent(){return this.Pp}setNaturalPageViewSent(t){this.Pp=t}getTrackingContext(){let t=this.A.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,n=this.f.uxaDomain,a=t.pageNumber,c=this.Ze.getPageViewType(),l=this.A.isReplayRecorded(),u=this.Uv(t);return{projectId:i,sessionKey:e,pageNumber:a,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:u,...this.f.smbConfig}}getSessionKey(){let t=this.I.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Uv(t){return Ue.isReplayConsentNeeded(this.f)?t.collectState===D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Ii.NOT_EXPRESSED:t.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Ii.WITHDRAWN:Ii.GRANTED:Ii.NOT_NEEDED}}return s})(),ig=(()=>{class s{constructor(t){this.bt=t,this.ne=[]}handleCommand(t){if(Fe(t)&&(this.Sn(t),this.bt.isNaturalPageViewSent())){let e=this.bt.getTrackingContext();e!==null&&this.Vt(t,e)}}Sn(t){csArray.prototype.push.call(this.ne,t)}executeRegisteredCallbacks(){let t=this.bt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ne,e=>this.Vt(e,t))}Vt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),rg=(()=>{class s{constructor(t){this.bt=t,this.Ri=[]}handleCommand(t){if(this.bt.isNaturalPageViewSent())return this.jv(t);this.vn(t)}jv(t){let e=this.bt.getSessionKey();return this.Op(t)&&e!==null&&this.Vt(t.callback,e),e}vn(t){this.Op(t)&&csArray.prototype.push.call(this.Ri,t.callback)}flushPendingCallbacks(){let t=this.bt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ri,e=>{this.Vt(e,t)}),this.Ri=[]}Op(t){return t&&typeof t.callback=="function"}Vt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),ng=(()=>{class s{constructor(t,e){this.J=t,this.bt=e}onTrackingContextRequestCallback(t){let e=this.bt.getTrackingContext();e!==null&&this.J.sendToChildren(K.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.bt.isNaturalPageViewSent())return;let e=this.bt.getTrackingContext();e!==null&&(t.trackingContext=e,this.J.sendToChildren(K.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.bt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:Vu.AfterPageView};this.J.sendToChildren(K.IntegrationCallback,e)}}return s})();function og(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:a,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),u;if(t&&l){let[,m,d]=l;n?u=`${c}/sites/${n}/player?uu=${m}&sn=${d}&pn=${e}`:u=`${a}/quick-playback/index.html?pid=${i}&uu=${m}&sn=${d}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(u+=`&t=${k.now()-r.recordingStartTimestamp}`)}return{replayLink:u,isRecording:t}}var ag=(()=>{class s{constructor(t){this.bt=t}handleCommand(t,e){Zs(t)&&Fe(e)&&this.Vt(t,e)}Vt(t,e){csSetTimeout(()=>{let i=this.bt.getTrackingContext();if(i){let n=og(i,t);e(n)}})}}return s})(),cg=(()=>{class s{constructor(){this.ne=new Set}handleCommand(t,e){return!Fe(t)||this.ne.has(t)?null:(this.ne.add(t),e&&(this.Te=e,this.Np(t,e)),()=>this.ne.delete(t))}executeCallbacks(t){this.Hv(t)&&(this.Te=t,this.ne.forEach(e=>this.Np(e,t)))}Np(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Hv(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:a,collectState:c}=t;return this.Te&&(this.Te.isRecording!==e||this.Te.recordingStartTimestamp!==i||this.Te.etrState!==n||this.Te.etrStatus!==a||this.Te.collectState!==c)}}return s})(),lg=["afterPageView"],hg=["getSessionKey"],ug=["onRecordingContextChange","onRecordingStateChange"],dg=["replay:link:generate"],pg=(()=>{class s{constructor(t,e,i,n,a,c,l,u){this.I=t,this.A=e,this.E=i,this.ut=n,this.J=a,this.f=c,this.Ze=l,this.Gs=u}init(){this.bt=new sg(this.I,this.A,this.f,this.Ze),this.Ol=new ig(this.bt),this.Mp=new rg(this.bt),this._n=new cg,this.Bv=new ag(this.bt),this.Nl=new ng(this.J,this.bt),this.ut.addListener(this.Nl),this.E.register(hg,t=>this.Mp.handleCommand(t)),this.E.register(lg,t=>this.Ol.handleCommand(t)),this.E.register(ug,t=>this._n.handleCommand(t,this.Gs.getRecordingContext())),this.E.register(dg,(t,e)=>{this.Xi&&this.Bv.handleCommand({...t,recordingStartTimestamp:this.Gs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.bt.setNaturalPageViewSent(!0),this.Mp.flushPendingCallbacks(),this.Ol.executeRegisteredCallbacks(),this.Nl.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Ol.executeRegisteredCallbacks(),this.Nl.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this._n.executeCallbacks(this.Gs.getRecordingContext())}setRecordingService(t){this.Xi=t}}return F([yn({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),fg=512,gg=255,Tr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,fg),this.value=z(e)?csString.prototype.slice.call(e,0,gg):e}static isKeyValid(t){return z(t)}static isValueValid(t){return z(t)||bs(t)}}return s})(),mg=(()=>{class s extends Lt{constructor(t,e){super(),this.Gt=t,this.N=e,this.Ml=[]}onStart(){csArray.prototype.forEach.call(this.Ml,t=>this.kp(t.key,t.value)),this.Ml=[]}onStop(){}kp(t,e){let i=this.N.anonymizePII(t),n=bs(e)?e:this.N.anonymizePII(e);this.Gt.add(new Tr(i,n))}trackDynamicVariable(t,e){if(Tr.isKeyValid(t)&&Tr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Ml,{key:t,value:e});return}this.kp(t,e)}else throw new Error(`Command misuse: ${uc[0]}`)}}return s})(),yg=(()=>{class s{constructor(t){this.de=t,this.Gt=[]}add(t){csArray.prototype.push.call(this.Gt,t),this.setBatchReadyCall()}clear(){this.Gt=[]}onBatchReady(t){this.Fv=t}getRequestParameters(){let t={};for(let e of this.Gt)t[e.key]=e.value;return{dv:this.de.compressSync(csJSON.stringify(t),"base64"),ct:this.de.algorithm}}setBatchReadyCall(){this.Fv()}}return F([yn({wait:0,mode:"trailing"}),V("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Eg="dvar",uc=["trackDynamicVariable"],Sg=(()=>{class s{constructor(t,e,i,n,a,c){this.E=t,this.A=e,this.f=i,this.xe=n,this.de=a,this.N=c,this.us=new Ts(this.f.getTrackerUri(),Eg),this.Gt=new yg(this.de),this.es=new mg(this.Gt,this.N)}init(){this.us.setRequestParametersProviders(this.xe,this.Gt),this.A.setDynamicVariablesService(this.es),this.Gt.onBatchReady(()=>this.us.send()),this.us.after(()=>this.Gt.clear()),this.E.register(uc,({key:t,value:e}={})=>{this.es.trackDynamicVariable(t,e)})}onStartTracking(){this.es.start()}}return s})(),xo=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),z(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Pt(t)&&te(t.revenue)&&z(t.currency)&&t.currency.length<=10&&(!Pt(t.id)||z(t.id))}}return s})(),dc=100,vg=100,_g=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.kl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Z(t.sku)&&(e.sku=t.sku),Z(t.category)&&(e.category=t.category),Z(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,dc)),e}static kl(t){return Pt(t)&&z(t.id)&&z(t.name)&&te(parseFloat(t.price))&&bs(parseInt(t.quantity,10))&&(!Z(t.sku)||z(t.sku))&&(!Z(t.category)||z(t.category))&&(!Z(t.merchant)||z(t.merchant))}}return s})(),wg=(()=>{class s extends Lt{constructor(t,e,i){super(),this.N=t,this.Dp=e,this.Q=i,this.Dl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Dl,t=>{this.pe=t.transaction,this.wn=t.transactionItems,this.sendTransaction()}),this.Dl=[]}onStop(){}addTransaction(t){let e=this.N.anonymizeFields(t,["id"]);this.pe=xo.from(e)}getTransaction(){return this.pe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Dl,{transaction:this.pe,transactionItems:[...this.wn]}),this.clear();return}if(!(this.Dp===null||this.Q===null)&&(this.Q.refreshSession(),!!this.Q.isSessionValid())){if(!this.pe.hasValidRevenue()){j.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Dp.send()}}addItem(t){if(Fe(t))throw new Error(`Command misuse: ${pc[1]}`);let e=this.N.anonymizeFields(t,["id","name","sku","category"]),i=_g.from(e);i!==null&&csArray.prototype.push.call(this.wn,i)}getItems(){return this.wn}clear(){this.pe=xo.from({revenue:NaN}),this.wn=[]}getRequestParameters(){let t={id:this.pe.id?`${this.pe.id}`:"",revenue:`${this.pe.revenue}`};return Z(this.pe.tax)&&(t.tax=`${this.pe.tax}`),Z(this.pe.shipping)&&(t.shipping=`${this.pe.shipping}`),Z(this.pe.currency)&&(t.cu=`${this.pe.currency}`),t.items=window.csJSON.stringify(this.wn),t}}return s})(),bg=(()=>{class s extends Lt{constructor(t,e){super(),this.zv=t,this.Q=e,this.Ie=null,this.Ll=[]}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.Ie=t,this.Lp()}),this.Ll=[]}onStop(){}addToCart(t){let e={};z(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,vg)),z(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,dc)),(e.sku||e.merchant)&&(this.Ie=e,this.Lp())}getCartItem(){return this.Ie}Lp(){if(!this.isStarted&&this.Ie!==null){csArray.prototype.push.call(this.Ll,this.Ie),this.clear();return}this.Q.refreshSession(),this.Q.isSessionValid()&&this.zv.send()}clear(){this.Ie=null}getRequestParameters(){if(!this.Ie)return{};let t={};return z(this.Ie.sku)&&this.Ie.sku.length>0&&(t.sku=this.Ie.sku),z(this.Ie.merchant)&&this.Ie.merchant.length>0&&(t.me=this.Ie.merchant),t}}return s})(),Ag=["ecommerce:addToCart","ec:cart:add"],Tg=["ecommerce:addTransaction","ec:transaction:create"],pc=["ecommerce:addItem","ec:transaction:items:add"],Rg=["ecommerce:send","ec:transaction:send"],Cg=(()=>{class s{constructor(t,e,i,n,a,c,l){this.f=t,this.nt=e,this.I=i,this.E=n,this.N=a,this.Q=c,this.R=l}init(){let t=new Ts(this.f.getTrackerUri(),"transaction"),e=new Ts(this.f.getTrackerUri(),"addtocart");this.ss=new wg(this.N,t,this.Q),this.Qo=new bg(e,this.Q);let i=new ii(this.nt,this.I,this.R,this.ss);t.setRequestParametersProviders(i),t.after(()=>{this.ss.clear()});let n=new ii(this.nt,this.I,this.R,this.Qo);e.setRequestParametersProviders(n),e.after(()=>{this.Qo.clear()}),this.E.register(Tg,a=>{this.ss.addTransaction(a)}),this.E.register(pc,a=>this.ss.addItem(a)),this.E.register(Rg,()=>this.ss.sendTransaction()),this.E.register(Ag,a=>{this.Qo.addToCart(a)})}onStartTracking(){this.ss.start(),this.Qo.start()}}return s})(),Ig=(()=>{class s{constructor(t){this.Zo=t.performance}getRequestParameters(){if(this.$v())return{};let t=this.Gv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}Gv(){let t=this.Zo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}$v(){return!(this.Zo&&this.Zo.timing&&this.Zo.timing.loadEventEnd>0)}}return s})(),Dt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,a)=>a.enhanceAnalysisEvent(t,n),e)}}return s})(),$=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),Rr=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})();function Pg(s){return s.tgtHM!==void 0}function fc(s){return s.tgt!==void 0}function Og(s){return s.tgtLk!==void 0}function Ng(s){return s.x!==void 0&&s.y!==void 0}function Mg(s){return s===Rr.SUCCESS||s===Rr.FAILURE||s===Rr.ATTEMPT}var kg=(()=>{class s{constructor(t,e,i){this.oe=t,this.Ut=e,this.wt=i}processGesture(t,e){switch(t.type){case yt.TAP:this.qv(e);break;case yt.FLICK:this.Wv(t,e);break;case yt.DRAG:this.Yv(t,e);break;default:break}}qv(t){let e={type:$.TAP,ts:0,x:0,y:0,tgt:""},i=Dt.build(t,e,this.oe);i.tgt!==fe.INVALID_ELEMENT&&this.D(i)}Yv(t,e){var i,n;let a={type:$.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.wt)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.wt)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=Dt.build(e,a,this.oe);c.tgt!==fe.INVALID_ELEMENT&&this.D(c)}Wv(t,e){var i,n;let a={type:$.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.wt)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.wt)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=Dt.build(e,a,this.oe);c.tgt!==fe.INVALID_ELEMENT&&this.D(c)}onEvent(t){this.D=t}start(){this.Ut.subscribe(s.xp,(t,e)=>this.processGesture(t,e))}stop(){this.Ut.unsubscribe(s.xp)}}return s.xp="AnalysisGestureTracker",F([_t()],s.prototype,"processGesture",null),s})(),Dg=(()=>{class s{constructor(t,e,i,n=["submit"]){this.oe=t,this.ft=e,this.jt=i,this.Xv=n,this.Vp="select, select *, input, textarea",this.Kv="select, select *, input, textarea",this.Up="a, a *, button, button *, select, select *, input, textarea",this.bn="input, select, textarea",this.Jv="form",this.ta=150,this.Qv=400,this.jp=!1,this.An=Kr((a,c)=>this.scrollListener(a,c),this.ta),this.Hp=Kr(a=>this.resizeListener(a),this.ta),this.Zv=Ki(a=>this.mouseMoveListener(a),this.Qv),this.t_=[{boundElement:window,type:"resize",listener:()=>this.Hp()},{boundElement:document,type:"scroll",listener:a=>this.An(a)},{boundElement:window,type:"mousemove",listener:a=>{this.Zv(Rd(a))}},{boundElement:document,type:"mousedown",listener:a=>this.mouseDownListener(a)},{boundElement:document,type:"mouseup",listener:a=>this.mouseUpListener(a)},{boundElement:document,type:"click",listener:a=>this.clickListener(a)}],this.Bp=[{type:"change",listener:this.jt.on(this.Kv,a=>this.changeListener(a))},{type:"submit",listener:this.jt.on(this.Jv,a=>this.submitListener(a))}],this.e_=[{boundElement:document,type:"mouseover",listener:this.jt.on(this.Up,a=>this.mouseOverListener(a))},{boundElement:document,type:"mouseout",listener:this.jt.on(this.Up,a=>this.mouseOutListener(a))},{boundElement:document,type:"focusin",listener:this.jt.on(this.Vp,a=>this.focusInListener(a))},{boundElement:document,type:"focusout",listener:this.jt.on(this.Vp,a=>this.focusOutListener(a))},{boundElement:document,type:"keyup",listener:this.jt.on(this.bn,a=>this.keyUpListener(a))},{boundElement:document,type:"keydown",listener:this.jt.on(this.bn,a=>this.keyDownListener(a))},{boundElement:document,type:"copy",listener:this.jt.on(this.bn,a=>this.copyListener(a))},{boundElement:document,type:"cut",listener:this.jt.on(this.bn,a=>this.cutListener(a))},{boundElement:document,type:"paste",listener:this.jt.on(this.bn,a=>this.pasteListener(a))},...csArray.prototype.map.call(this.Bp,a=>({...a,boundElement:document}))],this.U={},this.Lc=(a,c)=>{switch(c){case"initial":case"added":this.fi(a);break;case"removed":this.gi(a);break}},this.ce=new Os(this.Lc),this._c()}fi(t){if(Ui(t)){let e=this.Fp();csArray.prototype.forEach.call(e,i=>Tt(i))}else{let e=this.zp();csArray.prototype.forEach.call(e,i=>{Tt({...i,boundElement:t})})}}gi(t){if(Ui(t)){let e=this.Fp();csArray.prototype.forEach.call(e,i=>Rt(i))}else{let e=this.zp();csArray.prototype.forEach.call(e,i=>{Rt({...i,boundElement:t})})}}onEvent(t){this.D=t}start(){this.ce.observe(),this.fi(document),this.resizeListener()}stop(){this.gi(document),this.ce.disconnect()}flushPendingDebouncedListeners(){this.An.flushPending(),this.Hp.flushPending()}$p(t){return csArray.prototype.some.call(this.Xv,e=>e===t)}zp(){return this.jt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Bp,t=>!this.$p(t.type)):(j.warn("Element.matches is not implemented yet"),[])}Fp(){let t=[];return csArray.prototype.push.call(t,...this.t_),this.jt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.e_):j.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.$p(e.type))}resizeListener(t){let e=vs.getScrollContainer(),i=oi(e);i&&(this.jp=!0);let n={type:$.RESIZE,ts:0,x:i?e.clientWidth:gt.windowWidth(),y:i?e.clientHeight:gt.windowHeight()};t!==void 0&&(n.d=t),this.D(n)}scrollListener(t,e){let i=vs.isEventOnScrollContainer(e);!this.jp&&i&&this.resizeListener();let n={type:$.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:gt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:gt.windowOffsetY(),d:t},a=Dt.build(e,n,this.oe);this.D(a)}mouseMoveListener(t){let e={type:$.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Dt.build(t,e,this.oe);this.D(i)}mouseDownListener(t){let e={type:$.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Dt.build(t,e,this.oe);this.fe(i)}mouseUpListener(t){let e={type:$.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Dt.build(t,e,this.oe);this.fe(i)}clickListener(t){let e={type:$.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Dt.build(t,e,this.oe);this.fe(i)}mouseOverListener(t){let e={type:$.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Dt.build(t,e,this.oe);this.fe(i)}mouseOutListener(t){let e={type:$.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.ft.getEventTargetPath(t)},i=Dt.build(t,e,this.oe);this.fe(i)}focusInListener(t){let e={type:$.FOCUSIN,ts:0,tgt:this.ft.getEventTargetPath(t)},i=Dt.build(t,e,this.oe);this.fe(i)}focusOutListener(t){let e={type:$.FOCUSOUT,ts:0,tgt:this.ft.getEventTargetPath(t)},i=Dt.build(t,e,this.oe);this.fe(i)}changeListener(t){let e={type:$.CHANGE,ts:0,tgt:""},i=Dt.build(t,e,this.oe);this.fe(i)}submitListener(t){let e={type:$.SUBMIT,ts:0,tgt:""},i=Dt.build(t,e,this.oe);this.fe(i)}copyListener(t){let e={type:$.COMMAND,ts:0,tgt:this.ft.getEventTargetPath(t),key:_s.COPY};this.fe(e)}cutListener(t){let e={type:$.COMMAND,ts:0,tgt:this.ft.getEventTargetPath(t),key:_s.CUT};this.fe(e)}pasteListener(t){let e={type:$.COMMAND,ts:0,tgt:this.ft.getEventTargetPath(t),key:_s.PASTE};this.fe(e)}keyUpListener(t){let e={type:$.KEYUP,ts:0,tgt:this.ft.getEventTargetPath(t),key:this.Gp(t)};this.fe(e)}keyDownListener(t){let e={type:$.KEYDOWN,ts:0,tgt:this.ft.getEventTargetPath(t),key:this.Gp(t)};this.fe(e)}Gp(t){let e=this.U[t.key];return e===void 0?q.ALPHANUMERICAL:e}fe(t){fc(t)&&t.tgt!==fe.INVALID_ELEMENT&&this.D(t)}_c(){this.U[" "]=q.SPACE,this.U.Spacebar=q.SPACE,this.U.Enter=q.ENTER,this.U.Backspace=q.BACKSPACE,this.U.Delete=q.DELETE,this.U.ArrowUp=q.ARROWUP,this.U.ArrowDown=q.ARROWDOWN,this.U.ArrowLeft=q.ARROWLEFT,this.U.ArrowRight=q.ARROWRIGHT,this.U.Up=q.ARROWUP,this.U.Down=q.ARROWDOWN,this.U.Left=q.ARROWLEFT,this.U.Right=q.ARROWRIGHT,this.U.CapsLock=q.CAPSLOCK,this.U.Shift=q.SHIFT,this.U.Tab=q.TAB}}return F([V("Event handler type: resize")],s.prototype,"resizeListener",null),F([V("Event handler type: scroll")],s.prototype,"scrollListener",null),F([V("Event handler type: mouseMove"),_t()],s.prototype,"mouseMoveListener",null),F([V("Event handler type: mouseDown"),_t()],s.prototype,"mouseDownListener",null),F([V("Event handler type: mouseUp"),_t()],s.prototype,"mouseUpListener",null),F([V("Event handler type: click"),_t()],s.prototype,"clickListener",null),F([V("Event handler type: mouseOver"),_t()],s.prototype,"mouseOverListener",null),F([V("Event handler type: mouseOut"),_t()],s.prototype,"mouseOutListener",null),F([V("Event handler type: focusIn")],s.prototype,"focusInListener",null),F([V("Event handler type: focusOut")],s.prototype,"focusOutListener",null),F([V("Event handler type: change")],s.prototype,"changeListener",null),F([V("Event handler type: submit"),_t()],s.prototype,"submitListener",null),F([V("Event handler type: copy")],s.prototype,"copyListener",null),F([V("Event handler type: cut")],s.prototype,"cutListener",null),F([V("Event handler type: paste")],s.prototype,"pasteListener",null),F([V("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([V("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Lg=(()=>{class s{constructor(){this.qp=100,this.Tn=0,this.Rn=gt.documentHeight(),this.Wp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Tn=this.xl(vs.getScrollContainer()).maxScrollRate}onEvent(t){this.D=t}start(){Tt(this.Wp)}stop(){Rt(this.Wp)}reset(){let t=vs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.xl(t);this.Rn=i,this.Tn=e,this.D()}xl(t){let e=0,i=0;if(t===null)i=gt.documentHeight(),e=this.s_(i);else{let n=this.i_(t);i=this.Yp(t,n),e=this.r_(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;vs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.xl(e);(i>this.Tn||n>this.Rn)&&(this.Tn=i,n>this.Rn&&(this.Rn=n),this.D())}s_(t){let e=Math.round(this.n_()/t*100);return Math.min(e,this.qp)}n_(){let t=gt.windowHeight();return gt.windowOffsetY()+t}r_(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Yp(t,e),a=Math.round(i/n*100);return Math.min(a,this.qp)}i_(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Yp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Tn}`,mdh:`${this.Rn}`}}}return F([V("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})();var xg=(()=>{class s{constructor(t,e,i,n,a,c,l,u,m,d,y,E,S,T,I,b,w,L,P,R,U){this.f=t,this.Ws=e,this.Ut=i,this.Ki=n,this.Vl=a,this.Ge=c,this.is=l,this.Xp=u,this.Q=m,this.Qt=d,this.K=y,this.Ul=E,this.Be=S,this.B=T,this.sa=I,this.Ss=b,this.vs=w,this.jl=L,this.Ci=P,this.Ii=R,this.Pi=U,this.Vs=new Ga,this.ia=!1}init(){var t,e,i,n,a,c,l;this.Ws.onEvent(u=>this.Nt(u)),this.Ut.onEvent(u=>this.Nt(u)),this.Ki.onEvent(()=>{let u=this.Ki.getRequestParameters();this.B.setQueryParams(u),this.is.setQueryParams(u)}),this.Ul.onEvent(u=>this.qe(u)),this.Hl(),(t=this.sa)===null||t===void 0||t.onEvent(u=>this.Nt(u)),(e=this.Ci)===null||e===void 0||e.onEvent(u=>this.Nt(u)),(i=this.Ss)===null||i===void 0||i.onEvent(u=>this.Nt(u)),(n=this.vs)===null||n===void 0||n.onEvent(u=>this.Nt(u)),this.o_(),(a=this.jl)===null||a===void 0||a.onEvent(u=>this.qe(u)),(c=this.Ii)===null||c===void 0||c.onEvent(u=>this.qe(u)),(l=this.Pi)===null||l===void 0||l.onEvent(u=>this.qe(u))}o_(){this.is.onBeaconSuccess(()=>{this.Ge.clearEvents()}),this.is.onBeaconFailure(t=>{this.a_(t)})}initStates(){let t=this.Xp.getRequestParameters(),e=this.Vl.getRequestParameters(),i=this.Ki.getRequestParameters();this.B.setQueryParams(t),this.B.setQueryParams(e),this.B.setQueryParams(i),this.is.setQueryParams(t),this.is.setQueryParams(e),this.is.setQueryParams(i),this.Bl()}clearStates(t){var e,i;this.Ws.flushPendingDebouncedListeners(),(e=this.Ss)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.Fl(),this.sendLastMessageBeacon()):this.sendEvents(),this.Ki.reset(),this.B.removeQueryParams()}start(t){var e,i,n,a,c,l,u;t||(e=this.jl)===null||e===void 0||e.start(),this.Be.start(),this.Ws.start(),this.Ki.start(),this.Ut.start(),(i=this.sa)===null||i===void 0||i.start(),(n=this.vs)===null||n===void 0||n.start(),t||this.Ul.start(),(a=this.Ss)===null||a===void 0||a.start(),(c=this.Ci)===null||c===void 0||c.start(),(l=this.Ii)===null||l===void 0||l.start(),(u=this.Pi)===null||u===void 0||u.start()}collectInitialEvents(){var t;(t=this.sa)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.qe(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.X(t)}qe(t){this.Q.isCurrentPageviewValid()&&this.X(t)}Nt(t){this.Q.refreshSession(),this.Q.isSessionValid()&&this.X(t)}X(t){this.Ge.addEvent(this.c_(t)),this.Ge.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Vs.emit("analysisEvent",{...t,typeName:$[t.type]})}c_(t){return t.ts=this.Oi(),t}Fl(){this.is.setQueryParams({hlm:"true"}),this.ia=!0}sendLastMessageBeacon(){this.is.setQueryParams(this.Vl.getRequestParameters()),this.is.send(this.Ge.stringifyEvents()),this.is.removeQueryParams(["hlm"]),this.ia=!1}sendEvents(){this.Ge.isEmpty()||(this.B.setQueryParams(this.Xp.getRequestParameters()),this.B.setQueryParams(this.Vl.getRequestParameters()),this.B.send(this.Ge.getEvents()),this.Ge.clearEvents())}stop(){var t,e,i,n,a,c,l;this.Be.stop(),this.Ws.stop(),this.Ki.stop(),this.Ut.stop(),this.Ul.stop(),(t=this.sa)===null||t===void 0||t.stop(),(e=this.Ss)===null||e===void 0||e.stop(),(i=this.vs)===null||i===void 0||i.stop(),(n=this.Ci)===null||n===void 0||n.stop(),this.Ge.empty(),(a=this.jl)===null||a===void 0||a.stop(),(c=this.Ii)===null||c===void 0||c.stop(),(l=this.Pi)===null||l===void 0||l.stop()}Bl(){this.rs=k.now()}Oi(){return k.now()-this.rs}Hl(){this.Be.onEvent(t=>{var e,i;t!==Ft.Visible&&((e=this.Ss)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Ft.PagehideVisible?this.Fl():t===Ft.PagehideHidden?(this.Fl(),this.sendLastMessageBeacon()):(!this.Ge.isEmpty()||this.ia)&&this.sendLastMessageBeacon())})}a_(t){try{(!this.Ge.isEmpty()||this.ia)&&this.Qt.save({requestParameters:t,events:this.Ge.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Mg(t)||!oi(e))throw new Error(`Command misuse: ${wc}`);let i={status:t,type:$.SUBMIT_COMMAND,ts:0,tgt:this.K.getElementPath(e)};i.tgt!==fe.INVALID_ELEMENT&&this.qe(i)}}return s})(),Vg=(()=>{class s{constructor(t,e){this.Qt=t,this.B=e,this.Kp=()=>{document.visibilityState==="visible"&&this.Jp()}}start(){this.Jp(),this.Uc()}stop(){this.jc()}getRecoveryStorage(){return this.Qt}Jp(){let t=this.Qt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.B.send(i,e)}}Uc(){document.addEventListener("visibilitychange",this.Kp)}jc(){document.removeEventListener("visibilitychange",this.Kp)}}return s})(),Ug=(()=>{class s{constructor(t){this.$i=t}save(t){localStorage.setItem(this.$i,csJSON.stringify(t))}clear(){localStorage.removeItem(this.$i)}recover(){let t=localStorage.getItem(this.$i);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{j.error(`Invalid item in localStorage.
         (key:${this.$i}; value:${t})`)}finally{this.clear()}return e}}return s})(),jg=(()=>{class s{constructor(t){this.Cn=t,this.In=e=>this.processMetric(e),this.L=!1}onEvent(t){this.D=t}start(){this.L||(this.L=!0,this.Cn.onFCP(this.In),this.Cn.onCLS(this.In),this.Cn.onLCP(this.In),this.Cn.onTTFB(this.In),this.Cn.onINP(this.In))}stop(){this.L=!1}processMetric(t){if(!this.L)return;let e={type:$.PERFORMANCE,name:t.name,val:t.value,ts:0};this.D(e)}}return F([V("Performance metric handler")],s.prototype,"processMetric",null),s})(),gc=-1,Ms=s=>{addEventListener("pageshow",r=>{r.persisted&&(gc=r.timeStamp,s(r))},!0)},re=(s,r,t,e)=>{let i,n;return a=>{r.value>=0&&(a||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},bn=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},An=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},ui=()=>{var r;let s=An();return(r=s==null?void 0:s.activationStart)!=null?r:0},ne=(s,r=-1)=>{let t=An(),e="navigate";return gc>=0?e="back-forward-cache":t&&(document.prerendering||ui()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Cr=new WeakMap;function Tn(s,r){return Cr.get(s)||Cr.set(s,new r),Cr.get(s)}var Jr=class{constructor(){ce(this,"t");ce(this,"i",0);ce(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},di=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},Rn=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ss=-1,Vo=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,$i=s=>{document.visibilityState==="hidden"&&Ss>-1&&(Ss=s.type==="visibilitychange"?s.timeStamp:0,Hg())},Uo=()=>{addEventListener("visibilitychange",$i,!0),addEventListener("prerenderingchange",$i,!0)},Hg=()=>{removeEventListener("visibilitychange",$i,!0),removeEventListener("prerenderingchange",$i,!0)},mc=()=>{var s;if(Ss<0){let r=ui(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ss=t!=null?t:Vo(),Uo(),Ms(()=>{setTimeout(()=>{Ss=Vo(),Uo()})})}return{get firstHiddenTime(){return Ss}}},tr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},jo=[1800,3e3],yc=(s,r={})=>{tr(()=>{let t=mc(),e,i=ne("FCP"),n=di("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-ui(),0),i.entries.push(c),e(!0)))});n&&(e=re(s,i,jo,r.reportAllChanges),Ms(a=>{i=ne("FCP"),e=re(s,i,jo,r.reportAllChanges),bn(()=>{i.value=performance.now()-a.timeStamp,e(!0)})}))})},Ho=[.1,.25],Bg=(s,r={})=>{yc(Rn(()=>{let t,e=ne("CLS",0),i=Tn(r,Jr),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},a=di("layout-shift",n);a&&(t=re(s,e,Ho,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(a.takeRecords()),t(!0))}),Ms(()=>{i.i=0,e=ne("CLS",0),t=re(s,e,Ho,r.reportAllChanges),bn(()=>t())}),setTimeout(t))}))},Ec=0,Ir=1/0,Pi=0,Fg=s=>{for(let r of s)r.interactionId&&(Ir=Math.min(Ir,r.interactionId),Pi=Math.max(Pi,r.interactionId),Ec=Pi?(Pi-Ir)/7+1:0)},Qr,Bo=()=>{var s;return Qr?Ec:(s=performance.interactionCount)!=null?s:0},zg=()=>{"interactionCount"in performance||Qr||(Qr=di("event",Fg,{type:"event",buffered:!0,durationThreshold:0}))},Fo=0,Zr=class{constructor(){ce(this,"u",[]);ce(this,"l",new Map);ce(this,"m");ce(this,"p")}v(){Fo=Bo(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Bo()-Fo)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((a,c)=>c.T-a.T),this.u.length>10){let a=this.u.splice(10);for(let c of a)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Sc=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=Rn(s)),document.addEventListener("visibilitychange",s,{once:!0}))},zo=[200,500],$g=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&tr(()=>{var c;zg();let t,e=ne("INP"),i=Tn(r,Zr),n=l=>{Sc(()=>{for(let m of l)i.h(m);let u=i.P();u&&u.T!==e.value&&(e.value=u.T,e.entries=u.entries,t())})},a=di("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=re(s,e,zo,r.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(a.takeRecords()),t(!0))}),Ms(()=>{i.v(),e=ne("INP"),t=re(s,e,zo,r.reportAllChanges)}))})},tn=class{constructor(){ce(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},$o=[2500,4e3],Gg=(s,r={})=>{tr(()=>{let t=mc(),e,i=ne("LCP"),n=Tn(r,tn),a=l=>{r.reportAllChanges||(l=l.slice(-1));for(let u of l)n.h(u),u.startTime<t.firstHiddenTime&&(i.value=Math.max(u.startTime-ui(),0),i.entries=[u],e())},c=di("largest-contentful-paint",a);if(c){e=re(s,i,$o,r.reportAllChanges);let l=Rn(()=>{a(c.takeRecords()),c.disconnect(),e(!0)});for(let u of["keydown","click","visibilitychange"])addEventListener(u,()=>Sc(l),{capture:!0,once:!0});Ms(u=>{i=ne("LCP"),e=re(s,i,$o,r.reportAllChanges),bn(()=>{i.value=performance.now()-u.timeStamp,e(!0)})})}})},Go=[800,1800],en=s=>{document.prerendering?tr(()=>en(s)):document.readyState!=="complete"?addEventListener("load",()=>en(s),!0):setTimeout(s)},qg=(s,r={})=>{let t=ne("TTFB"),e=re(s,t,Go,r.reportAllChanges);en(()=>{let i=An();i&&(t.value=Math.max(i.responseStart-ui(),0),t.entries=[i],e(!0),Ms(()=>{t=ne("TTFB",0),e=re(s,t,Go,r.reportAllChanges),e(!0)}))})},Wg=(()=>{class s{onFCP(t){try{yc(t,{reportAllChanges:!0})}catch{rt.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Bg(t,{reportAllChanges:!0})}catch{rt.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{Gg(t,{reportAllChanges:!0})}catch{rt.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{qg(t,{reportAllChanges:!0})}catch{rt.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{$g(t,{reportAllChanges:!0})}catch{rt.counters.webVitalsErrors.count("INP")}}}return s})();var er=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Yg=(()=>{class s extends er{constructor(){super(...arguments),this.supportedEventTypes=[$.CHANGE],this.M_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=mt(t);return qi(i)&&csArray.prototype.indexOf.call(this.M_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var vc=(()=>{class s extends er{constructor(t){super(),this.ft=t,this.supportedEventTypes=[$.MOUSEDOWN,$.MOUSEUP,$.CLICK,$.MOUSEOVER,$.TAP,$.DRAG,$.FLICK,$.SUBMIT,$.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.ft.getEventTargetPath(t)),e}}return s})(),qo=65535,Xg=(()=>{let s;return function(r){function t(e){let i=mt(e);if(!i||!nt(i)||!Fe(i.getBoundingClientRect)||!Pt(e.pageX)||!Pt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),a=e.pageX-n.left-gt.windowOffsetX(),c=e.pageY-n.top-gt.windowOffsetY();i!==document.documentElement&&(a+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),u=Math.max(i.scrollHeight,n.height),m=Math.round(a/l*qo),d=Math.round(c/u*qo);return{xRel:m,yRel:d,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Kg=(()=>{class s extends er{constructor(t,e){super(),this.Ms=t,this.ft=e,this.supportedEventTypes=[$.MOUSEMOVE,$.CLICK],this.Jl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:a}=Xg.getRelativePosition(t);if(i){let c=this.ft.getEventTargetPath(t);c!==fe.INVALID_ELEMENT&&(e.xRel=n,e.yRel=a,e.type===$.MOUSEMOVE&&(c!==this.Jl||this.Ms.iframesTracking?(this.Jl=c,e.tgtHM=c):e.tgtHM=""))}else e.type===$.MOUSEMOVE&&(this.Jl="");return e}}return s})(),ke=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Wo=100,_c=(()=>{class s extends er{constructor(t,e,i){super(),this.f=t,this.ge=e,this.N=i,this.supportedEventTypes=[$.TAP,$.CLICK,$.SUBMIT]}k_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,on(n.parentElement)||nn(n.parentElement)||this.ge.getElementSensitiveStatus(n.parentElement)!==ke.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Wo)break;n=i.nextNode()}return!1}D_(t){let e=zr(t,"button,a");return e||(this.f.collectTargetText===Ur.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(oi(csEventtarget.apply(t))){let i=this.D_(csEventtarget.apply(t));if(i&&z(i.textContent)&&!this.k_(i)&&!this.N.hasPII(i.textContent,this.f.anonymizeDigits)){let n=zt.truncate(csString.prototype.trim.call(i.textContent),Wo);n.length>0&&(e.text=n)}}return e}}return s})();function Jg(s,r,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new Kg(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new _c(s,t,new ci)),csArray.prototype.push.call(e,new Yg,new vc(r)),e}function Qg(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new _c(s,t,new ci)),csArray.prototype.push.call(e,new vc(r)),e}var Zg=50,tm=(()=>{class s{constructor(t=[]){this.Lt=t}stringifyEvents(){return csJSON.stringify(this.Lt)}addEvent(t){csArray.prototype.push.call(this.Lt,t)}eventsCount(){return this.Lt.length}clearEvents(){this.Lt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=Zg}isEmpty(){return this.Lt.length===0}getEvents(){return this.Lt}}return s})(),em="csAnalysisEventsPersisted",Yo="v2/events",wc=["submit"],sm=(()=>{class s{constructor(t,e,i,n,a,c,l,u,m,d,y,E){this.f=t,this.nt=e,this.I=i,this.K=n,this.jt=a,this.E=c,this.Q=l,this.Ut=u,this.ut=m,this.kt=d,this.et=y,this.ge=E}init(){let t=new tm,e=this.kt.create(`${this.f.getTrackerUri()}/${Yo}`,!0,"base64");this.aa=this.L_(e),this.Ve=this.x_(t,this.aa.getRecoveryStorage(),e),this.Ve.init(),this.et.addListener(this.Ve),this.ut.addListener(this.Ve),this.E.register(wc,(i,n)=>{this.Ve.pushSubmitCommandEvent(i,n)})}onStartTracking(t){this.aa.start(),this.Ve.start(t)}onAfterNaturalPageView(){this.Ve.initStates()}onAfterArtificialPageView(){this.Ve.initStates(),this.Ve.collectInitialEvents()}onArtificialPageViewEnd(){this.Ve.clearStates(!0)}onBeforeSessionRenewal(){this.Ve.clearStates(),this.Ve.stop(),this.aa.stop()}onOptout(){this.Ve.stop(),this.aa.stop()}x_(t,e,i){var n;let a=new Ig(window),c=new Lg,l=Jg(this.f,this.K,this.ge),u=[];this.f.collectSubmit||csArray.prototype.push.call(u,"submit");let m=new Dg(l,this.K,this.jt,u),d=Qg(this.f,this.K,this.ge),y=new kg(d,this.Ut),E=new jg(new Wg),S=new Za,T,I,b,w=new sc(`${this.f.getTrackerUri()}/${Yo}`),L=new ii(this.nt,this.I),P,R,U,G;return new xg(this.f,m,y,c,a,t,w,L,this.Q,e,this.K,E,S,i,T,I,b,P,R,U,G)}L_(t){return new Vg(new Ug(em),t)}}return s})(),Li=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),im=(()=>{class s extends Lt{constructor(t,e,i,n,a){super(),this.S=t,this.et=e,this.Ql=i,this.R=n,this.Ze=a}init(){this.V_()}onStart(t){t?this.U_():this.j_()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.vf(t,e):Pt(t)&&this.R.overridePath(t,e),this.isStarted||(this.et.emitTargetingRulesArtificialPageview(this.R.getUrl()),this.R.cleanupOverrideLifespan())}j_(){this.Ze.setPageViewType(Li.Natural),this.S.emitBeforeNaturalPageView(),this.Ql.send(),this.R.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}U_(){this.Ze.setPageViewType(Li.Renewal),this.S.emitBeforeNaturalPageView(),this.Ql.send(),this.S.emitAfterNaturalPageView()}vf(t,e){this.Ze.setPageViewType(Li.Artificial),this.S.emitArtificialPageViewEnd(),Pt(t)&&this.R.overridePath(t,e),this.S.emitBeforeArtificialPageView(),this.Ql.send(),this.R.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}V_(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.vf()})}}return s})(),rm=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function nm(){return{la:rm}}var om=(()=>{class s{constructor(t,e){this.tt=t,this.Et=e,this.Zl=!1}getRequestParameters(){return{dr:this.th()}}addUrlMaskingPattern(t){this.Et.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Zl=!0}disableRemoveQueryString(){this.Zl=!1}th(){let t=this.Zl?this.tt.removeQueryString(this._f()):this._f();return this.tt.anonymizeUrl(t,{maskingPatterns:this.Et.getUrlMaskingPatterns()})}_f(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),am=99999,cm=(()=>{class s{constructor(t){this.A=t,this.H_=this.B_()&&window.CSCurrentScript}F_(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.z_(e)?null:Math.round(e.responseEnd-e.fetchStart)}z_(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.H_||this.$_()!==1)return{};let t=this.F_();return t===null?{}:{dt:`${Math.min(t,am)}`}}$_(){var t;return((t=this.A.getSession())===null||t===void 0?void 0:t.pageNumber)||null}B_(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),bc=":";function Xo(s){let r=[],t=lm(s),e=csString.prototype.split.call(t,"/");for(let i of e)Ge(i,bc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function lm(s){let r=s;return Ge(s,"/")&&(r=csString.prototype.substring.call(r,1)),li(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var hm=(()=>{class s{constructor(){this.wf=new Set,this.bf=[],this.eh=new Set,this.ih=[]}addUrlMaskingPattern(t){if(this.wf.has(t))return;this.wf.add(t);let e=Xo(t);csArray.prototype.push.call(this.bf,e)}getUrlMaskingPatterns(){return this.bf}resetPartialUrlMaskingPatterns(){this.eh.clear(),this.ih=[]}addPartialUrlMaskingPattern(t){if(this.eh.has(t))return;this.eh.add(t);let e=Xo(t);csArray.prototype.push.call(this.ih,e)}getPartialUrlMaskingPatterns(){return this.ih}}return s})(),um=["trackPageview"],Ko=["setPath"],Jo=["setQuery"],Qo=["referrer:maskUrl"],dm=["referrer:removeQueryString"],pm=["referrer:keepQueryString"],fm=(()=>{class s{constructor(t,e,i,n,a,c,l,u,m,d,y,E,S,T,I){this.f=t,this.E=e,this.S=i,this.xe=n,this.I=a,this.A=c,this.ye=l,this.At=u,this.tt=m,this.R=d,this.re=y,this.Ze=E,this.et=S,this.Xs=T,this.tr=I}init(){var t;let e=new Ts(this.f.getTrackerUri(),"pageview");this.er=new im(this.S,this.et,e,this.R,this.Ze);let i=new om(this.tt,new hm);this.er.init();let n=new ii(this.xe,this.I,gt,i,this.R,this.ye,sn,this.At,this.Ze,new cm(this.A),this.re);this.Xs&&n.addProvider(this.Xs),this.tr&&n.addProvider(this.tr);let a=this.f.isCsCrosswritingHeap();if(a||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let c=(t=this.f.heapEnvironment)===null||t===void 0?void 0:t.env_id;n.addProvider({getRequestParameters(){let l={cw:a?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(n),this.E.register(um,(c,l)=>{if(!z(c)){this.er.triggerArtificialPageView();return}this.rh(l)?this.er.triggerArtificialPageView(c,l):this.er.triggerArtificialPageView(c)}),this.E.register(Ko,(c,l)=>{if(!z(c))throw new Error(`Command misuse: ${Ko[0]}`);this.rh(l)?this.R.overridePath(c,l):this.R.overridePath(c)}),this.E.register(Jo,(c,l)=>{if(!z(c))throw new Error(`Command misuse: ${Jo[0]}`);this.rh(l)?this.R.overrideQuery(c,l):this.R.overrideQuery(c)}),this.E.register(Qo,c=>{if(!z(c))throw new Error(`Command misuse: ${Qo[0]}`);i.addUrlMaskingPattern(c)}),this.E.register(dm,()=>i.enableRemoveQueryString()),this.E.register(pm,()=>i.disableRemoveQueryString())}start(t){this.er.start(t)}onBeforeSessionRenewal(){this.er.stop()}rh(t){return Zs(t)&&t!==null}}return s})(),gm=(()=>{class s{constructor(t){this.ft=t}on(t,e){return i=>{this.ft.hasValidEventTarget(i)&&this.G_(i,t)&&e(i)}}G_(t,e){let i=mt(t);return Yt.call(i,e)}isMatchesSelectorSupported(){return!!Yt}}return s})(),mm=(()=>{class s{constructor(){}onLoad(t){this.Hi=t}onLoadCallbackExecute(){this.Hi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.q_(t)}q_(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return F([V("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),ym=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.A=i,this.rs=k.now()}resetStartTime(){this.rs=k.now()}getSessionData(){let{projectId:t}=this.f,e=this.I.getVisitor();e==null&&j.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},a=this.A.getSession();a===null&&j.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=a!=null?a:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:k.now()-this.rs}}}return s})(),Em=["clearSession"],Sm=["extendSession"];var vm=["getSessionData"],_m=["session:start:newVisitor"],wm=["session:clear:visitor"],bm=(()=>{class s{constructor(t,e,i,n){this.f=t,this.I=e,this.A=i,this.E=n}init(){this.nh=new ym(this.f,this.I,this.A),this.E.register(Em,()=>this.A.removeSession()),this.E.register(Sm,()=>this.A.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(vm,()=>this.nh.getSessionData(),{disableApplyPending:!0}),this.E.register(_m,()=>this.I.renewVisitor()),this.E.register(wm,()=>{this.I.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.I.createOrUpdateVisitor(),this.A.createOrUpdateSession()}onBeforeArtificialPageView(){this.I.createOrUpdateVisitor(),this.A.createOrUpdateSession()}onAfterNaturalPageView(){this.nh.resetStartTime()}onAfterArtificialPageView(){this.nh.resetStartTime()}onOptout(){this.I.removeVisitor(),this.A.removeSession()}onCollectStateChange(t){this.A.updateCollectState(t)}}return s})(),Am=60*1e3,Tm=30*1e3,Rm=(()=>{class s{constructor(t,e){this.A=t,this.I=e,this.oh=!1,this.W_=Ki(()=>this.A.refreshSession(),Tm)}onSessionExpired(t){this.Y_=t}isSessionValid(){return this.oh?!0:!(!this.A.hasValidSession()||this.A.pollCacheRefreshEvent()&&this.I.isSessionRenewed())}isCurrentPageviewValid(){let t=this.A.hasValidSession();return this.A.pollCacheRefreshEvent(!1)?!this.I.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.W_():this.X_()&&(this.Af=k.now(),this.renewSession())}renewSession(){this.oh=!0,this.Y_(),this.oh=!1}X_(){return!Z(this.Af)||k.now()-this.Af>Am}}return s})();var as;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(as||(as={}));function Ac(s){return s.tagDeploymentMode===as.DualCollectionReview||s.tagDeploymentMode===as.DualCollection}function Cm(s){return Ac(s)||s.tagDeploymentMode===as.LoadClicktalePtc}var Zo=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function a(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=a}(s||(s={})),s})();var Im="@ETP@",ta="@user-identifier@",Pm=(()=>{class s extends Lt{constructor(t,e,i,n){super(),this.f=t,this.Vw=e,this.de=i,this.et=n,this.ch=[],this.yi=[]}onStart(){csArray.prototype.forEach.call(this.ch,t=>this.Uf(t)),this.ch=[],csArray.prototype.forEach.call(this.yi,t=>this.jf(t)),this.yi=[]}onStop(){}Uf(t){this.Uw(t)?qs.isSupported()&&this.jw(t):this.Hw(t)}trackPageEvent(t){if(!s.Hf(t))throw new Error(`Command misuse: ${Tc[0]}`);this.isStarted?this.Uf(t):csArray.prototype.push.call(this.ch,t)}Uw(t){return Ge(t,ta)}async jw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,ta.length);if(e.length>qs.MAX_DIGEST_INPUT_SIZE){j.warn("UserIdentifier event: invalid user identifier");return}let i=await qs.digest(e);i?(this.ar={eventName:i,isETR:!1,isCustomHashId:!0},this.fa()):j.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.et.emitUserIdentifierEvent(e)}Hw(t){this.et.emitPageEvent(t),this.ar={eventName:t,isETR:!1,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===as.LoadClicktalePtc&&Zo.sendPageEvent(t)}jf(t){this.f.malkaEtrEnabled?this.Bw(t):this.Fw(t)}trackEventTriggerRecording(t){if(!s.Hf(t))throw new Error(`Command misuse: ${Rc[0]}`);this.isStarted?this.jf(t):csArray.prototype.push.call(this.yi,t)}Bw(t){Ge(t,Im)?this.et.emitEventTriggerRecording(t,Be.ETR_PAGE):this.et.emitEventTriggerRecording(t,Be.ETR_SESSION),this.ar={eventName:t,isETR:!0,isCustomHashId:!1},this.fa()}Fw(t){Cm(this.f)&&(this.et.emitEventTriggerRecording(t,Be.ETR_LEGACY),this.ar={eventName:t,isETR:!0,isCustomHashId:!1},this.fa(),this.f.tagDeploymentMode===as.LoadClicktalePtc&&Zo.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.de.compressSync(this.ar.eventName,"base64"),ct:this.de.algorithm,isETR:`${this.ar.isETR}`,isCustomHashId:`${this.ar.isCustomHashId}`}}fa(){this.Vw.send()}static Hf(t){return z(t)&&!!csString.prototype.trim.call(t)}}return s})(),Tc=["trackPageEvent"],Rc=["trackEventTriggerRecording"],Om=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.E=e,this.de=i,this.xe=n,this.et=a}init(){let t=new Ts(this.f.getTrackerUri(),"pageEvent");this.ga=new Pm(this.f,t,this.de,this.et),t.setRequestParametersProviders(this.ga,this.xe),this.E.register(Tc,e=>{this.ga.trackPageEvent(e)}),this.E.register(Rc,e=>{this.ga.trackEventTriggerRecording(e)})}onStartTracking(){this.ga.start()}}return s})(),Cc=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Nm=(()=>{class s extends Cc{constructor(){super(),this.W=new cc(t=>this.errorListener(t))}onStartTracking(){this.W.observe()}onStopTracking(){this.W.disconnect()}errorListener(t){let e=this.zw(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}$w(t){return t=t!=null?t:"[NO ERROR MESSAGE]",zt.truncate(t,s.vl,zt.ELLIPSIS)}Gw(t){return!t||Bt(t)?"":zt.truncate(t,s._l,zt.ELLIPSIS)}zw(t){return{errorType:"jsError",message:this.$w(t.message),filename:this.Gw(t.filename),lineno:t.lineno,colno:t.colno}}}return s.vl=1024,s._l=150,F([V("Event handler type: error")],s.prototype,"errorListener",null),s})(),Mm=(()=>{class s{constructor(t){this.E=t}init(){this.Bf(s.qw,Da),this.Bf(s.Ww,ka)}Bf(t,e){this.E.register([t],(i,n)=>{!z(i)||!(z(n)||ze(n))||j.error(n,`${e}${i}`)})}}return s.Ww="logSnippetError",s.qw="logImplementationSnippetError",s})(),km=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.J=e,this.Gs=i,this.ge=n,this.ut=a}init(){this.J.onChildMessage((t,e,i)=>this.ut.emitIframeEvent(t,e,i)),this.J.setSentiveStatusCallback(()=>this.ge.getSensitiveStatus()),this.J.setRecordingContextCallback(()=>this.Gs.getRecordingContext())}onStartTracking(){this.f.iframesTracking&&this.J.start()}onOptout(){this.f.iframesTracking&&this.J.stop()}onSensitiveStatusChange(){if(this.f.iframesTracking){let t=this.ge.getSensitiveStatus();this.J.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.f.iframesTracking){let t=this.Gs.getRecordingContext();this.J.onRecordingContextChange(t)}}}return s})(),Dm=(()=>{class s extends Lt{constructor(t){super(),this.f=t,this.lh=0,this.Oe=new Map,this.Ff={boundElement:window,type:"message",listener:e=>this.hh(e)}}onChildMessage(t){this.zf=t}setRecordingContextCallback(t){this.Yw=t}setSentiveStatusCallback(t){this.Xw=t}onSensitiveStatusChange(t){let e=ft.buildBaseMessage(K.SensitiveStatus,Qt.Parent,this.f.projectId);e.content=t;let i=ft.buildBaseMessage(K.SensitiveStatus,Qt.Parent,this.f.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Oe.forEach(n=>{if(n.port){let a=this.ma(n)?i:e;this.uh(n,a)}})}onRecordingContextChange(t){let e=ft.buildBaseMessage(K.RecordingContext,Qt.Parent,this.f.projectId);e.content=t,this.Oe.forEach(i=>{!this.ma(i)&&i.port&&this.uh(i,e)})}sendToChildren(t,e){let i=ft.buildBaseMessage(t,Qt.Parent,this.f.projectId);i.content=e,this.Kw(i)}onStart(){Tt(this.Ff,!1),this.$f()}onStop(){this.Jw(),Rt(this.Ff,!1),this.Qw()}$f(){let t=this.Zw();this.tb(t),csArray.prototype.forEach.call(t,e=>{if(this.eb(e)===null){let n={iframe:e};this.Oe.set(this.lh,n),this.lh+=1}}),this.sb()}Zw(){return csArray.prototype.filter.call(dt.findAllElements("iframe"),t=>this.ib(t))}tb(t){this.Oe.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.rb(i,e)})}rb(t,e){e.port&&ft.closeChannelPort(e.port),this.Oe.delete(t)}Qw(){this.Oe.forEach(t=>{t.port&&ft.closeChannelPort(t.port)}),this.Oe.clear()}eb(t){let e=null;return this.Oe.forEach((i,n)=>{e===null&&i.iframe===t&&(e=n)}),e}ib(t){return t.id!==ha&&(!t.src||ie(t.src,"about:")||pn(La(t.src),this.f.hostnames))}Kw(t){this.Oe.forEach(e=>{this.uh(e,t)})}uh(t,e){let i=e.type===K.SensitiveStatus||e.type===K.RecordingContext;t.port&&(!i||t.initialStatusSent)&&ft.sendChannelMessage(t.port,e)}sb(){this.Oe.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.nb(e);ft.sendPostMessage(t.iframe.contentWindow,"*",i)}})}Jw(){let t=this.ob();this.Oe.forEach(e=>{e.port?ft.sendChannelMessage(e.port,t):e.iframe.contentWindow&&ft.sendPostMessage(e.iframe.contentWindow,"*",t)})}nb(t){return ft.buildBaseMessage(K.Discovery,Qt.Parent,this.f.projectId,t)}ob(){return ft.buildBaseMessage(K.Stop,Qt.Parent,this.f.projectId)}ab(t,e){let i=this.Oe.get(t);if(i===void 0){j.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.lh})`);return}i.port=e,i.port.onmessage=n=>{this.ph(n,i)}}cb(t){if(!t.port)return;let e=ft.buildBaseMessage(K.SensitiveStatus,Qt.Parent,this.f.projectId),i=this.Xw();this.ma(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,ft.sendChannelMessage(t.port,e)}lb(t){if(!t.port)return;let e=ft.buildBaseMessage(K.RecordingContext,Qt.Parent,this.f.projectId),i=this.Yw();this.ma(t)&&(i.isRecording=!1),e.content=i,ft.sendChannelMessage(t.port,e)}ph(t,e){if(e===void 0){j.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,n=t.data.content;i===K.EndOfBufferedMessages?(this.cb(e),this.lb(e),e.initialStatusSent=!0):this.zf(e.iframe,i,n)}hh(t){if(ft.isMessageValid(t,Qt.Child,this.f.projectId,this.f.hostnames))switch(t.data.type){case K.Discovery:if(t.data.id===void 0){this.$f();return}if(t.ports&&t.ports.length===1&&this.Oe.has(t.data.id)){this.ab(t.data.id,t.ports[0]);return}j.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case K.ChildLogMessage:this.zf(null,K.ChildLogMessage,t.data.content);break;default:j.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}ma(t){return N.isMaskedElement(t.iframe)||N.isMaskedElementChild(t.iframe)}}return s})();var Lm="CS_ANONYMIZED_VALUE",xm=(()=>{class s{constructor(t,e){this.N=t,this.R=e}anonymize(t){return z(t.message)&&(t.message=this.mb(t.message),t.message=this.N.anonymizePII(t.message)),z(t.filename)&&(t.filename=this.R.computeOverriddenUrl(t.filename)),t}mb(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Lm}'`)}}return s})(),Vm=(()=>{class s extends Cc{constructor(t){super(),this.yb=t,this.Us=[{boundElement:document,type:"touchstart",listener:e=>this.X(e)},{boundElement:document,type:"touchmove",listener:e=>this.X(e)},{boundElement:document,type:"touchend",listener:e=>this.X(e)}],this.Un=new Yr,this.Un.onGesture((e,i)=>this.Sl(e,i))}Sl(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Us,t=>Tt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Us,t=>Rt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}X(t){this.yb.tryToExecute("process gesture event",()=>{if(this.Un.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Un.processActionDown(t);break;case"touchmove":this.Un.processActionMove();break;case"touchend":this.Un.processActionUp(t);break}})()}static isSwipe(t){return t.type===yt.FLICK||t.type===yt.DRAG}}return s})(),Um=(()=>{class s extends Lt{constructor(t,e){super(),this.B=t,this.gh=e,this.Wf=0}onStart(){j.isPerfLoggingActive()&&(this.Dn=window.csSetInterval(()=>this.Yf(),s.Eb))}onStop(){j.isPerfLoggingActive()&&(this.Yf(),csClearInterval(this.Dn))}Yf(){if(Mi.isEmpty||this.Wf>=s.Sb)return;this.Wf++;let t={a:s.vb,l:s._b,...this.gh.getRequestParameters()},e=[];Mi.forEach(i=>{csArray.prototype.forEach.call(i,n=>{csArray.prototype.push.call(e,{...n,...t})})}),this.B.send(e),Mi.clear()}}return s.vb="uxa",s._b="perf",s.Eb=5e3,s.Sb=5,s})(),jm=(()=>{class s{constructor(t,e,i){this.f=t,this.gh=e,this.kt=i}init(){this.Xf=new Um(this.kt.create(this.f.getLoggerUri(),!0),this.gh)}onStartTracking(){this.Xf.start()}onOptout(){this.Xf.stop()}}return s})(),Hm=(()=>{class s{constructor(t,e){this.ge=t,this.f=e,this.Kf=!1}enableRecordingContext(t,e,i){this.Kf=!0,this.Xi=t,this.A=e,this.En=i}getRecordingContext(){var t,e,i;if(!this.Kf)return{isRecording:!1,recordingStartTimestamp:0,etrState:Vt.ETR_OFF,etrStatus:Ht.ETR_DISABLED,collectState:D.ANALYTICS_ONLY};let n=this.A.getSession();return{isRecording:this.Xi.isRecording(),useAnonymization:this.ge.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Xi.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Xi.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Xi.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Vt.ETR_ON:Vt.ETR_OFF,etrStatus:this.En.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:D.ANALYTICS_ONLY}}}return s})(),ri=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var Bm=20,Fm="Custom Error:",zm="https://cserror.com/texterror.js",$m=(()=>{class s extends Lt{constructor(t,e,i,n,a,c){super(),this.As=t,this.Eh=e,this.nt=i,this.ue=n,this.qs=a,this.R=c,this.va=[],this.wi=0,this.ki=[]}initStates(){this.rs=k.now(),this.Eh.removeQueryParams(),this.Eh.setQueryParams(this.nt.getRequestParameters()),this.va=[],this.wi=0}onStart(){this.As.subscribe(s.xt,t=>this.X(t)),this.Sh()}onStop(){this.As.unsubscribe(s.xt)}onIframeJavascriptError(t){this.X(t)}trackCustomError(t){let e={errorType:"jsError",message:`${Fm} ${t}`,lineno:1,colno:1,filename:zm};this.Hn(e)}Hn(t){if(this.isStarted){let e=this.X(t);e&&this.qs.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.ki,t)}Sh(){this.isStarted&&(csArray.prototype.forEach.call(this.ki,t=>this.Hn(t)),this.ki=[])}X(t){if(this.isStarted&&this.wi<Bm){let e={...t,pageUrl:this.R.getAnonymizedUrl(),rt:this.Oi()};return this.ue.anonymize(e),csArray.prototype.push.call(this.va,e),this.jn(),e}return null}Oi(){return k.now()-this.rs}jn(){this.Eh.send({errors:this.va}),this.va=[],this.wi+=1}}return s.xt="JavaScriptErrorsService",s})(),Gm=["trackError"],qm="errors",Wm=(()=>{class s{constructor(t,e,i,n,a,c,l,u,m){this.As=t,this.ue=e,this.f=i,this.nt=n,this.ut=a,this.E=c,this.qs=l,this.R=u,this.kt=m}init(){let t=this.kt.create(`${this.f.getTrackerUri()}/${qm}`,!0);this.Di=new $m(this.As,t,this.nt,this.ue,this.qs,this.R),this.ut.addListener(this.Di),this.pt()}pt(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.E.register(Gm,t=>{this.Di.trackCustomError(t)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})();var Ym=(()=>{class s{constructor(){this._h=Li.Natural}setPageViewType(t){this._h=t}getPageViewType(){return this._h}getRequestParameters(){return{pvt:this._h}}}return s})(),Xm=(()=>{class s{constructor(t){this.Q=t}onAfterVisitorRenewal(){this.Q.renewSession()}}return s})();var Km=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),a=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let u=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(l==="x"?u:u&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let a=0;a<i.length;a+=1)n=csString.prototype.charCodeAt.call(i,a)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var he;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"})(he||(he={}));var Zt;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(Zt||(Zt={}));var Jm=(()=>{class s{constructor(t,e,i,n){this.ye=t,this.f=e,this.R=i,this.zn=n}init(){this.jb()}shouldMaskNonTextElements(){if(this.f.anonymisationMethod!==he.replayRecordingMaskedUrlRegexRules)return!1;if(this.f.isSMB)return this.shouldUseAnonymization();let t=this.zn.getMatchingRules(this.R.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.ye.isReplayUnanonymizedAllowedByConsent()){switch(this.f.anonymisationMethod){case null:case he.replayRecordingMaskedUrlRegex:return!!(this.f.replayRecordingMaskedUrlRegex&&this.f.replayRecordingMaskedUrlRegex.test(this.R.getAnonymizedUrl()));case he.replayRecordingMaskedUrlRegexRules:return this.zn.evaluateUrl(this.R.getAnonymizedUrl())}return!1}else{switch(this.f.anonymisationMethod){case null:case he.replayRecordingUnmaskedUrlRegex:return!(this.f.replayRecordingUnmaskedUrlRegex&&this.f.replayRecordingUnmaskedUrlRegex.test(this.R.getAnonymizedUrl()));case he.replayRecordingUnmaskedUrlRegexRules:return!this.zn.evaluateUrl(this.R.getAnonymizedUrl())}return!0}}jb(){this.f.anonymisationMethod===he.replayRecordingMaskedUrlRegexRules&&this.f.replayRecordingMaskedUrlRegexRules?this.zn.setRegexRules(this.f.replayRecordingMaskedUrlRegexRules):this.f.anonymisationMethod===he.replayRecordingUnmaskedUrlRegexRules&&this.f.replayRecordingUnmaskedUrlRegexRules&&this.zn.setRegexRules(this.f.replayRecordingUnmaskedUrlRegexRules)}}return s})(),qt;(function(s){s.REGEX="regex",s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(qt||(qt={}));var ea;(function(s){s.REGEX="regex",s.OPERATOR="operator",s.TURN_OFF="turn-off"})(ea||(ea={}));var Ic=(()=>{class s{constructor(){this.Ch=[]}setRegexRules(t){this.Ch=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.Hb(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.Ch,e=>this.sg(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Ch,e=>this.sg(t,e))}sg(t,e){var i,n;let a=this.Bb(t,e);return!this.Fb(e)||!this.zb(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(a)):!((n=e.regex)===null||n===void 0)&&n.test(a))}Fb(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}zb(t){let e=t.samplingRate!==100,i=e&&os.boolean(t.samplingRate);return!e||i}wa(t){return!ie(t,"http://")&&!ie(t,"https://")?`https://${t}`:t}Bb(t,e){let i=fn(this.wa(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}ba(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}Hb(t){let e=null,i=!1;switch(t.operator){case Zt.NOT_START:case qt.NOT_START:i=!0;case Zt.START:case qt.START:e=new csRegExp(`^${t.value}`,this.ba(t));break;case Zt.NOT_END:case qt.NOT_END:i=!0;case Zt.END:case qt.END:e=new csRegExp(`${t.value}$`,this.ba(t));break;case Zt.NOT_CONTAIN:case qt.NOT_CONTAIN:i=!0;case Zt.CONTAIN:case qt.CONTAIN:case qt.REGEX:e=new csRegExp(`${t.value}`,this.ba(t));break;case Zt.NOT_EXACT:case qt.NOT_EXACT:i=!0;case Zt.EXACT:case qt.EXACT:e=new csRegExp(`^${t.value}$`,this.ba(t));break;default:j.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.ig(t.startDate):void 0,a=t.endDate?this.ig(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:a}}ig(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})();var Qm=(()=>{class s extends oe{constructor(t){super(),this.F=null,this.Ra=null,this.M=null,this.Fs=null,this.hg=["value","checked","src","data","alt"],this.Ca={state:N.MaskedElementState.Child},this.IA=e=>{for(let i of e){if(N.isMaskedElement(i.target)||N.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let a=i.addedNodes[n];N.isMaskedElement(a)||N.isMaskedElementChild(a)||nt(a)&&this.ug(a)}for(let n=0;n<i.removedNodes.length;n+=1){let a=i.removedNodes[n];dt.isConnected(a)||this.dg(a)}}},this.PA=t}setMaskedElementSettings(t){this.Rs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.Rs||(ct.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.Rs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:a,attrSelector:c,attrSelectors:l}=this.Rs;(t=this.Fs)!==null&&t!==void 0||(this.Fs=this.OA()),a.length!==0&&((e=this.F)!==null&&e!==void 0||(this.F=this.NA()),this.F.observe(a)),c.length!==0&&((i=this.Ra)!==null&&i!==void 0||(this.Ra=this.MA(l)),this.Ra.observe(c)),(n=this.M)!==null&&n!==void 0||(this.M=new We(this.IA,(u,m)=>m==="added"&&this.kA(u))),this.M.observe(),csSetTimeout(this.PA)}onStop(){var t,e,i;this.F&&(this.dg(document),this.F.disconnect()),(t=this.Ra)===null||t===void 0||t.disconnect(),(e=this.M)===null||e===void 0||e.disconnect(),(i=this.Fs)===null||i===void 0||i.disconnect()}OA(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}NA(){return new Rs(t=>{csArray.prototype.forEach.call(t,e=>{this.DA(e)?this.ug(e):(this.LA(e),this.xA(e))})})}MA(t){return new Rs(e=>{csArray.prototype.forEach.call(e,i=>this.VA(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=N.getMaskedElementDetails(t.target);if(i.state!==N.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:et(t.target),width:e.width,height:e.height})}xA(t){!this.Fs||!nt(t)||Wi(t)||this.Fs.observe(t)}DA(t){let e=csNodeparentNode.apply(t);return e?N.isMaskedElement(e)||N.isMaskedElementChild(e):ti(t)?N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host):!1}kA(t){(N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host))&&N.setMaskedElementProperty(t,this.Ca)}dg(t){Wt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{N.unsetMaskedElementProperty(i)})}LA(t){let e=t.getBoundingClientRect(),i={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t,i),this.UA(t),Wt(t).visitAll(n=>n!=t&&N.setMaskedElementProperty(n,this.Ca))}ug(t){N.setMaskedElementProperty(t,this.Ca),Wt(t).visitAll(e=>e!=t&&N.setMaskedElementProperty(e,this.Ca))}UA(t){var e;let i=(e=W.getProperty(t,N.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.hg.length;n+=1){let a=this.hg[n];csArray.prototype.indexOf.call(i.attributes,a)===-1&&csArray.prototype.push.call(i.attributes,a)}i.attributes.length!==0&&N.setMaskedAttributeProperty(t,i)}VA(t,e){var i;let n=(i=W.getProperty(t,N.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let a=0;a<t.attributes.length;a+=1){let c=t.attributes[a].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Yt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&N.setMaskedAttributeProperty(t,n)}}return ge([V()],s.prototype,"resizeObserverCallback",null),s})(),Zm=(()=>{class s{constructor(){this.Nh=0,this.L=!1,this.pg="data-cs-capture",this.Js=t=>{for(let e of t){if(pe.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];pe.isWhitelistedElement(n)||nt(n)&&this.fg(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];dt.isConnected(n)||this.gg(n)}}}}start(){this.Nh++,!this.L&&(this.L=!0,this.jA())}jA(){this.F||(this.F=new Rs(e=>J(e,i=>this.fg(i))));let t=this.Mh?`[${this.pg}], ${this.Mh}`:`[${this.pg}]`;this.F.observe(t),this.M||(this.M=new We(this.Js,(e,i)=>i==="added"&&this.HA(e))),this.M.observe()}stop(){this.L&&(this.Nh--,this.Nh===0&&(this.L=!1,this.BA()))}BA(){this.F&&(this.gg(document),this.F.disconnect()),this.M&&this.M.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ys(t))this.Mh=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Mh}fg(t){Wt(t).visitAll(e=>{pe.whitelistElement(e)})}HA(t){pe.isWhitelistedElement(t.host)&&pe.whitelistElement(t)}gg(t){Wt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{pe.removeWhitelistElement(i)})}}return s})(),ty=(()=>{class s{constructor(){this.F=null,this.M=null,this.L=!1,this.Js=t=>{for(let e of t)if(De.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!De.isEditableNode(n)){if(Vi(n)||yh(n)){De.markEditableNode(n);continue}nt(n)&&this.mg(n)}}}}start(){this.L||(this.L=!0,this.F=new Rs(t=>J(t,e=>{this.mg(e)})),this.F.observe("[contenteditable]"),this.M=new We(this.Js,(t,e)=>e==="added"&&this.FA(t)),this.M.observe())}stop(){var t,e;this.L&&(this.L=!1,(t=this.F)===null||t===void 0||t.disconnect(),this.F=null,(e=this.M)===null||e===void 0||e.disconnect(),this.M=null)}mg(t){Wt(t).visitAll(e=>{De.markEditableNode(e)})}FA(t){De.isEditableNode(t.host)&&De.markEditableNode(t)}}return s})();var ey=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},sy=5e3,iy=(()=>{class s extends Ca{constructor(t,e,i){super(t,e),this.mr=null,this.$A=(i==null?void 0:i.type)||"json",this.Eg=i==null?void 0:i.cacheMinutes,this.kr=i==null?void 0:i.timeout}onLoad(t){this.Hi=t}onError(t){this.Mr=t}onTimeout(t,e){this.li=t,this.kr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.ic(t);let e=si.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.th(i,this.$A)}abort(){this.mr&&(this.mr.abort(),this.mr=null)}isInProgress(){return this.mr!==null}th(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var a;return(a=this.Mr)===null||a===void 0?void 0:a.call(this,n)},n.ontimeout=()=>{var a;return(a=this.li)===null||a===void 0?void 0:a.call(this,n)},n.onload=()=>{var a,c;n.status>=200&&n.status<400?((a=this.Hi)===null||a===void 0||a.call(this,this.GA(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Mr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.mr=null},n.timeout=(i=this.kr)!==null&&i!==void 0?i:sy,this.mr=n,n.send()}GA(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}ic(t){let e;this.Eg?e=`${ey(this.Eg)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var ry=(()=>{class s{constructor(t,e,i,n,a){this.lt=t,this.St=e,this.Se=i,this.Dt=n,this.it=a}getSensitiveStatus(){var t,e;return{started:this.Se.isStarted,useAnonymization:this.lt.shouldUseAnonymization(),capturedElementSelector:this.Dt.getWhitelistedElementsSelector(),maskedElementSettings:this.St.getMaskedElementSettings((t=this.lt)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.it)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Se.isStarted,i=this.lt.shouldUseAnonymization();return e?N.isMaskedElement(t)||N.isMaskedElementChild(t)?ke.MASKED:tf.shouldEncrypt(t)?ke.ENCRYPTED:De.isEditableNode(t)?ke.ANONYMIZED:i?pe.isWhitelistedElement(t)?ke.CAPTURED:ke.ANONYMIZED:ke.CAPTURED:ke.ANONYMIZED}}return s})(),ny=["setEncryptionSelectors"],Pc=["setPIISelectors"],oy=["setCapturedElementsSelector"],ay=(()=>{class s{constructor(t,e,i,n,a,c,l){this.S=t,this.E=e,this.St=i,this.Se=n,this.Dt=a,this.it=c,this.Sr=l}init(){var t,e;this.Sr&&this.it&&((t=this.Sr)===null||t===void 0||t.addSelector((e=this.it)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.pt()}onStartTracking(t){this.Se.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.Se.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Se.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Se.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.Se.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}pt(){this.E.register(Pc,t=>{this.St.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(oy,t=>{this.Dt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(ny,t=>{var e,i;(e=this.it)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Sr)===null||i===void 0||i.addSelector(t)})}}return s})(),cy=(()=>{class s extends Lt{constructor(t,e,i,n,a,c){super(),this.$t=t,this.St=e,this.Dt=i,this.Sr=n,this.vr=a,this.lt=c}onStart(){var t,e,i;this.Dt.start(),this.$t.setMaskedElementSettings(this.St.getMaskedElementSettings((t=this.lt)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.$t.startIdentifier(),(e=this.Sr)===null||e===void 0||e.start(),(i=this.vr)===null||i===void 0||i.start()}onStop(){var t,e;this.Dt.stop(),this.$t.stopIdentifier(),(t=this.Sr)===null||t===void 0||t.stop(),(e=this.vr)===null||e===void 0||e.stop()}}return s})();var sa=(()=>{let s;return function(r){function t(d,y){for(let E of d)if(i(E,y))return!0;return!1}r.isUrlMatching=t;function e(d,y){if(z(y)){for(let E of d)if(i(E,y))return!0}else if(Qn(y)){for(let E of d)if(i(E,csString(y)))return!0}return!1}r.isMatching=e;function i(d,y){let E=n(d,y);return d.negate?!E:E}function n(d,y){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(y=(new csDate(y).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return z(d.pattern)?csString.prototype.toLowerCase.call(y)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return y===d.pattern||y===csString(d.pattern);case"number":return Pt(y)?Number(y)===Number(d.pattern):!1;default:return y===d.pattern}case"starts_with":return z(d.pattern)?csString.prototype.indexOf.call(y,d.pattern)===0:!1;case"ends_with":return z(d.pattern)?li(y,d.pattern):!1;case"contains":return z(d.pattern)?csString.prototype.indexOf.call(y,d.pattern)!==-1:!1;case"regex":if(!z(d.pattern))return!1;try{return new csRegExp(d.pattern).test(y)}catch(E){return j.warn(`targeting.matchOperation.regex invalid ${E==null?void 0:E.message}`),!1}case"simple":return z(d.pattern)?m(y)===m(d.pattern):!1;case"greater_than":return Number(y)>Number(d.pattern);case"less_than":return Number(y)<Number(d.pattern);case"exact_date":{let E=Number(d.pattern);if(!te(E))return!1;let S=new csDate(E*1e3);return new csDate(y).toDateString()===S.toDateString()}case"exact_days_ago":return a(d,y);case"more_than_days_ago":return c(d,y);case"less_than_days_ago":return l(d,y);case"unknown":return u(y);default:return j.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function a(d,y){let E=new csDate,S=E.setDate(E.getDate()-Number(d.pattern)),T=new csDate(S);return new csDate(y).toDateString()===T.toDateString()}function c(d,y){let E=Number(d.pattern);if(!te(E))return!1;let S=Number(E)+1,T=new csDate,I=new csDate(T);return I.setDate(T.getDate()-S),new csDate(y).getTime()<=I.getTime()}function l(d,y){let E=Number(d.pattern);if(!te(E))return!1;if(E===0)return a(d,y);let S=new csDate,T=new csDate(S);return T.setDate(S.getDate()-E),new csDate(y).getTime()>=T.getTime()}function u(d){return Pt(d)?z(d)?csString.prototype.trim.call(d)==="":Qn(d)?d===!0:te(d)?d!==0:!1:!0}function m(d){let y=ie(d,"http://")||ie(d,"https://")?d:`https://${d}`,E=fn(y);return E!==null?csString.prototype.replace.call(E.host,/^www./,""):d}}(s||(s={})),s})(),ly=(()=>{class s{constructor(){this.Ag=[],this.Tg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Ag,e):e.component==="trigger"&&csArray.prototype.push.call(this.Tg,e)}matchUrl(t){return sa.isUrlMatching(this.Ag,t)}matchTrigger(t){return sa.isMatching(this.Tg,t)}}return s})(),hy=(()=>{class s extends Lt{constructor(t,e,i){super(),this.Pa=t,this.jh=e,this.R=i}init(){this.Hh=new ly,this.Pa&&this.Hh.setTargetingRules(this.Pa)}onStart(){}checkInitialUrlTargetingRules(){let t=this.R.getAnonymizedUrl();this.Bh(t,"url")&&this.jh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Bh(t,"url")&&this.jh()}onExternalEvent(t){this.isStarted&&this.Bh(t.name,"trigger")&&this.jh()}Bh(t,e){var i,n;return e==="url"&&z(t)&&(!((i=this.Hh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Hh)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),uy=(()=>{class s{constructor(t,e,i,n,a,c){this.Pa=t,this.nT=e,this.S=i,this.ht=n,this.et=a,this.R=c}init(){this.Gn=new hy(this.Pa,this.nT,this.R),this.et.addListener(this.Gn),this.Gn.init()}start(){this.Gn.start()}stop(){this.Gn.stop()}checkInitialUrlTargetingRules(){this.Gn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.ht.getInitialCollectState();t===D.ANALYTICS_ONLY?this.S.emitCollectStateChange(D.ANALYTICS_ONLY_RULES_TARGETING,Vt.ETR_OFF):t===D.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(D.RECORDING_RULES_TARGETING,Vt.ETR_OFF)}}return s})();var dy=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),py=(()=>{class s{constructor(){}static init(t){(!this.Fh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Fh=new Map,i){let n=csString.prototype.split.call(i,".");for(let a=0;a<n.length;a++){let[c,l]=csString.prototype.split.call(n[a],"=");this.Fh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Fh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(dy.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var a;let c=i.toString(),l=`${(a=e.constructor)===null||a===void 0?void 0:a.name}.${c}`,u=n.value;fy(s.getString("debugLog"),t)&&(n.value=function(...m){return console.log(l,...m),u.bind(this)(...m)})}}}return s})();function fy(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function ia(){function i(o){let p=o.length;for(;--p>=0;)o[p]=0}let n=0,a=1,c=2,l=3,u=258,m=29,d=256,y=d+1+m,E=30,S=19,T=2*y+1,I=15,b=16,w=7,L=256,P=16,R=17,U=18,G=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),lt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Nt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),wt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=512,O=new Array((y+2)*2);i(O);let x=new Array(E*2);i(x);let H=new Array(v);i(H);let tt=new Array(u-l+1);i(tt);let ht=new Array(m);i(ht);let bt=new Array(E);i(bt);function me(o,p,f,g,h){this.static_tree=o,this.extra_bits=p,this.extra_base=f,this.elems=g,this.max_length=h,this.has_stree=o&&o.length}let Ye,sr,hs;function us(o,p){this.dyn_tree=o,this.max_code=0,this.stat_desc=p}let ks=o=>o<256?H[o]:H[256+(o>>>7)],ae=(o,p)=>{o.pending_buf[o.pending++]=p&255,o.pending_buf[o.pending++]=p>>>8&255},Et=(o,p,f)=>{o.bi_valid>b-f?(o.bi_buf|=p<<o.bi_valid&65535,ae(o,o.bi_buf),o.bi_buf=p>>b-o.bi_valid,o.bi_valid+=f-b):(o.bi_buf|=p<<o.bi_valid&65535,o.bi_valid+=f)},Mt=(o,p,f)=>{Et(o,f[p*2],f[p*2+1])},Ds=(o,p)=>{let f=0;do f|=o&1,o>>>=1,f<<=1;while(--p>0);return f>>>1},ir=o=>{o.bi_valid===16?(ae(o,o.bi_buf),o.bi_buf=0,o.bi_valid=0):o.bi_valid>=8&&(o.pending_buf[o.pending++]=o.bi_buf&255,o.bi_buf>>=8,o.bi_valid-=8)},rr=(o,p)=>{let f=p.dyn_tree,g=p.max_code,h=p.stat_desc.static_tree,A=p.stat_desc.has_stree,_=p.stat_desc.extra_bits,C=p.stat_desc.extra_base,X=p.stat_desc.max_length,B,xt,Te,st,Ze,fs,wi=0;for(st=0;st<=I;st++)o.bl_count[st]=0;for(f[o.heap[o.heap_max]*2+1]=0,B=o.heap_max+1;B<T;B++)xt=o.heap[B],st=f[f[xt*2+1]*2+1]+1,st>X&&(st=X,wi++),f[xt*2+1]=st,!(xt>g)&&(o.bl_count[st]++,Ze=0,xt>=C&&(Ze=_[xt-C]),fs=f[xt*2],o.opt_len+=fs*(st+Ze),A&&(o.static_len+=fs*(h[xt*2+1]+Ze)));if(wi!==0){do{for(st=X-1;o.bl_count[st]===0;)st--;o.bl_count[st]--,o.bl_count[st+1]+=2,o.bl_count[X]--,wi-=2}while(wi>0);for(st=X;st!==0;st--)for(xt=o.bl_count[st];xt!==0;)Te=o.heap[--B],!(Te>g)&&(f[Te*2+1]!==st&&(o.opt_len+=(st-f[Te*2+1])*f[Te*2],f[Te*2+1]=st),xt--)}},Ls=(o,p,f)=>{let g=new Array(I+1),h=0,A,_;for(A=1;A<=I;A++)g[A]=h=h+f[A-1]<<1;for(_=0;_<=p;_++){let C=o[_*2+1];C!==0&&(o[_*2]=Ds(g[C]++,C))}},Pn=()=>{let o,p,f,g,h,A=new Array(I+1);for(f=0,g=0;g<m-1;g++)for(ht[g]=f,o=0;o<1<<G[g];o++)tt[f++]=g;for(tt[f-1]=g,h=0,g=0;g<16;g++)for(bt[g]=h,o=0;o<1<<lt[g];o++)H[h++]=g;for(h>>=7;g<E;g++)for(bt[g]=h<<7,o=0;o<1<<lt[g]-7;o++)H[256+h++]=g;for(p=0;p<=I;p++)A[p]=0;for(o=0;o<=143;)O[o*2+1]=8,o++,A[8]++;for(;o<=255;)O[o*2+1]=9,o++,A[9]++;for(;o<=279;)O[o*2+1]=7,o++,A[7]++;for(;o<=287;)O[o*2+1]=8,o++,A[8]++;for(Ls(O,y+1,A),o=0;o<E;o++)x[o*2+1]=5,x[o*2]=Ds(o,5);Ye=new me(O,G,d+1,y,I),sr=new me(x,lt,0,E,I),hs=new me(new Array(0),Nt,0,S,w)},On=o=>{let p;for(p=0;p<y;p++)o.dyn_ltree[p*2]=0;for(p=0;p<E;p++)o.dyn_dtree[p*2]=0;for(p=0;p<S;p++)o.bl_tree[p*2]=0;o.dyn_ltree[L*2]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},Nn=o=>{o.bi_valid>8?ae(o,o.bi_buf):o.bi_valid>0&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},xc=(o,p,f,g)=>{Nn(o),g&&(ae(o,f),ae(o,~f)),o.pending_buf.set(o.window.subarray(p,p+f),o.pending),o.pending+=f},Mn=(o,p,f,g)=>{let h=p*2,A=f*2;return o[h]<o[A]||o[h]===o[A]&&g[p]<=g[f]},nr=(o,p,f)=>{let g=o.heap[f],h=f<<1;for(;h<=o.heap_len&&(h<o.heap_len&&Mn(p,o.heap[h+1],o.heap[h],o.depth)&&h++,!Mn(p,g,o.heap[h],o.depth));)o.heap[f]=o.heap[h],f=h,h<<=1;o.heap[f]=g},kn=(o,p,f)=>{let g,h,A=0,_,C;if(o.last_lit!==0)do g=o.pending_buf[o.d_buf+A*2]<<8|o.pending_buf[o.d_buf+A*2+1],h=o.pending_buf[o.l_buf+A],A++,g===0?Mt(o,h,p):(_=tt[h],Mt(o,_+d+1,p),C=G[_],C!==0&&(h-=ht[_],Et(o,h,C)),g--,_=ks(g),Mt(o,_,f),C=lt[_],C!==0&&(g-=bt[_],Et(o,g,C)));while(A<o.last_lit);Mt(o,L,p)},or=(o,p)=>{let f=p.dyn_tree,g=p.stat_desc.static_tree,h=p.stat_desc.has_stree,A=p.stat_desc.elems,_,C,X=-1,B;for(o.heap_len=0,o.heap_max=T,_=0;_<A;_++)f[_*2]!==0?(o.heap[++o.heap_len]=X=_,o.depth[_]=0):f[_*2+1]=0;for(;o.heap_len<2;)B=o.heap[++o.heap_len]=X<2?++X:0,f[B*2]=1,o.depth[B]=0,o.opt_len--,h&&(o.static_len-=g[B*2+1]);for(p.max_code=X,_=o.heap_len>>1;_>=1;_--)nr(o,f,_);B=A;do _=o.heap[1],o.heap[1]=o.heap[o.heap_len--],nr(o,f,1),C=o.heap[1],o.heap[--o.heap_max]=_,o.heap[--o.heap_max]=C,f[B*2]=f[_*2]+f[C*2],o.depth[B]=(o.depth[_]>=o.depth[C]?o.depth[_]:o.depth[C])+1,f[_*2+1]=f[C*2+1]=B,o.heap[1]=B++,nr(o,f,1);while(o.heap_len>=2);o.heap[--o.heap_max]=o.heap[1],rr(o,p),Ls(f,X,o.bl_count)},Dn=(o,p,f)=>{let g,h=-1,A,_=p[0*2+1],C=0,X=7,B=4;for(_===0&&(X=138,B=3),p[(f+1)*2+1]=65535,g=0;g<=f;g++)A=_,_=p[(g+1)*2+1],!(++C<X&&A===_)&&(C<B?o.bl_tree[A*2]+=C:A!==0?(A!==h&&o.bl_tree[A*2]++,o.bl_tree[P*2]++):C<=10?o.bl_tree[R*2]++:o.bl_tree[U*2]++,C=0,h=A,_===0?(X=138,B=3):A===_?(X=6,B=3):(X=7,B=4))},Ln=(o,p,f)=>{let g,h=-1,A,_=p[0*2+1],C=0,X=7,B=4;for(_===0&&(X=138,B=3),g=0;g<=f;g++)if(A=_,_=p[(g+1)*2+1],!(++C<X&&A===_)){if(C<B)do Mt(o,A,o.bl_tree);while(--C!==0);else A!==0?(A!==h&&(Mt(o,A,o.bl_tree),C--),Mt(o,P,o.bl_tree),Et(o,C-3,2)):C<=10?(Mt(o,R,o.bl_tree),Et(o,C-3,3)):(Mt(o,U,o.bl_tree),Et(o,C-11,7));C=0,h=A,_===0?(X=138,B=3):A===_?(X=6,B=3):(X=7,B=4)}},Vc=o=>{let p;for(Dn(o,o.dyn_ltree,o.l_desc.max_code),Dn(o,o.dyn_dtree,o.d_desc.max_code),or(o,o.bl_desc),p=S-1;p>=3&&o.bl_tree[wt[p]*2+1]===0;p--);return o.opt_len+=3*(p+1)+5+5+4,p},Uc=(o,p,f,g)=>{let h;for(Et(o,p-257,5),Et(o,f-1,5),Et(o,g-4,4),h=0;h<g;h++)Et(o,o.bl_tree[wt[h]*2+1],3);Ln(o,o.dyn_ltree,p-1),Ln(o,o.dyn_dtree,f-1)},jc=o=>{let p=4093624447,f;for(f=0;f<=31;f++,p>>>=1)if(p&1&&o.dyn_ltree[f*2]!==0)return 0;if(o.dyn_ltree[9*2]!==0||o.dyn_ltree[10*2]!==0||o.dyn_ltree[13*2]!==0)return 1;for(f=32;f<d;f++)if(o.dyn_ltree[f*2]!==0)return 1;return 0},xn=!1,Hc=o=>{xn||(Pn(),xn=!0),o.l_desc=new us(o.dyn_ltree,Ye),o.d_desc=new us(o.dyn_dtree,sr),o.bl_desc=new us(o.bl_tree,hs),o.bi_buf=0,o.bi_valid=0,On(o)},Vn=(o,p,f,g)=>{Et(o,(n<<1)+(g?1:0),3),xc(o,p,f,!0)},Bc=o=>{Et(o,a<<1,3),Mt(o,L,O),ir(o)},Fc=(o,p,f,g)=>{let h,A,_=0;o.level>0?(o.strm.data_type===2&&(o.strm.data_type=jc(o)),or(o,o.l_desc),or(o,o.d_desc),_=Vc(o),h=o.opt_len+3+7>>>3,A=o.static_len+3+7>>>3,A<=h&&(h=A)):h=A=f+5,f+4<=h&&p!==-1?Vn(o,p,f,g):o.strategy===4||A===h?(Et(o,(a<<1)+(g?1:0),3),kn(o,O,x)):(Et(o,(c<<1)+(g?1:0),3),Uc(o,o.l_desc.max_code+1,o.d_desc.max_code+1,_+1),kn(o,o.dyn_ltree,o.dyn_dtree)),On(o),g&&Nn(o)},zc=(o,p,f)=>(o.pending_buf[o.d_buf+o.last_lit*2]=p>>>8&255,o.pending_buf[o.d_buf+o.last_lit*2+1]=p&255,o.pending_buf[o.l_buf+o.last_lit]=f&255,o.last_lit++,p===0?o.dyn_ltree[f*2]++:(o.matches++,p--,o.dyn_ltree[(tt[f]+d+1)*2]++,o.dyn_dtree[ks(p)*2]++),o.last_lit===o.lit_bufsize-1);var $c=Hc,Gc=Vn,qc=Fc,Wc=zc,Yc=Bc,Xc={_tr_init:$c,_tr_stored_block:Gc,_tr_flush_block:qc,_tr_tally:Wc,_tr_align:Yc},Un=(o,p,f,g)=>{let h=o&65535|0,A=o>>>16&65535|0,_=0;for(;f!==0;){_=f>2e3?2e3:f,f-=_;do h=h+p[g++]|0,A=A+h|0;while(--_);h%=65521,A%=65521}return h|A<<16|0};let Kc=()=>{let o,p=[];for(var f=0;f<256;f++){o=f;for(var g=0;g<8;g++)o=o&1?3988292384^o>>>1:o>>>1;p[f]=o}return p},Jc=new Uint32Array(Kc());var ye=(o,p,f,g)=>{let h=Jc,A=g+f;o^=-1;for(let _=g;_<A;_++)o=o>>>8^h[(o^p[_])&255];return o^-1},pi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Qc,_tr_stored_block:Zc,_tr_flush_block:tl,_tr_tally:Ee,_tr_align:el}=Xc,{Z_NO_FLUSH:Xe,Z_PARTIAL_FLUSH:sl,Z_FULL_FLUSH:il,Z_FINISH:Se,Z_BLOCK:Hn,Z_OK:Xt,Z_STREAM_END:Bn,Z_STREAM_ERROR:jt,Z_DATA_ERROR:rl,Z_BUF_ERROR:ar,Z_DEFAULT_COMPRESSION:nl,Z_FILTERED:ol,Z_HUFFMAN_ONLY:fi,Z_RLE:al,Z_FIXED:cl,Z_DEFAULT_STRATEGY:ll,Z_UNKNOWN:hl,Z_DEFLATED:gi}=jn,ul=9,dl=15,pl=8,cr=256+1+29,fl=30,gl=19,ml=2*cr+1,yl=15,Y=3,ve=258,$t=ve+Y+1,El=32,mi=42,lr=69,yi=73,Ei=91,Si=103,Ke=113,xs=666,pt=1,Vs=2,Je=3,ds=4,Sl=3,_e=(o,p)=>(o.msg=pi[p],p),Fn=o=>(o<<1)-(o>4?9:0),we=o=>{let p=o.length;for(;--p>=0;)o[p]=0},be=(o,p,f)=>(p<<o.hash_shift^f)&o.hash_mask,Ae=o=>{let p=o.state,f=p.pending;f>o.avail_out&&(f=o.avail_out),f!==0&&(o.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+f),o.next_out),o.next_out+=f,p.pending_out+=f,o.total_out+=f,o.avail_out-=f,p.pending-=f,p.pending===0&&(p.pending_out=0))},St=(o,p)=>{tl(o,o.block_start>=0?o.block_start:-1,o.strstart-o.block_start,p),o.block_start=o.strstart,Ae(o.strm)},Q=(o,p)=>{o.pending_buf[o.pending++]=p},Us=(o,p)=>{o.pending_buf[o.pending++]=p>>>8&255,o.pending_buf[o.pending++]=p&255},vl=(o,p,f,g)=>{let h=o.avail_in;return h>g&&(h=g),h===0?0:(o.avail_in-=h,p.set(o.input.subarray(o.next_in,o.next_in+h),f),o.state.wrap===1?o.adler=Un(o.adler,p,h,f):o.state.wrap===2&&(o.adler=ye(o.adler,p,h,f)),o.next_in+=h,o.total_in+=h,h)},zn=(o,p)=>{let f=o.max_chain_length,g=o.strstart,h,A,_=o.prev_length,C=o.nice_match,X=o.strstart>o.w_size-$t?o.strstart-(o.w_size-$t):0,B=o.window,xt=o.w_mask,Te=o.prev,st=o.strstart+ve,Ze=B[g+_-1],fs=B[g+_];o.prev_length>=o.good_match&&(f>>=2),C>o.lookahead&&(C=o.lookahead);do if(h=p,!(B[h+_]!==fs||B[h+_-1]!==Ze||B[h]!==B[g]||B[++h]!==B[g+1])){g+=2,h++;do;while(B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&g<st);if(A=ve-(st-g),g=st-ve,A>_){if(o.match_start=p,_=A,A>=C)break;Ze=B[g+_-1],fs=B[g+_]}}while((p=Te[p&xt])>X&&--f!==0);return _<=o.lookahead?_:o.lookahead},Qe=o=>{let p=o.w_size,f,g,h,A,_;do{if(A=o.window_size-o.lookahead-o.strstart,o.strstart>=p+(p-$t)){o.window.set(o.window.subarray(p,p+p),0),o.match_start-=p,o.strstart-=p,o.block_start-=p,g=o.hash_size,f=g;do h=o.head[--f],o.head[f]=h>=p?h-p:0;while(--g);g=p,f=g;do h=o.prev[--f],o.prev[f]=h>=p?h-p:0;while(--g);A+=p}if(o.strm.avail_in===0)break;if(g=vl(o.strm,o.window,o.strstart+o.lookahead,A),o.lookahead+=g,o.lookahead+o.insert>=Y)for(_=o.strstart-o.insert,o.ins_h=o.window[_],o.ins_h=be(o,o.ins_h,o.window[_+1]);o.insert&&(o.ins_h=be(o,o.ins_h,o.window[_+Y-1]),o.prev[_&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=_,_++,o.insert--,!(o.lookahead+o.insert<Y)););}while(o.lookahead<$t&&o.strm.avail_in!==0)},_l=(o,p)=>{let f=65535;for(f>o.pending_buf_size-5&&(f=o.pending_buf_size-5);;){if(o.lookahead<=1){if(Qe(o),o.lookahead===0&&p===Xe)return pt;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;let g=o.block_start+f;if((o.strstart===0||o.strstart>=g)&&(o.lookahead=o.strstart-g,o.strstart=g,St(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-$t&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===Se?(St(o,!0),o.strm.avail_out===0?Je:ds):(o.strstart>o.block_start&&(St(o,!1),o.strm.avail_out===0),pt)},hr=(o,p)=>{let f,g;for(;;){if(o.lookahead<$t){if(Qe(o),o.lookahead<$t&&p===Xe)return pt;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),f!==0&&o.strstart-f<=o.w_size-$t&&(o.match_length=zn(o,f)),o.match_length>=Y)if(g=Ee(o,o.strstart-o.match_start,o.match_length-Y),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=Y){o.match_length--;do o.strstart++,o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!==0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=be(o,o.ins_h,o.window[o.strstart+1]);else g=Ee(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(g&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=o.strstart<Y-1?o.strstart:Y-1,p===Se?(St(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:Vs},ps=(o,p)=>{let f,g,h;for(;;){if(o.lookahead<$t){if(Qe(o),o.lookahead<$t&&p===Xe)return pt;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=Y-1,f!==0&&o.prev_length<o.max_lazy_match&&o.strstart-f<=o.w_size-$t&&(o.match_length=zn(o,f),o.match_length<=5&&(o.strategy===ol||o.match_length===Y&&o.strstart-o.match_start>4096)&&(o.match_length=Y-1)),o.prev_length>=Y&&o.match_length<=o.prev_length){h=o.strstart+o.lookahead-Y,g=Ee(o,o.strstart-1-o.prev_match,o.prev_length-Y),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=h&&(o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!==0);if(o.match_available=0,o.match_length=Y-1,o.strstart++,g&&(St(o,!1),o.strm.avail_out===0))return pt}else if(o.match_available){if(g=Ee(o,0,o.window[o.strstart-1]),g&&St(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return pt}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(g=Ee(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<Y-1?o.strstart:Y-1,p===Se?(St(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:Vs},wl=(o,p)=>{let f,g,h,A,_=o.window;for(;;){if(o.lookahead<=ve){if(Qe(o),o.lookahead<=ve&&p===Xe)return pt;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=Y&&o.strstart>0&&(h=o.strstart-1,g=_[h],g===_[++h]&&g===_[++h]&&g===_[++h])){A=o.strstart+ve;do;while(g===_[++h]&&g===_[++h]&&g===_[++h]&&g===_[++h]&&g===_[++h]&&g===_[++h]&&g===_[++h]&&g===_[++h]&&h<A);o.match_length=ve-(A-h),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=Y?(f=Ee(o,1,o.match_length-Y),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(f=Ee(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),f&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===Se?(St(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:Vs},bl=(o,p)=>{let f;for(;;){if(o.lookahead===0&&(Qe(o),o.lookahead===0)){if(p===Xe)return pt;break}if(o.match_length=0,f=Ee(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,f&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===Se?(St(o,!0),o.strm.avail_out===0?Je:ds):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:Vs};function Kt(o,p,f,g,h){this.good_length=o,this.max_lazy=p,this.nice_length=f,this.max_chain=g,this.func=h}let js=[new Kt(0,0,0,0,_l),new Kt(4,4,8,4,hr),new Kt(4,5,16,8,hr),new Kt(4,6,32,32,hr),new Kt(4,4,16,16,ps),new Kt(8,16,32,32,ps),new Kt(8,16,128,128,ps),new Kt(8,32,128,256,ps),new Kt(32,128,258,1024,ps),new Kt(32,258,258,4096,ps)],Al=o=>{o.window_size=2*o.w_size,we(o.head),o.max_lazy_match=js[o.level].max_lazy,o.good_match=js[o.level].good_length,o.nice_match=js[o.level].nice_length,o.max_chain_length=js[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=Y-1,o.match_available=0,o.ins_h=0};function Tl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=gi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ml*2),this.dyn_dtree=new Uint16Array((2*fl+1)*2),this.bl_tree=new Uint16Array((2*gl+1)*2),we(this.dyn_ltree),we(this.dyn_dtree),we(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(yl+1),this.heap=new Uint16Array(2*cr+1),we(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*cr+1),we(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let $n=o=>{if(!o||!o.state)return _e(o,jt);o.total_in=o.total_out=0,o.data_type=hl;let p=o.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?mi:Ke,o.adler=p.wrap===2?0:1,p.last_flush=Xe,Qc(p),Xt},Gn=o=>{let p=$n(o);return p===Xt&&Al(o.state),p},Rl=(o,p)=>!o||!o.state||o.state.wrap!==2?jt:(o.state.gzhead=p,Xt),qn=(o,p,f,g,h,A)=>{if(!o)return jt;let _=1;if(p===nl&&(p=6),g<0?(_=0,g=-g):g>15&&(_=2,g-=16),h<1||h>ul||f!==gi||g<8||g>15||p<0||p>9||A<0||A>cl)return _e(o,jt);g===8&&(g=9);let C=new Tl;return o.state=C,C.strm=o,C.wrap=_,C.gzhead=null,C.w_bits=g,C.w_size=1<<C.w_bits,C.w_mask=C.w_size-1,C.hash_bits=h+7,C.hash_size=1<<C.hash_bits,C.hash_mask=C.hash_size-1,C.hash_shift=~~((C.hash_bits+Y-1)/Y),C.window=new Uint8Array(C.w_size*2),C.head=new Uint16Array(C.hash_size),C.prev=new Uint16Array(C.w_size),C.lit_bufsize=1<<h+6,C.pending_buf_size=C.lit_bufsize*4,C.pending_buf=new Uint8Array(C.pending_buf_size),C.d_buf=1*C.lit_bufsize,C.l_buf=3*C.lit_bufsize,C.level=p,C.strategy=A,C.method=f,Gn(o)},Cl=(o,p)=>qn(o,p,gi,dl,pl,ll),Il=(o,p)=>{let f,g;if(!o||!o.state||p>Hn||p<0)return o?_e(o,jt):jt;let h=o.state;if(!o.output||!o.input&&o.avail_in!==0||h.status===xs&&p!==Se)return _e(o,o.avail_out===0?ar:jt);h.strm=o;let A=h.last_flush;if(h.last_flush=p,h.status===mi)if(h.wrap===2)o.adler=0,Q(h,31),Q(h,139),Q(h,8),h.gzhead?(Q(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),Q(h,h.gzhead.time&255),Q(h,h.gzhead.time>>8&255),Q(h,h.gzhead.time>>16&255),Q(h,h.gzhead.time>>24&255),Q(h,h.level===9?2:h.strategy>=fi||h.level<2?4:0),Q(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(Q(h,h.gzhead.extra.length&255),Q(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(o.adler=ye(o.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=lr):(Q(h,0),Q(h,0),Q(h,0),Q(h,0),Q(h,0),Q(h,h.level===9?2:h.strategy>=fi||h.level<2?4:0),Q(h,Sl),h.status=Ke);else{let _=gi+(h.w_bits-8<<4)<<8,C=-1;h.strategy>=fi||h.level<2?C=0:h.level<6?C=1:h.level===6?C=2:C=3,_|=C<<6,h.strstart!==0&&(_|=El),_+=31-_%31,h.status=Ke,Us(h,_),h.strstart!==0&&(Us(h,o.adler>>>16),Us(h,o.adler&65535)),o.adler=1}if(h.status===lr)if(h.gzhead.extra){for(f=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&!(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ye(o.adler,h.pending_buf,h.pending-f,f)),Ae(o),f=h.pending,h.pending===h.pending_buf_size));)Q(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>f&&(o.adler=ye(o.adler,h.pending_buf,h.pending-f,f)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=yi)}else h.status=yi;if(h.status===yi)if(h.gzhead.name){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ye(o.adler,h.pending_buf,h.pending-f,f)),Ae(o),f=h.pending,h.pending===h.pending_buf_size)){g=1;break}h.gzindex<h.gzhead.name.length?g=h.gzhead.name.charCodeAt(h.gzindex++)&255:g=0,Q(h,g)}while(g!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=ye(o.adler,h.pending_buf,h.pending-f,f)),g===0&&(h.gzindex=0,h.status=Ei)}else h.status=Ei;if(h.status===Ei)if(h.gzhead.comment){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ye(o.adler,h.pending_buf,h.pending-f,f)),Ae(o),f=h.pending,h.pending===h.pending_buf_size)){g=1;break}h.gzindex<h.gzhead.comment.length?g=h.gzhead.comment.charCodeAt(h.gzindex++)&255:g=0,Q(h,g)}while(g!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=ye(o.adler,h.pending_buf,h.pending-f,f)),g===0&&(h.status=Si)}else h.status=Si;if(h.status===Si&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&Ae(o),h.pending+2<=h.pending_buf_size&&(Q(h,o.adler&255),Q(h,o.adler>>8&255),o.adler=0,h.status=Ke)):h.status=Ke),h.pending!==0){if(Ae(o),o.avail_out===0)return h.last_flush=-1,Xt}else if(o.avail_in===0&&Fn(p)<=Fn(A)&&p!==Se)return _e(o,ar);if(h.status===xs&&o.avail_in!==0)return _e(o,ar);if(o.avail_in!==0||h.lookahead!==0||p!==Xe&&h.status!==xs){let _=h.strategy===fi?bl(h,p):h.strategy===al?wl(h,p):js[h.level].func(h,p);if((_===Je||_===ds)&&(h.status=xs),_===pt||_===Je)return o.avail_out===0&&(h.last_flush=-1),Xt;if(_===Vs&&(p===sl?el(h):p!==Hn&&(Zc(h,0,0,!1),p===il&&(we(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),Ae(o),o.avail_out===0))return h.last_flush=-1,Xt}return p!==Se?Xt:h.wrap<=0?Bn:(h.wrap===2?(Q(h,o.adler&255),Q(h,o.adler>>8&255),Q(h,o.adler>>16&255),Q(h,o.adler>>24&255),Q(h,o.total_in&255),Q(h,o.total_in>>8&255),Q(h,o.total_in>>16&255),Q(h,o.total_in>>24&255)):(Us(h,o.adler>>>16),Us(h,o.adler&65535)),Ae(o),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?Xt:Bn)},Pl=o=>{if(!o||!o.state)return jt;let p=o.state.status;return p!==mi&&p!==lr&&p!==yi&&p!==Ei&&p!==Si&&p!==Ke&&p!==xs?_e(o,jt):(o.state=null,p===Ke?_e(o,rl):Xt)},Ol=(o,p)=>{let f=p.length;if(!o||!o.state)return jt;let g=o.state,h=g.wrap;if(h===2||h===1&&g.status!==mi||g.lookahead)return jt;if(h===1&&(o.adler=Un(o.adler,p,f,0)),g.wrap=0,f>=g.w_size){h===0&&(we(g.head),g.strstart=0,g.block_start=0,g.insert=0);let X=new Uint8Array(g.w_size);X.set(p.subarray(f-g.w_size,f),0),p=X,f=g.w_size}let A=o.avail_in,_=o.next_in,C=o.input;for(o.avail_in=f,o.next_in=0,o.input=p,Qe(g);g.lookahead>=Y;){let X=g.strstart,B=g.lookahead-(Y-1);do g.ins_h=be(g,g.ins_h,g.window[X+Y-1]),g.prev[X&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=X,X++;while(--B);g.strstart=X,g.lookahead=Y-1,Qe(g)}return g.strstart+=g.lookahead,g.block_start=g.strstart,g.insert=g.lookahead,g.lookahead=0,g.match_length=g.prev_length=Y-1,g.match_available=0,o.next_in=_,o.input=C,o.avail_in=A,g.wrap=h,Xt};var Nl=Cl,Ml=qn,kl=Gn,Dl=$n,Ll=Rl,xl=Il,Vl=Pl,Ul=Ol,jl="pako deflate (from Nodeca project)",Hs={deflateInit:Nl,deflateInit2:Ml,deflateReset:kl,deflateResetKeep:Dl,deflateSetHeader:Ll,deflate:xl,deflateEnd:Vl,deflateSetDictionary:Ul,deflateInfo:jl};let Hl=(o,p)=>Object.prototype.hasOwnProperty.call(o,p);var Bl=function(o){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let f=p.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let g in f)Hl(f,g)&&(o[g]=f[g])}}return o},Fl=o=>{let p=0;for(let g=0,h=o.length;g<h;g++)p+=o[g].length;let f=new Uint8Array(p);for(let g=0,h=0,A=o.length;g<A;g++){let _=o[g];f.set(_,h),h+=_.length}return f},Wn={assign:Bl,flattenChunks:Fl};let Yn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Yn=!1}let Bs=new Uint8Array(256);for(let o=0;o<256;o++)Bs[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;Bs[254]=Bs[254]=1;var zl=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let p,f,g,h,A,_=o.length,C=0;for(h=0;h<_;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<_&&(g=o.charCodeAt(h+1),(g&64512)===56320&&(f=65536+(f-55296<<10)+(g-56320),h++)),C+=f<128?1:f<2048?2:f<65536?3:4;for(p=new Uint8Array(C),A=0,h=0;A<C;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<_&&(g=o.charCodeAt(h+1),(g&64512)===56320&&(f=65536+(f-55296<<10)+(g-56320),h++)),f<128?p[A++]=f:f<2048?(p[A++]=192|f>>>6,p[A++]=128|f&63):f<65536?(p[A++]=224|f>>>12,p[A++]=128|f>>>6&63,p[A++]=128|f&63):(p[A++]=240|f>>>18,p[A++]=128|f>>>12&63,p[A++]=128|f>>>6&63,p[A++]=128|f&63);return p};let Xn=(o,p=o.length)=>{if(p<65534&&o.subarray&&Yn)return String.fromCharCode.apply(null,o.length===p?o:o.subarray(0,p));let f="";for(let g=0;g<p;g++)f+=String.fromCharCode(o[g]);return f};var $l=(o,p)=>{let f=p||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,p));let g,h,A=new Array(f*2);for(h=0,g=0;g<f;){let _=o[g++];if(_<128){A[h++]=_;continue}let C=Bs[_];if(C>4){A[h++]=65533,g+=C-1;continue}for(_&=C===2?31:C===3?15:7;C>1&&g<f;)_=_<<6|o[g++]&63,C--;if(C>1){A[h++]=65533;continue}_<65536?A[h++]=_:(_-=65536,A[h++]=55296|_>>10&1023,A[h++]=56320|_&1023)}return Xn(A,h)},Gl=(o,p)=>{p=p||o.length,p>o.length&&(p=o.length);let f=p-1;for(;f>=0&&(o[f]&192)===128;)f--;return f<0||f===0?p:f+Bs[o[f]]>p?f:p},Kn={string2buf:zl,buf2string:$l,utf8border:Gl};function ql(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Wl=ql;let Jn=Object.prototype.toString,{Z_NO_FLUSH:Yl,Z_SYNC_FLUSH:Xl,Z_FULL_FLUSH:Kl,Z_FINISH:Jl,Z_OK:vi,Z_STREAM_END:Ql,Z_DEFAULT_COMPRESSION:Zl,Z_DEFAULT_STRATEGY:th,Z_DEFLATED:eh}=jn;function _i(o){this.options=Wn.assign({level:Zl,method:eh,chunkSize:16384,windowBits:15,memLevel:8,strategy:th},o||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wl,this.strm.avail_out=0;let f=Hs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(f!==vi)throw new Error(pi[f]);if(p.header&&Hs.deflateSetHeader(this.strm,p.header),p.dictionary){let g;if(typeof p.dictionary=="string"?g=Kn.string2buf(p.dictionary):Jn.call(p.dictionary)==="[object ArrayBuffer]"?g=new Uint8Array(p.dictionary):g=p.dictionary,f=Hs.deflateSetDictionary(this.strm,g),f!==vi)throw new Error(pi[f]);this._dict_set=!0}}_i.prototype.push=function(o,p){let f=this.strm,g=this.options.chunkSize,h,A;if(this.ended)return!1;for(p===~~p?A=p:A=p===!0?Jl:Yl,typeof o=="string"?f.input=Kn.string2buf(o):Jn.call(o)==="[object ArrayBuffer]"?f.input=new Uint8Array(o):f.input=o,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(g),f.next_out=0,f.avail_out=g),(A===Xl||A===Kl)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(h=Hs.deflate(f,A),h===Ql)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),h=Hs.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===vi;if(f.avail_out===0){this.onData(f.output);continue}if(A>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},_i.prototype.onData=function(o){this.chunks.push(o)},_i.prototype.onEnd=function(o){o===vi&&(this.result=Wn.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function sh(o,p){p=p||{};let f=new _i(p);if(f.push(o,!0),f.err)throw f.msg||pi[f.err];return f.result}function ih(o,p){return p=p||{},p.gzip=!0,sh(o,p)}return(o,p,f)=>{let g=ih(o);return p==="base64"?g=btoa(Xn(g)):g=g.buffer,f&&f(g),g}}var gy=(()=>{class s extends xa{constructor(t){super(t),this.algorithm=Xi.GZIP,this.Ig=ia(),this.aT=(i,n,a)=>{let c=this.Ig(i,n);a(c)},this.compress=ra(),typeof CompressionStream!="undefined"&&Pd||(this.compress=this.aT,this.getCompressorSourceCode=()=>ia.toString())}compressSync(t,e){return this.Ig(t,e)}getCompressorSourceCode(){return ra.toString()}}return s})();function ra(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(a=>s(a)).then(a=>e(a));return}n.then(a=>e(a))}}var my=(()=>{class s extends xa{constructor(){super(...arguments),this.algorithm=Xi.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Oc=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!py.isCompressionEnabled()?new my(t):this.instance=new gy(t)}}return s})();var yy=(()=>{class s{constructor(t,e,i,n,a,c,l,u,m,d,y,E,S,T,I,b,w,L,P,R,U,G,lt,Nt,wt,v,O,x,H){this.nt=t,this.de=e,this.I=i,this.A=n,this.S=a,this.E=c,this.$h=l,this.f=u,this.Gh=m,this.Zs=d,this.Wn=y,this.ye=E,this.N=S,this.K=T,this.tt=I,this.R=b,this.pT=w,this.et=L,this.ut=P,this.At=R,this.Og=U,this.re=G,this.fT=lt,this.O=Nt,this.kt=wt,this.V=v,this.qt=O,this.ht=x,this.St=H,this.gT=(tt=!1)=>{let ht=this.A.getSession();ht===null?(this._r=new uy(this.f.recordTargetingRules,this.Ng,this.S,this.ht,this.et,this.R),this._r.init(),this._r.start()):(ht.collectState===D.RECORDING_RULES_TARGETING||ht.collectState===D.ANALYTICS_ONLY_RULES_TARGETING)&&this.Ng(tt)},this.Ng=(tt=!1)=>{this.wr.onLoad(()=>{var ht,bt;(ht=this._r)===null||ht===void 0||ht.emitTargetingCollectState(),(bt=this._r)===null||bt===void 0||bt.stop(),this.S.emitStartTracking(tt)}),this.ka(tt)},this.ka=(tt=!1)=>{this.Zs.isActive()||(this.St.init(),this.qh.start(tt),this.wr.start())},this.mT=()=>{this.S.emitBeforeSessionRenewal(),this.br(!0),this.S.emitAfterSessionRenewal()},this.yT=()=>{this.S.emitBeforeSessionRenewal(),this.ht.refreshQuota(),this.ht.onQuotaReady(tt=>{tt!==D.QUOTA_REACHED&&(this.br(!0),this.S.emitAfterSessionRenewal())})}}start(){var t;if(this.Gh.init(),this.Zs.init(),this.Zs.isActive())return;let e,i,n,a,c,l,u,m,d,y,E,S,T,I,b,w,L,P,R,U;this.O.schedule(()=>{T=new Rm(this.A,this.I),w=new Xm(T),S=new gm(this.K),I=new Qm(()=>{}),L=new Zm,U=new ty;let G=new cy(I,this.St,L,R,U,this.Wh());b=new ry(this.Wh(),this.St,G,L,P);let lt=new ay(this.S,this.E,this.St,G,L,P,R);lt.init(),this.S.addListener(lt),e=new sm(this.f,this.nt,this.I,this.K,S,this.E,T,new Vm(j),this.ut,this.kt,this.et,b),i=new Sg(this.E,this.A,this.f,this.nt,this.de,this.N),E=new Hm(b,this.f);let Nt=new Dm(this.f);y=new km(this.f,Nt,E,b,this.ut),y.init();let wt=new Ym;n=new pg(this.I,this.A,this.E,this.ut,Nt,this.f,wt,E),a=new Cg(this.f,this.nt,this.I,this.E,this.N,T,this.R);let v;this.qh=new fm(this.f,this.E,this.S,this.nt,this.I,this.A,this.ye,this.At,this.tt,this.R,this.re,wt,this.et,this.Xs,v),this.Mg=new bm(this.f,this.I,this.A,this.E),u=new Om(this.f,this.E,this.de,this.nt,this.et),m=new Mm(this.E),d=new jm(this.f,new Ma(this.f,this.N),this.kt),this.wr=new mm}),this.f.jsErrorsEnabled&&this.O.schedule(()=>{this.As=new Nm,this.ue=new xm(this.N,this.R);let G=new Wm(this.As,this.ue,this.f,this.nt,this.ut,this.E,this.et,this.R,this.kt);G.init(),this.S.addListener(G)}),this.O.schedule(()=>{this.Wn.init()}),this.O.schedule(()=>{n.init()}),this.O.schedule(()=>{i.init()}),this.O.schedule(()=>{a.init()}),this.O.schedule(()=>{this.Og.init()}),this.O.schedule(()=>{this.qh.init()}),this.O.schedule(()=>{this.Mg.init()}),this.O.schedule(()=>{u.init()}),this.O.schedule(()=>{this.pT.init()}),this.O.schedule(()=>{m.init()}),this.O.schedule(()=>{d.init()}),this.O.schedule(()=>{this.fT.init()}),this.O.schedule(()=>{this.S.addListener(this.Mg),this.S.addListener(this.$h),this.S.addListener(e),this.S.addListener(this.Wn),this.S.addListener(n),this.S.addListener(a),this.S.addListener(this.Og),this.S.addListener(this.qh),this.S.addListener(u),this.S.addListener(i),this.S.addListener(y),this.S.addListener(d),this.S.addListener(w)}),ri.isRecordingSupported()&&this.O.schedule(()=>{let G=new eg(E,this.A,this.f,this.nt,this.E,this.N,T,I,this.ue,this.mt,this.Me,this.Et,this.S,this.et,this.ut,this.re,this.kt,this.tt,this.Ur,this.Wh(),this.cr,P);G.init(),this.S.addListener(G),n.setRecordingService(G.recordingService)}),this.O.schedule(()=>{e.init()}),this.O.schedule(()=>{this.f.isQuotaEnabled()?T.onSessionExpired(()=>{this.yT()}):T.onSessionExpired(()=>{this.mT()}),this.br()})}br(t=!1){var e;if(this.f.hasTargetingRules()){this.gT(t),this.E.start(),this._r&&this._r.checkInitialUrlTargetingRules();return}this.E.start(),this.wr.onLoad(()=>{this.S.emitStartTracking(t)}),(!Ac(this.f)||t)&&this.ka(t)}Wh(){if(this.lt)return this.lt;let t=new Ic;return this.lt=new Jm(this.ye,this.f,this.R,t),this.lt.init(),this.lt.shouldUseAnonymization()&&rt.counters.pageAnonymisation.count("anonymized-on-start"),this.lt}}return s})(),Ey=(()=>{class s{constructor(t,e,i,n,a,c,l,u){this.f=t,this.I=e,this.Xe=i,this.kg=n,this.ET=a,this.ST=c,this.vT=l,this.Yh=u}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.vT)===null||e===void 0||e.start(()=>this.Xh(t)):(i=this.ST)===null||i===void 0||i.applyUpToDate(()=>this.Xh(t)):this.Xh(t)}Xh(t){this.ET.handle(),this.kg.clear(),this._T()?(this.kg.restoreClearedVisitor(),t(!0)):(this.Xe.exclude(this.f),t(!1))}_T(){let t=os.boolean(this.f.sampleRate);return this.Yh.isForceIncluded()||!this.Xe.isExcluded()&&this.I.doesVisitorExist()||!this.Xe.isExcluded()&&t}}return s})(),Sy=(()=>{class s{constructor(t,e,i,n){this.f=t,this.ot=e,this.S=i,this.A=n,this.wT=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.bT(),(t=this.A)===null||t===void 0||t.removeSession()),this.AT(e),this.setVisitor(e)}bT(){return{id:Km.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:ao(),lastVisitTimestamp:0,hitTimestamp:0,expires:k.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}AT(t){let e=ao();this.A&&!this.A.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.Dg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ot.get()}setVisitor(t){this.ot.set(t)}doesVisitorExist(){return this.ot.get()!==null}resetVisitor(){this.Lg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.ot.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.ot.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Dg===void 0?!1:t.visitsCount!==this.Dg}TT(){return!Z(this.xg)||k.now()-this.xg>this.wT}renewVisitor(){this.TT()?(this.xg=k.now(),this.Lg(),this.S.emitAfterVisitorRenewal()):j.warn("session:start:newVisitor is trying to renew visitor under time limit")}Lg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),Gt="_cs_s",xi=18e5,Pr=".",vy=13,Oi=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),_y=(()=>{class s{constructor(t,e,i){this.f=t,this.V=e,this.Zt=i,this.se=null,this.Kh=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Ba(e):null}getRawSession(t){if(t){let m=this.Jh();return Fr(m)}let{sessionString:e,status:i}=this.RT(),n=Fr(e);if(i!==Oi.EXPIRED)return n;if(this.f.cookielessTrackingEnabled)return null;let a=this.Jh();if(!a)return null;let c=csString.prototype.split.call(a,Pr);if(!s.Vg(c))return a;let l=c[c.length-1],u=parseInt(l,10);return isNaN(u)||this.CT(u),n}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}set(t,e=xi){var i;let n=k.now()+e,a=od(t);a+=`${Pr}${n}`,this.IT(a,n),this.f.cookielessTrackingEnabled?this.Zt.setItem(Gt,a):(this.V.set(Gt,a,e),(i=this.hi)===null||i===void 0||i.call(this,Gt,a,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(Gt):(this.V.delete(Gt),(t=this.pi)===null||t===void 0||t.call(this,Gt)),this.PT()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.V.delete(Gt,Yi.CURRENT_DOMAIN):this.V.delete(Gt,this.V.getRootDomain()),this.set(t))}isValid(t){return t!==null&&mn(t)}IT(t,e){this.se={sessionString:t,expires:e}}RT(){return this.se?this.se&&k.now()<=this.se.expires?{sessionString:this.se.sessionString,status:Oi.FOUND}:{sessionString:this.se.sessionString,status:Oi.EXPIRED}:{sessionString:this.Jh(),status:Oi.NOT_FOUND}}PT(){this.se=null}CT(t){this.se&&(this.se.expires=t,this.Kh=!0)}isCacheRefreshed(){return this.Kh}resetCacheRefreshed(){this.Kh=!1}Jh(){if(this.f.cookielessTrackingEnabled){let e=this.Zt.getItem(Gt);return!e||this.Ug(e)?null:e}let t=this.V.get(Gt);return!t||this.Ug(t)?null:t}Ug(t){let e=csString.prototype.split.call(t,Pr);if(!s.Vg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&k.now()>i}static Vg(t){return t[t.length-1].length===vy}}return s})(),Cn=60*1e3,wy=60*Cn,by=4*wy-Cn,ys=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),Ay=(()=>{class s{constructor(t,e,i,n){this.ve=t,this.ht=e,this.OT=i,this.NT=n,this.Yn=null,this.Qh=0,this.Xn=ys.NO}setDynamicVariablesService(t){this.MT=t}createOrUpdateSession(){this.Zh(),this.kT=k.now(),this.Qh=0;let t=this.jg();t===null?(t=this.DT(),this.Hg(t),this.Da(t)):(t=this.ht.sanitizeSessionCollectState(t),this.Hg(t),t.collectState=this.ht.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.ht.getInitialCollectState(),t.collectState=this.ht.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Xn=ys.GRANTED}withdrawnReplayRecording(t){t.collectState=this.ht.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Xn=ys.WITHDRAWN}Da(t){this.Xn===ys.WITHDRAWN?(t.collectState=this.ht.getRecordingConsentWithdrawn(),this.setSession(t)):this.Xn===ys.GRANTED?t.collectState=this.ht.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.ht.computeInitialCollectState(t),this.Xn=ys.NO}DT(){return{pageNumber:0,collectState:this.ht.getInitialCollectState(),replayConsent:this.OT?Br.NOT_EXPRESSED:Br.UNNECESSARY,etrStatus:Ht.ETR_NOT_SAVED_SESSION}}Hg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.ht.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===D.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ve.get()}jg(){return this.ve.get(!0)}doesSessionExist(){return this.ve.get()!==null}setSession(t){this.ve.set(t)}refreshSession(){let t=this.jg();t&&this.setSession(t)}removeSession(){this.ve.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==D.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===D.RECORDING_RULES_TARGETING?D.RECORDING_GLOBAL_SAMPLING:t.collectState),this.NT&&csArray.prototype.push.call(e,D.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.ve.getRawSession();return this.ve.isValid(t)}handleSubdomainChange(){this.ve.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ve.isCacheRefreshed();return e&&t&&this.ve.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Yn||this.Bg()}extendSession(){let t=this.getSession();return t===null?(j.warn("extendSession is trying to extend an expired session"),this.Zh(),!1):(this.ve.set(t,xi),!0)}Bg(){if(this.LT()){this.Zh();return}this.extendSession()&&(this.xT(),this.VT())}VT(){this.Yn=window.csSetTimeout(()=>{this.Bg()},xi-Cn)}LT(){return by-(k.now()+xi-this.kT)<0}Zh(){this.Yn&&(window.csClearTimeout(this.Yn),this.Yn=null)}xT(){this.Qh+=1,this.MT.trackDynamicVariable("session_expiry_update",this.Qh)}}return s})(),Ty=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.Xe=i}clear(){this.UT()&&(this.Fg=this.I.getVisitor(),this.I.removeVisitor()),this.jT()&&this.Xe.removeExclusion()}UT(){return this.I.doesVisitorExist()&&this.I.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}jT(){return this.Xe.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.Fg&&this.I.setVisitor(this.Fg)}}return s})(),Ry=(()=>{class s{constructor(t,e,i){this.I=t,this.A=e,this.HT=i}handle(){this.I.hasAllowSubdomainsChanged()&&(this.I.handleSubdomainChange(),this.A.handleSubdomainChange(),this.HT.handleSubdomainChange())}}return s})(),Ne="_cs_c",es=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),Cy=(()=>{class s{constructor(t,e,i){this.f=t,this.V=e,this.qt=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.qt.getItem(Ne):t=this.V.get(Ne),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.qt.setItem(Ne,csString(t)):this.V.set(Ne,csString(t),hn)}remove(){this.f.cookielessTrackingEnabled?this.qt.removeItem(Ne):this.V.delete(Ne)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.V.delete(Ne,Yi.CURRENT_DOMAIN):this.V.delete(Ne,this.V.getRootDomain()))}}return s})(),Iy=(()=>{class s{constructor(t,e,i){this.f=t,this.A=e,this.S=i}grantReplayConsent(){if(!Ue.isReplayConsentNeeded(this.f))return;let t=this.A.getSession();if(!t){this.A.grantReplayRecordingBeforeSessionStart();return}Ue.isRecordingBlockedByConsent(t)&&(this.A.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Ue.isReplayConsentNeeded(this.f))return;let t=this.A.getSession();if(!t){this.A.withdrawnReplayRecordingBeforeSessionStart();return}Ue.isRecordingWithDrawn(t)||(this.A.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),Py=["replay:consent:unanonymized:granted","trackConsentGranted"],Oy=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Ny=["replay:consent:startForSession:granted"],My=["replay:consent:startForSession:withdrawn"],ky=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.E=e,this.ye=i,this.A=n,this.S=a}init(){this.zg=new Iy(this.f,this.A,this.S),this.ye.setInitialConsent(),this.pt()}pt(){this.E.register(Py,()=>{this.ye.grantReplayAnonymizationConsent()}),this.E.register(Oy,()=>{this.ye.withdrawReplayAnonymizationConsent()}),this.E.register(Ny,()=>{this.zg.grantReplayConsent()}),this.E.register(My,()=>{this.zg.withdrawReplayConsent()})}onOptout(){this.ye.removeAllConsents()}onBeforeVisitorRenewal(){this.ye.removeAllConsents()}onAfterVisitorRenewal(){this.ye.setInitialConsent()}onAfterVisitorCleared(){this.ye.setInitialConsent()}}return s})(),Dy=(()=>{class s{constructor(t,e,i){this.f=t,this.ot=e,this.S=i}setInitialConsent(){let t=this.ot.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===es.NOT_REQUIRED||!e&&t!==es.NOT_REQUIRED}handleSubdomainChange(){this.ot.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?es.NOT_EXPRESSED:es.NOT_REQUIRED;this.ot.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.ot.set(es.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.ot.set(es.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ot.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.ot.get()===es.GRANTED}getRequestParameters(){return{uc:`${this.ot.get()}`}}}return s})(),Ly=(()=>{class s{constructor(t,e,i,n,a,c,l){this.S=t,this.E=e,this.$h=i,this.Gh=n,this.Zs=a,this.BT=c,this.Wn=l}start(){this.S.addListener(this.BT),this.S.addListener(this.Wn),this.S.addListener(this.$h),this.Wn.init(),this.Gh.init(),this.Zs.init(),!this.Zs.isActive()&&this.E.start()}}return s})(),xy=(()=>{class s{constructor(t,e){this.Pt=t,this.ot=e}exclude(t){this.ot.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ot.remove()}isExcluded(){return this.FT()||this.zT()}FT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ot.get()}zT(){return csString.prototype.indexOf.call(this.Pt.href,le)>0}}return s})(),Vy=(()=>{class s{constructor(t){this.es=t}onOptout(){this.es.removeExclusion()}}return s})(),Or=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),Uy=".^",jy=".*",Hy=(()=>{class s{constructor(t){this.R=t,this.tu=new csRegExp(`${Uy}`)}setExcludeUrlForSessionReplay(t){try{this.tu=new csRegExp(t)}catch{j.warn(`excludeURLforReplay - invalid regex '${t}'`),this.tu=new csRegExp(`${jy}`)}}$g(){return this.tu.test(this.R.getAnonymizedUrl())?Or.SessionReplay:Or.None}isUrlExcludedForSessionReplay(){return this.$g()===Or.SessionReplay}getRequestParameters(){return{ex:this.$g()}}}return s})(),By=["excludeURLforReplay"],Fy=(()=>{class s{constructor(t,e){this.es=t,this.E=e}init(){this.E.register(By,t=>{if(z(t))this.es.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Nr="_cs_inc",zy=(()=>{class s{constructor(t,e){this.Pt=t,this.V=e}isForceIncluded(){return this.$T()||this.GT()}isForceReplayRecorded(){return this.qT(D.RECORDING_GLOBAL_SAMPLING)}$T(){return this.V.get(Nr)!==null}qT(t){return this.V.get(Nr)===t}GT(){return csString.prototype.indexOf.call(this.Pt.href,Nr)>0}}return s})(),Gs="_cs_optout",$y=(()=>{class s{constructor(t,e,i){this.f=t,this.V=e,this.qt=i}get(){return this.f.cookielessTrackingEnabled?this.qt.getItem(Gs):this.V.get(Gs)}set(t){this.f.cookielessTrackingEnabled?this.qt.setItem(Gs,t):this.V.set(Gs,t,hn)}}return s})(),na="1",Gy=(()=>{class s{constructor(t,e,i){this.S=t,this.Pt=e,this.ot=i}init(){!this.isActive()&&this.WT()&&this.activate()}isActive(){return this.ot.get()===na}activate(){this.S.emitOptout(),this.ot.set(na)}WT(){return csString.prototype.indexOf.call(this.Pt.href,Gs)>0}}return s})(),qy=["optout"];var Wy=(()=>{class s{constructor(t,e){this.E=t,this.Zs=e}init(){this.E.register(qy,()=>{this.Zs.activate()})}}return s})();var Yy=(()=>{class s{constructor(t,e){this.E=t,this.ut=e}init(){this.ut.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var Xy=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Ky=(()=>{class s extends Lt{constructor(t){super(),this.eu=t,this.hs={}}register(t,e,i){for(let n of t){let a=(...c)=>{try{let l=e(...c);return rt.counters.commandApplied.count(n),l}catch(l){rt.counters.commandMisuse.count(n),j.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${ze(l)?l.stack:l}`)}};this.hs[n]={callback:a,configuration:i},this.hs}}onStart(){this.XT(),this.KT()}onStop(){for(let t of this.eu)window[t]=[]}applyFromIntegration(t,e,i){this.Gg(t,e,`Commands.apply.from.integration: ${i}`),rt.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Gg(t,e,`Commands.apply.from.implementation: ${i}`),rt.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.JT(e.name,e.params,t.iframePath),rt.counters.commandsFromIframe.count(e.name)}Gg(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}j.tryToExecute(i,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}JT(t,e,i){j.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}XT(){for(let t of this.eu)window[t].forEach(([e,...i])=>this.qg(e,i,!1))}KT(){for(let t of this.eu)window[t]={push:([e,...i])=>this.qg(e,i,!0)}}qg(t,e,i){var n,a;if(this.hs[t]){if(((n=this.hs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((a=this.hs[t].configuration)===null||a===void 0?void 0:a.disableApplyImmediate)&&i)return;try{return this.hs[t].callback(...e)}catch(l){rt.counters.commandError.count(t),j.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var Jy=(()=>{class s{constructor(t,e,i,n){this.f=t,this.I=e,this.A=i,this.sm=n}getRequestParameters(){var t;let e={...un(),...this.f.getRequestParameters()},i=this.A.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.I.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.sm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.sm.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}return s})(),Qy=(()=>{class s{constructor(t,e){this.E=t,this.Ms=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ms.updateDynamicFields("emitDebugEvents",t)})}}return s})();function oa(s,r,t){if(!Z(r)&&!Z(t))return s.href;let e=Z(r)?Nc(r):s.pathname,i=Z(t)?Mc(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Nc(s){return Ge(s,"/")?s:`/${s}`}function Mc(s){return Ge(s,"?")||s===""?s:`?${s}`}var Mr=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),Zy=(()=>{class s{constructor(t,e){this.Pt=t,this.tt=e,this.iR=10}overridePath(t,e){if(t===""){this.Ar=void 0;return}let i=this.im(e);i&&(this.ru=i),this.Ar=e?this.rm(t,e):t}overrideQuery(t,e){let i=this.im(e);i&&(this.nu=i),this.Jn=e?this.rm(t,e):t}computeOverriddenUrl(t){return this.rR(t)?this.getAnonymizedUrl():t}nR(t){return(typeof t=="string"||typeof t=="number")&&t in Mr}rR(t){let e=this.wa(this.Pt.href);return this.wa(t)===e}wa(t){return ru(t,"/")?csString.prototype.slice.call(t,0,-1):t}im(t){return Z(t==null?void 0:t.lifespan)&&this.nR(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}oR(){return this.ru&&this.ru in Mr}aR(){return this.nu&&this.nu in Mr}cleanupOverrideLifespan(){this.oR()&&(this.Ar=void 0,this.ru=void 0),this.aR()&&(this.Jn=void 0,this.nu=void 0)}getAnonymizedUrl(){let t=oa(this.Pt,this.Ar,this.Jn);return this.tt.anonymizeUrl(t)}getUrl(){return oa(this.Pt,this.Ar,this.Jn)}getAnonymizedPathAndQuery(){let t=Z(this.Ar)?Nc(this.Ar):this.Pt.pathname,e=Z(this.Jn)?Mc(this.Jn):this.Pt.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Pt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}rm(t,e){return this.cR(e)?this.lR(t):this.hR(e)?this.uR(t):t}hR(t){return!!t.decodeURI}uR(t){return this.nm(t,1,!1)}cR(t){return!!t.decodeURIDeep}lR(t){return this.nm(t,this.iR,!0)}nm(t,e,i){let n=t;for(let a=0;a<e;a++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&j.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),In=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),tE=(()=>{class s extends In{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:$.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),Qs="|iframe|",eE=(()=>{class s extends In{constructor(t,e,i,n){super(),this.dR=t,this.pR=e,this.fR=i,this.gR=n}emitIframeEvent(t,e,i){if(this.mR(e)&&t===null){j.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case K.ChildLogMessage:this.yR(i);break;case K.AnalysisEvent:{let n=i,a=this.dR.transformEvent(t,n);a.isUserEvent?this.ER(a.event):this.SR(a.event);break}case K.RecordingEvent:{let n=i,a=this.gR.transformEvents(t,n);if(a.events.length===0)return;a.containsUserEvent?this.vR(a.events):this._R(a.events);break}case K.JavascriptError:this.wR(i);break;case K.ApiError:this.bR(i);break;case K.DetailedApiError:this.AR(i);break;case K.CustomError:this.TR(i);break;case K.EmerchandisingMessage:{let n=this.fR.transformEvent(t,i);this.RR(n);break}case K.Commands:{let n=this.pR.transformEvent(t,i);this.CR(n);break}case K.IntegrationCallback:this.IR(i);break;case K.StaticResource:this.PR(i);break;case K.TrackingContextRequestMessage:this.NR(i);break;default:j.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}mR(t){let e=[K.AnalysisEvent,K.RecordingEvent,K.EmerchandisingMessage,K.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}yR(t){let{message:e,errorCode:i,level:n}=t;switch(n){case it.debug:j.debug(e,i);break;case it.warn:j.warn(e,!0,i);break;case it.implementation:j.implementation(e,i);break;case it.error:j.error(e,i);break;case it.critical:j.critical(e,i);break}}ER(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}SR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}vR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}_R(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}wR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}bR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}AR(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}RR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}CR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}IR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}PR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}NR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}TR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),sE=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),iE=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),kc=["setCustomVariable"],rE=(()=>{class s{constructor(t,e){this.E=t,this.At=e}init(){this.E.register(kc,(t,e,i,n)=>{this.At.set(t,e,i,n)})}onAfterArtificialPageView(){this.At.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.At.deleteNextPageOnlyCustomVariables()}onOptout(){this.At.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.At.removeCustomVariablesSession(),this.At.removeCustomVariablesPage()}}return s})(),aa=512,ca=255,kr={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},nE=(()=>{class s{constructor(t,e){this.N=t,this.ot=e,this.Yt={},this.Ue={}}set(t,e,i,n){let a,c;if((te(t)||z(t))&&Number(t)>0&&Pt(e)&&Pt(i)&&!Fe(e)&&!Fe(i)&&this.MR(n)){let l=this.N.anonymizePII(csString(e)),u=this.N.anonymizePII(csString(i));if(a=[csString.prototype.slice.call(l,0,aa),csString.prototype.slice.call(u,0,ca)],c=i!=="",!Z(n)||csArray.prototype.indexOf.call(kr.SESSION,n)>=0){let m=this.getCustomVariablesSession();c?m[t]=a:delete m[t],this.setCustomVariableSession(m)}(!Z(n)||csArray.prototype.indexOf.call(kr.PAGE,n)>=0)&&(c?this.Yt[t]=a:delete this.Yt[t]),Z(n)&&csArray.prototype.indexOf.call(kr.NEXT_PAGE_ONLY,n)>=0&&(c?this.Ue[t]=a:delete this.Ue[t])}else throw new Error(`Command misuse: ${kc[0]}`)}getCustomVariablesSession(){let t=this.ot.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Zs(e)?e:{}}setCustomVariableSession(t){this.ot.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ot.remove()}removeCustomVariablesPage(){this.Yt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Ue)this.Ue.hasOwnProperty(i)&&(this.Yt[i]=this.Ue[i]);for(let i in this.Yt)this.Yt.hasOwnProperty(i)&&(t[i]=this.Yt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.om(t)};return this.Yt&&window.csJSON.stringify(this.Yt).length>2&&(e.cvarp=this.om(this.Yt)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Ue).length>0)for(let t in this.Ue)this.Ue[t]===this.Yt[t]&&(delete this.Yt[t],delete this.Ue[t])}am(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],a=n[0],c=n[1];(!fh(i,1,20)||a.length>aa||c.length>ca)&&delete t[e]}}om(t){this.am(t);let e=gh(t)?[]:t;return window.csJSON.stringify(e)}MR(t){return!Z(t)||z(t)||te(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Ue)this.Ue.hasOwnProperty(e)&&(this.Yt[e]=this.Ue[e]);for(let e in this.Yt)this.Yt.hasOwnProperty(e)&&(t[e]=this.Yt[e]);return this.am(t),t}}return s})(),Jt="_cs_id",oE=(()=>{class s{constructor(t,e,i){this.f=t,this.V=e,this.Zt=i}onCookieToSet(t){this.hi=t}onCookieToRemove(t){this.pi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.Zt.getItem(Jt):t=this.V.get(Jt),t?(ed(t)||j.warn(`Invalid visitor string: ${t}`),Zu(t)):null}set(t){var e;let i=td(t);if(this.f.cookielessTrackingEnabled)this.Zt.setItem(Jt,i);else{let n=new csDate(t.expires);this.V.set(Jt,i,n),(e=this.hi)===null||e===void 0||e.call(this,Jt,i,n)}}remove(){var t;this.f.cookielessTrackingEnabled?this.Zt.removeItem(Jt):(this.V.delete(Jt),(t=this.pi)===null||t===void 0||t.call(this,Jt))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.V.delete(Jt,Yi.CURRENT_DOMAIN):this.V.delete(Jt,this.V.getRootDomain()),this.set(t))}}return s})(),aE=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,cE="$1CS_ANONYMIZED_NAME",lE=(()=>{class s{constructor(t){this.N=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],a=this.N.anonymizePII(t);if(a=this.N.anonymizeJwt(a),e.maskNames){let u=a;a=this.Vn(a),a!==u&&(rt.counters.redactedPII.count("name"),rt.counters.redactedPII.count("name-in-url"))}let c=this.kR(a,i);if(c!==a)return rt.counters.redactedPII.count("url"),c;let l=this.DR(a,n);return l!==a&&rt.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.ou(t);return i!==""?`${e}?`:e}ou(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}kR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.ou(t),a=csString.prototype.split.call(i,"/");for(let c of e){let l=this.LR(a,c);if(l!==null)return`${l}${n}`}return t}LR(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let a=t[n];if(n>=e.length){csArray.prototype.push.call(i,a);continue}let c=e[n].key;if(this.cm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(a===c){csArray.prototype.push.call(i,a);continue}return null}return csArray.prototype.join.call(i,"/")}DR(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.ou(t),a=csString.prototype.split.call(i,"/");for(let c of e)a=this.xR(a,c);return`${csArray.prototype.join.call(a,"/")}${n}`}xR(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let u=t[l],m=e[n].key;if(this.cm(m)&&l>=c){let d=e[n].value;csArray.prototype.push.call(i,u.length>0?d:""),n++,n===e.length&&(n=0);continue}if(u===m){csArray.prototype.push.call(i,u),n++,n===e.length&&(n=0);continue}for(let d=0;d<n;d++){let y=l-n+d;i[y]=t[y]}n=0,csArray.prototype.push.call(i,u)}for(let l=0;l<n;l++){let u=t.length-n+l;i[u]=t[u]}return i}cm(t){return Ge(t,bc)}Vn(t){return csString.prototype.replace.call(t,aE,cE)}}return s})(),hE=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],uE=1024,dE=1024,pE=(()=>{class s{constructor(t,e){this.ft=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=mt(t),n={isNodeSensitive(a){return N.isMaskedElement(a)||N.isMaskedElementChild(a)},isAttributeSensitive(a,c){return N.isMaskedAttribute(a,c)},allWhitelistedAttributes:ic(this.f.whitelistedAttributes),attributeIgnoreTokens:hE,useAnonymization:e,attrMaxLength:dE,hierarchyMaxLength:uE};return this.ft.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=mt(t);return this.ft.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=mt(t),{path:i,firstAnchorParent:n}=this.ft.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),a=this.VR(n)?n.href:"";return{path:i,targetLink:a}}hasValidEventTarget(t){let e=mt(t);return this.ft.isValidElement(e)}getElementPath(t){return this.ft.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}VR(t){var e;return t!==null&&t.hasAttribute("href")&&!Ge((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),fE=(()=>{class s{constructor(t){this.K=t}transformEvent(t,e){this.UR(t,e.event);let i=this.K.getElementPath(t);return this.jR(i,e.event),e}UR(t,e){if(Ng(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+gt.windowOffsetX()),e.y=Math.round(i.top+e.y+gt.windowOffsetY())}}jR(t,e){fc(e)&&(e.tgt=`${t}${Qs}${e.tgt}`),Pg(e)&&(e.tgtHM=`${t}${Qs}${e.tgtHM}`),Og(e)&&(e.tgtLk=`${t}${Qs}${e.tgtLk}`)}}return s})(),gE=(()=>{class s{constructor(t){this.K=t}transformEvent(t,e){let i=this.K.getElementPath(t);return{iframePath:e.iframePath?`${i}${Qs}${e.iframePath}`:i,commands:e.commands}}}return s})(),mE=(()=>{class s{constructor(t){this.K=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.K.getElementPath(t),n=csArray.prototype.map.call(e.products,a=>({...a,targetPath:`${i}${Qs}${a.targetPath}`}));return{...e,products:n}}}return s})(),yE=(()=>{class s{constructor(){this.HR={clientX:2,clientY:3},this.BR={clientX:1,clientY:2},this.FR=[M.POINTER_DOWN,M.POINTER_MOVE,M.POINTER_UP],this.zR=[M.TOUCH_START,M.TOUCH_MOVE,M.TOUCH_END]}transformEvents(t,e){if(!dt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==M.VISIBILITY_CHANGE),e.events.length===0||(j.warn(`IframeRecordingEventsTransformer received event ${K.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=et(t),n=null;csArray.prototype.some.call(e.events,c=>this.lm(c)||this.hm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.lm(c)?this.$R(n,c):this.hm(c)&&this.GR(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}GR(t,e){this.um(this.BR,t,e)}$R(t,e){this.um(this.HR,t,e)}um(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}lm(t){return csArray.prototype.indexOf.call(this.FR,t.type)!==-1}hm(t){return csArray.prototype.indexOf.call(this.zR,t.type)!==-1}}return s})(),EE=(()=>{class s{constructor(t){this.au=t}start(){this.au.onEvent(t=>this.X(t)),this.au.start()}stop(){this.au.stop()}X(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;j.warn(e)}}return s})(),SE=(()=>{class s{constructor(){this.Ft={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.lu,"localhost"),csArray.prototype.push.call(s.lu,"fake-tracker.content-square.fr")}start(){Tt(this.Ft)}stop(){Rt(this.Ft)}onEvent(t){this.D=t}qR(t){if(!t)return!1;let e=t.disposition;return z(t.sourceFile)&&csArray.prototype.some.call(s.lu,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.qR(t)&&this.D({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.lu=["contentsquare","cdnssl.clicktale.net"],F([V("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),vE=(()=>{class s{init(){this.dm=new EE(new SE),this.dm.start()}onOptout(){this.dm.stop()}}return s})();var{toString:WE}=Object.prototype;function Dc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let a=s.apply(this,e);return t.cache=n.set(i,a)||n,a};return t.cache=new(Dc.Cache||Map),t}Dc.Cache=Map;var{hasOwnProperty:YE}=Object.prototype;var Lc=(()=>{class s{constructor(t){this.configuration=t}}return s})(),_E=(()=>{class s extends Lc{constructor(t,e,i){super(t),this.configuration=t,this.so=e,this.S=i,this.p0=D.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.io=void 0,this.f0()}onQuotaReady(t){this.Am=t}init(){this.g0()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==D.QUOTA_REACHED}computeInitialCollectState(t){return this.io?(this.S.emitCollectStateChange(this.io,this.configuration.malkaEtrEnabled?Vt.ETR_ON:Vt.ETR_OFF),this.io):(j.warn("Quota file error computeInitialCollectState() called before quota answered"),D.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===D.QUOTA_REACHED?D.QUOTA_REACHED:!ri.isRecordingSupported()&&this.isReplayRecorded(t)?D.ANALYTICS_ONLY:t.collectState===D.RECORDING_RULES_TARGETING?D.RECORDING_RULES_TARGETING:t.collectState===D.ANALYTICS_ONLY_RULES_TARGETING?D.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===D.RECORDING_GLOBAL_SAMPLING?D.RECORDING_GLOBAL_SAMPLING:D.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===D.RECORDING_GLOBAL_SAMPLING||t.collectState===D.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.io||D.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return D.ANALYTICS_ONLY}ro(t){this.io=t,this.Am&&this.Am(t)}g0(){this.so.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.so.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.so.onLoad(t=>this.quotaFileHandler(t))}f0(){this.so.isInProgress()||this.so.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.m0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;j.warn(e),this.ro(this.p0)}m0(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&os.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?ri.isRecordingSupported()?this.ro(D.RECORDING_GLOBAL_SAMPLING):this.ro(D.ANALYTICS_ONLY):e&&!i?this.ro(D.ANALYTICS_ONLY):this.ro(D.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return D.ANALYTICS_ONLY}}return F([V("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),F([V("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),wE=(()=>{class s extends Lc{constructor(t,e,i,n,a){super(t),this.configuration=t,this.S=e,this.Yh=i,this.R=n,this.vu=a,this._u=!1}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this._u=!0,this.vu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===D.QUOTA_REACHED||t.collectState===D.RECORDING_RULES_TARGETING||t.collectState===D.RECORDING_TEMPORARILY)&&(t.collectState=D.ANALYTICS_ONLY),t}computeInitialCollectState(){return Ue.isReplayConsentNeeded(this.configuration)?D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Da()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Da()}Da(){if(!ri.isRecordingSupported())return D.ANALYTICS_ONLY;let t=D.ANALYTICS_ONLY,e=Vt.ETR_OFF;return os.percentage()<this.configuration.replayRecordingRate||this.Yh.isForceReplayRecorded()?t=D.RECORDING_GLOBAL_SAMPLING:this._u&&this.vu.evaluateUrl(this.R.getAnonymizedUrl())&&(t=D.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Vt.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!ri.isRecordingSupported())return D.ANALYTICS_ONLY;if(Ue.isRecordingBlockedByConsent(t))return t.collectState===D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:D.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===D.RECORDING_GLOBAL_SAMPLING)return D.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Vt.ETR_ON:Vt.ETR_OFF;return this._u&&this.vu.evaluateUrl(this.R.getAnonymizedUrl())?(this.S.emitCollectStateChange(D.RECORDING_URL_SAMPLING,e),D.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(D.ANALYTICS_ONLY,e),D.ANALYTICS_ONLY)}isReplayRecorded(t){return Ue.isRecordingBlockedByConsent(t)?!1:t.collectState===D.RECORDING_TEMPORARILY||t.collectState===D.RECORDING_GLOBAL_SAMPLING||t.collectState===D.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return D.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return D.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function bE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function AE(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var TE=(()=>{class s{constructor(){this.y0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.Rs={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:bE(),Attributes:AE()};this.Rs=N.getComputedSelectorSettings(t,this.Rs)}init(){this.E0()}setMaskedElementSettingsFromCommand(t){if(t=N.sanitizeSelectorUserInput(t),!N.isSelectorUserInput(t))throw new Error(`Command misuse: ${Pc[0]}`);this.wu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.wu(e)}getMaskedElementSettings(t){return t?this.Tm(this.y0):this.Rs}E0(){var t,e,i,n,a,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(a=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||a===void 0?void 0:a.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{z(u.attr)&&z(u.rule)&&l.Attributes.push({selector:u.rule,attrName:u.attr})}),this.wu(l)}wu(t){this.Rs=this.Tm(t)}Tm(t){return N.getComputedSelectorSettings(t,this.Rs)}}return s})();var RE=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.ci=e,this.ds=i,this.O=n,this.S=a,this.S0=()=>{var c;let l=ut.get(Gt);l!==null&&mn(l)?this.ht.canCollect(ad(l))?this.init():!((c=this.f.voc)===null||c===void 0)&&c.enabled:(this.ht.onQuotaReady(u=>{var m;u!==D.QUOTA_REACHED?this.init():!((m=this.f.voc)===null||m===void 0)&&m.enabled}),this.ht.refreshQuota())}}initWithQuota(){var t;if(!this.f.collectionEnabled){!((t=this.f.voc)===null||t===void 0)&&t.enabled;return}let e=new iy(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.ht=new _E(this.f,e,this.S),this.ht.init(),this.S0()}init(){qs.isSupported()&&qs.setDigestSalt(this.f.projectId.toString());let t,e,i,n,a,c,l,u,m,d,y,E,S,T,I,b,w,L,P,R,U,G,lt,Nt,wt,v,O,x,H,tt,ht,bt,me,Ye,sr;this.O.schedule(()=>{t=new ci,e=new lE(t),n=new Zy(window.location,e),i=new Yi(this.f,n,this.ci),i.init()}),this.O.schedule(()=>{a=new sE,c=new iE,w=new zy(window.location,i),new vE().init(),L=Oc.create(j.warn),b=new Va(L),this.ht===void 0&&(this.ht=new wE(this.f,this.S,w,n,new Ic),this.ht.init())}),this.O.schedule(()=>{l=new _y(this.f,i,a),m=new Ay(l,this.ht,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled)}),this.O.schedule(()=>{d=new oE(this.f,i,a),y=new Sy(this.f,d,this.S,m),this.ds.setContext(y,m)}),this.O.schedule(()=>{Ye=new Dy(this.f,new Cy(this.f,i,c),this.S),E=new Ry(y,m,Ye),S=new ld(this.f,i,a),T=new xy(window.location,S),I=new Vy(T),U=new Ty(this.f,y,T),bt=new pE(fe,this.f),O=new fE(bt),x=new gE(bt),H=new mE(bt),tt=new yE,ht=new eE(O,x,H,tt),v=new Ky([Xy.UXA]),G=new Yy(v,ht),lt=new Hy(n),Nt=new Fy(lt,v);let hs=new hd(this.f,i,a);me=new nE(t,hs),wt=new rE(v,me);let us=new Ju(y,m,T,me,this.f)}),this.O.schedule(()=>{new Ey(this.f,y,T,U,E,P,u,w).compute(us=>{this.O.schedule(()=>{G.init();let ks=new tE,ae=new ky(this.f,v,Ye,m,this.S),Et=new $y(this.f,i,c),Mt=new Gy(this.S,window.location,Et),Ds=new Wy(v,Mt),ir=new Qy(v,this.f),rr=new Jy(this.f,y,m,R);if(us){this.S.emitInitTracking();let Ls=new TE;new yy(rr,L,y,m,this.S,v,G,this.f,Ds,Mt,ae,Ye,t,bt,e,n,ir,ks,ht,me,wt,lt,Nt,this.O,b,i,c,this.ht,Ls).start()}else new Ly(this.S,v,G,Ds,Mt,I,ae).start()})})})}}return s})(),rs=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(w){let L=w.source,P=w.data;if(c(P)){let R=()=>{let U=n(t,P);y(U,()=>L.postMessage("csBundleLoaded",w.origin))};e=P.token,b(i.loadBundle),l(w.origin)&&R()}}};function n(w,L){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(w,"{version}",L.version),"{token}",L.token),"{domain}",L.domain)}function a(){return e}r.getToken=a;function c(w){return w&&w.type==="csBundleInjection"&&l(w.domain)&&m(w.version)&&u(w.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(w){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(w)||r.hjDomainRegex.test(w)}r.isAuthorizedDomain=l;function u(w){return/^[a-zA-Z0-9]+$/.test(w)}r.isAuthorizedToken=u;function m(w){return/^[a-zA-Z0-9\.]+$/.test(w)}r.isAuthorizedTagVersion=m;function d(){let w=window.opener||window.parent;return window!==w&&window.addEventListener}r.isActivable=d;function y(w,L){let P=document.createElement("script");P.type="text/javascript",P.async=!0,P.src=w,P.onload=L,P.charset="utf-8",document.head.appendChild(P)}r.addScript=y;function E(w){let L=document.createElement("link");L.rel="stylesheet",L.href=w,document.head.appendChild(L)}r.addStyle=E;function S(w){return`${w}?cb=${new csDate().getTime()}`}r.addCacheBusting=S;function T(){I(i.loadBundle)}r.waitForBundleInjection=T;function I(w){window.addEventListener("message",w,!1)}r.listen=I;function b(w){window.removeEventListener("message",w,!1)}r.removeListener=b}(s||(s={})),s})(),la="_hp_ved",CE=18e5,IE="/js/ved.js",PE="/css/ved.css",OE="/js/ved.css",NE=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),ME=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Dr=(()=>{let s;return function(r){let t=!1,e;function i(y){return e+y}function n(){let y=[i(PE),i(OE)];csArray.prototype.forEach.call(y,E=>{rs.addStyle(E)})}function a(y){let E=new csRegExp("(^|;)[ ]*"+y+"=([^;]*)"),S=E.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(y,E,S){let T=encodeURIComponent(y)+"="+encodeURIComponent(E),I=new csDate;I.setTime(I.getTime()+S);let b=T+"; expires="+I.toUTCString()+"; path=/";document.cookie=b}function l(){c(la,"on",CE)}function u(){return a(la)==="on"}r.isVLCookieEnabled=u;function m(y){window.heapV=Object.assign({},window.heap,{source:y==null?void 0:y.source,uri:e,loadArgs:y==null?void 0:y.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=m;function d(y,E){var S;if(e=y,E){let T={type:NE.StatusUpdate,value:ME.ReceivedInitMessage},I={targetOrigin:E==null?void 0:E.origin};(S=E==null?void 0:E.source)===null||S===void 0||S.postMessage(T,I)}t||(t=!0,l(),m(E),window.heapV&&(rs.addScript(i(IE)),n()))}r.init=d}(s||(s={})),s})(),kE=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,rs.hjDomainRegex],a,c,l,u={initHeapVisualLabeler(R){var U;R.origin===l&&((U=R.data)===null||U===void 0?void 0:U.message)==="init"&&R.source&&(Dr.init(l,R),w(u.initHeapVisualLabeler))},ping(R){typeof R.data=="string"&&R.data==="ping"&&y(R.origin)&&(c=R.origin,a=rs.hjDomainRegex.test(R.origin)?i:R.origin,w(u.ping),b(u.insertMessageScript),E(rs.addCacheBusting("utils.js")))},insertMessageScript:L(R=>{typeof R.data=="string"&&R.data!=="ping"&&(w(u.insertMessageScript),E(R.data))})};function m(){return rs.getToken()}r.getToken=m;function d(){return window!==t&&window.addEventListener}r.isActivable=d;function y(R){return csArray.prototype.some.call(n,U=>U.test(R))}r.isAuthorizedDomain=y;function E(R,U){let G=document.createElement("script");G.type="text/javascript",G.async=!0;let lt=a==null?void 0:csString.prototype.replace.call(a,/^https?:/,"");G.src=`${lt}/${e}/${R}`,G.onload=U,G.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(G),S(R)}function S(R){csString.prototype.includes.call(R,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(R,"&mode=")[1])}function T(){b(u.ping),rs.waitForBundleInjection()}r.waitForConnection=T;function I(R){l=R,b(u.initHeapVisualLabeler),Dr.isVLCookieEnabled()&&Dr.init(l)}r.waitForHeapVisualLabeler=I;function b(R){window.addEventListener("message",R,!1)}r.listen=b;function w(R){window.removeEventListener("message",R,!1)}r.removeListener=w;function L(R){return function(U){U.origin===c&&R(U)}}r.secureListener=L;function P(R){c&&t.postMessage(R,c)}r.post=P}(s||(s={})),s})();var Ni=window.CSFrameCommunication||kE;var DE=(()=>{class s extends In{constructor(t){super(),this.O=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.O.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){j.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return F([Ot("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var LE=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(te(S))return S}catch{j.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}r.sendAnalysisEvent=n;function a(S){if(window.CSJavascriptBridge.sendSREvent)for(let T of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(T))}r.sendSREvent=a;function c(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}r.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}r.sendOptIn=l;function u(){window.CSJavascriptBridge.optOut()}r.sendOptOut=u;function m(S,T){window.CSJavascriptBridge.sendDynamicVar(S,T)}r.sendDynamicVariable=m;function d(S,T,I){window.CSJavascriptBridge.sendTransaction(S,T,I)}r.sendTransaction=d;function y(S,T){if(window.CSJavascriptBridge.sendAssets){let I=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(I,T||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,I=>I.assetId))}r.sendAssets=y;function E(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}r.sendNativeSREvent=E}(s||(s={})),s})();var xE=(()=>{class s{constructor(t,e,i){this.f=t,this.vt=e,this.ds=i}start(){var t,e,i,n,a;if(window.UXAnalytics)return;window.UXAnalytics={};let c=new ec(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new Gu(this.vt,this.f);l.init();let u=new Wu(this.f,l);if(this.vt.isTopWindowTracker()&&u.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&j.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((a=window.CSProtectnativeFunctionsLogs)===null||a===void 0)&&a.Critical){j.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}zu();let d=new DE(c),y=new RE(this.f,l,this.ds,c,d);this.f.isQuotaEnabled()?y.initWithQuota():y.init()}let m=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(d){return N.isMaskedElement(d)||N.isMaskedElementChild(d)},isAttributeSensitive(d,y){return N.isMaskedAttribute(d,y)},getSensitiveAttributes(d){return Ta(d.attributes,y=>N.isMaskedAttribute(d,y.name))}},Console:{warn(d){m&&console.warn("cs.tracking.warning",d)},error(d){m&&console.error("cs.tracking.error",d)}},Version:Ia},window.CSFrameCommunication||(window.CSFrameCommunication=Ni,Ni.isActivable()&&Ni.waitForConnection(),this.f.isCsCrosswritingHeap()&&Ni.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return F([Ot("main.start"),V("main.start")],s.prototype,"start",null),s})(),VE=(()=>{class s{constructor(){}send(t,e,i=it.warn){let n={message:t,errorCode:e,level:i};LE.sendLog(n)}}return s})();var UE=(()=>{class s{constructor(t,e,i){this.B=t,this.N=e,this.pC=i,this.Ct=[],this.Ne=null,this.fC=un().v}Fm(){this.Ct.length!==0&&(this.B.send({m:csArray.prototype.map.call(this.Ct,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.N.anonymizePII(window.location.pathname),pid:this.pC,v:this.fC}),this.Ct=[])}push(t){if(csArray.prototype.push.call(this.Ct,...t),this.Ne&&(csClearTimeout(this.Ne),this.Ne=null),this.Ct.length>=s.MAX_QUEUE_SIZE){this.Fm();return}this.Ne=window.csSetTimeout(()=>{this.Fm(),this.Ne=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5e3,s.MAX_QUEUE_SIZE=100,s})();function jE(s,r){let t=s.validationRate/10,e=os.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let a=Oc.create(j.warn,r.isTopWindowTracker()),l=new Va(a).create(s.getMetricsUri(),!0),u=new ci,m=new UE(l,u,s.projectId);rt.setService(m)}catch(a){j.warn(`Error initializing metrics: ${a.message}`)}}function HE(){var s;let r=new pu(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new fu(window,r);t.init();let e=new ju;if(Yh(j),j.computeIsActive(r.validationRate),t.isTopWindowTracker()){let a=new ku(r,e);j.setStrategy(a)}else if(t.isInIframeContext()){let n=new Uu(r);j.setStrategy(n)}else if(t.isInWebViewContext()){let n=new VE;j.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=qe(window,"MutationObserver")),Kh(),jE(r,t),new xE(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Hu(HE)}catch{}});})();

